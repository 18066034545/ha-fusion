import{a as C,g as D,j as E,k as K,d as h,u as d,b as y,n as L,h as O,e as V,m as Q,M as z,C as c,w as j,r as R,c as T,I as U,f as W}from"./scheduler.BGjPv-1J.js";import{S,i as B,b as G,d as N,m as P,t as g,a as k,e as A,g as X,c as Y}from"./index.DGGgQIon.js";import{f as Z}from"./Loader.DbTsSYa5.js";import{I as x}from"./2.DxYEmZCZ.js";function $(a){let e,t,s;return t=new x({props:{icon:"ph:image-broken-duotone",width:"2.5rem"}}),{c(){e=D("div"),G(t.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var u=K(e);N(t.$$.fragment,u),u.forEach(h),this.h()},h(){d(e,"class","svelte-w3l3ng")},m(l,u){y(l,e,u),P(t,e,null),s=!0},p:L,i(l){s||(g(t.$$.fragment,l),s=!0)},o(l){k(t.$$.fragment,l),s=!1},d(l){l&&h(e),A(t)}}}class ee extends S{constructor(e){super(),B(this,e,null,$,C,{})}}function q(a){let e,t;return e=new ee({}),{c(){G(e.$$.fragment)},l(s){N(e.$$.fragment,s)},m(s,l){P(e,s,l),t=!0},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){A(e,s)}}}function te(a){let e,t,s,l,u,m,f,i=a[4]&&q();return{c(){e=D("img"),s=O(),i&&i.c(),l=V(),this.h()},l(r){e=E(r,"IMG",{src:!0,draggable:!0,alt:!0,class:!0}),s=Q(r),i&&i.l(r),l=V(),this.h()},h(){var r;z(e.src,t=a[6]?(r=a[7])==null?void 0:r.replace("/camera_proxy/","/camera_proxy_stream/"):a[7]?`${a[7]}${a[5]?"&date="+a[5]:""}`:"about:blank")||d(e,"src",t),d(e,"draggable","false"),d(e,"alt",""),d(e,"class","svelte-1bvtmi1"),c(e,"display",a[4]?"none":"initial"),c(e,"width",a[2]?"100%":"calc(14.5rem * 2 + 0.4rem)"),c(e,"object-fit",a[1]),c(e,"position",a[0]&&a[6]?"absolute":"relative")},m(r,o){y(r,e,o),a[14](e),y(r,s,o),i&&i.m(r,o),y(r,l,o),u=!0,m||(f=[j(e,"error",a[15]),j(e,"load",a[16])],m=!0)},p(r,[o]){var b;(!u||o&224&&!z(e.src,t=r[6]?(b=r[7])==null?void 0:b.replace("/camera_proxy/","/camera_proxy_stream/"):r[7]?`${r[7]}${r[5]?"&date="+r[5]:""}`:"about:blank"))&&d(e,"src",t),o&16&&c(e,"display",r[4]?"none":"initial"),o&4&&c(e,"width",r[2]?"100%":"calc(14.5rem * 2 + 0.4rem)"),o&2&&c(e,"object-fit",r[1]),o&65&&c(e,"position",r[0]&&r[6]?"absolute":"relative"),r[4]?i?o&16&&g(i,1):(i=q(),i.c(),g(i,1),i.m(l.parentNode,l)):i&&(X(),k(i,1,1,()=>{i=null}),Y())},i(r){u||(g(i),u=!0)},o(r){k(i),u=!1},d(r){r&&(h(e),h(s),h(l)),a[14](null),i&&i.d(r),m=!1,R(f)}}}const re=3e4;function ae(a,e,t){let s,l,u;T(a,Z,n=>t(13,u=n));let{sel:m}=e,{entity:f}=e,{size:i}=e,{stream_url:r}=e,{loaderVisible:o}=e,{responsive:b=void 0}=e,{muted:I=!0}=e,_,v,M,w;function p(n){t(0,o=!1),t(4,v=n)}U(()=>(clearInterval(w),w=setInterval(()=>{t(5,M=Date.now())},re),()=>{clearInterval(w),_&&t(3,_.src="",_)}));function F(n){W[n?"unshift":"push"](()=>{_=n,t(3,_)})}const H=()=>p(!0),J=()=>p(!1);return a.$$set=n=>{"sel"in n&&t(9,m=n.sel),"entity"in n&&t(10,f=n.entity),"size"in n&&t(1,i=n.size),"stream_url"in n&&t(11,r=n.stream_url),"loaderVisible"in n&&t(0,o=n.loaderVisible),"responsive"in n&&t(2,b=n.responsive),"muted"in n&&t(12,I=n.muted)},a.$$.update=()=>{var n;a.$$.dirty&1024&&t(7,s=((n=f==null?void 0:f.attributes)==null?void 0:n.entity_picture)||""),a.$$.dirty&14848&&t(6,l=(!I||(m==null?void 0:m.stream))&&!r&&!u)},[o,i,b,_,v,M,l,s,p,m,f,r,I,u,F,H,J]}class oe extends S{constructor(e){super(),B(this,e,ae,te,C,{sel:9,entity:10,size:1,stream_url:11,loaderVisible:0,responsive:2,muted:12})}}export{oe as default};
