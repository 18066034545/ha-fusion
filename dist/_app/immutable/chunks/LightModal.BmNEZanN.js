import{a as Je,e as te,b as T,d as w,c as x,g as B,h as P,j as W,k as j,m as D,u as Ee,C as pe,I as Ht,A as xt,t as F,l as z,o as M,p as Y,J as $t,f as Oe,q as Fe,v as Z,w as Re,x as Ze,i as Qe,r as xe,n as ct,y as en}from"./scheduler.BGjPv-1J.js";import{S as $e,i as et,t as C,g as ce,a as H,c as fe,b as he,d as de,m as _e,e as ge,h as tn,k as nn,f as ze}from"./index.DGGgQIon.js";import{c as tt,p as rn,E as ft,s as on,l as ln,d as sn,r as an,g as Se,e as ht}from"./Loader.DbTsSYa5.js";import{I as un}from"./Index.HGqv_fZf.js";import{R as cn}from"./RangeSlider.BqDfH_td.js";import{c as He,R as nt}from"./2.C41V4jFO.js";import{C as fn}from"./ConfigButtons.CdW5f1LV.js";import{T as hn}from"./Toggle.BO0O6H_P.js";import{S as dn}from"./Select.CYfwXNwx.js";function dt(t){let n,r;return n=new cn({props:{value:t[1],min:0,max:255}}),n.$on("input",t[8]),n.$on("change",t[9]),{c(){he(n.$$.fragment)},l(e){de(n.$$.fragment,e)},m(e,i){_e(n,e,i),r=!0},p(e,i){const o={};i&2&&(o.value=e[1]),n.$set(o)},i(e){r||(C(n.$$.fragment,e),r=!0)},o(e){H(n.$$.fragment,e),r=!1},d(e){ge(n,e)}}}function _n(t){let n,r,e=t[2]&&dt(t);return{c(){e&&e.c(),n=te()},l(i){e&&e.l(i),n=te()},m(i,o){e&&e.m(i,o),T(i,n,o),r=!0},p(i,[o]){i[2]?e?(e.p(i,o),o&4&&C(e,1)):(e=dt(i),e.c(),C(e,1),e.m(n.parentNode,n)):e&&(ce(),H(e,1,1,()=>{e=null}),fe())},i(i){r||(C(e),r=!0)},o(i){H(e),r=!1},d(i){i&&w(n),e&&e.d(i)}}}function gn(t,n,r){let e;x(t,tt,_=>r(10,e=_));let{entity:i}=n,{brightness:o}=n,{current:l}=n,{debounce:s}=n,{timeout:a}=n,{rangeValue:c}=n,h;async function u(_){if(!h){r(5,s=!0),clearTimeout(a),r(6,a=setTimeout(()=>{r(5,s=!1),r(1,c=_||0)},2500)),r(3,h=He(e,"light","turn_on",{entity_id:i==null?void 0:i.entity_id,brightness:_}));try{await h}catch(g){console.error("Failed to change brightness:",g)}finally{r(3,h=void 0)}}}const f=_=>{r(0,l=Math.round(_.detail/2.55)),u(Math.round(_.detail))},d=_=>{r(3,h=void 0),u(Math.round(_.detail))};return t.$$set=_=>{"entity"in _&&r(2,i=_.entity),"brightness"in _&&r(7,o=_.brightness),"current"in _&&r(0,l=_.current),"debounce"in _&&r(5,s=_.debounce),"timeout"in _&&r(6,a=_.timeout),"rangeValue"in _&&r(1,c=_.rangeValue)},t.$$.update=()=>{t.$$.dirty&160&&(s||r(1,c=o||0))},[l,c,i,h,u,s,a,o,f,d]}class vn extends $e{constructor(n){super(),et(this,n,gn,_n,Je,{entity:2,brightness:7,current:0,debounce:5,timeout:6,rangeValue:1})}}/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var O,Me,Mt,Xe,Pt,ee={},rt=[],mn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function $(t,n){for(var r in n)t[r]=n[r];return t}function Dt(t){var n=t.parentNode;n&&n.removeChild(t)}function N(t,n,r){var e,i,o,l,s=arguments;if(n=$({},n),arguments.length>3)for(r=[r],e=3;e<arguments.length;e++)r.push(s[e]);if(r!=null&&(n.children=r),t!=null&&t.defaultProps!=null)for(i in t.defaultProps)n[i]===void 0&&(n[i]=t.defaultProps[i]);return l=n.key,(o=n.ref)!=null&&delete n.ref,l!=null&&delete n.key,qe(t,n,l,o)}function qe(t,n,r,e){var i={type:t,props:n,key:r,ref:e,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return O.vnode&&O.vnode(i),i}function Le(t){return t.children}function bn(t){if(t==null||typeof t=="boolean")return null;if(typeof t=="string"||typeof t=="number")return qe(null,t,null,null);if(t.__e!=null||t.__c!=null){var n=qe(t.type,t.props,t.key,null);return n.__e=t.__e,n}return t}function we(t,n){this.props=t,this.context=n}function Pe(t,n){if(n==null)return t.__p?Pe(t.__p,t.__p.__k.indexOf(t)+1):null;for(var r;n<t.__k.length;n++)if((r=t.__k[n])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?Pe(t):null}function Lt(t){var n,r;if((t=t.__p)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if((r=t.__k[n])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Lt(t)}}function Ue(t){(!t.__d&&(t.__d=!0)&&Me.push(t)===1||Xe!==O.debounceRendering)&&(Xe=O.debounceRendering,(O.debounceRendering||Mt)(pn))}function pn(){var t,n,r,e,i,o,l,s;for(Me.sort(function(a,c){return c.__v.__b-a.__v.__b});t=Me.pop();)t.__d&&(r=void 0,e=void 0,o=(i=(n=t).__v).__e,l=n.__P,s=n.u,n.u=!1,l&&(r=[],e=ot(l,i,$({},i),n.__n,l.ownerSVGElement!==void 0,null,r,s,o??Pe(i)),Wt(r,i),e!=o&&Lt(i)))}function Bt(t,n,r,e,i,o,l,s,a){var c,h,u,f,d,_,g,b=r&&r.__k||rt,p=b.length;if(s==ee&&(s=o!=null?o[0]:p?Pe(r,0):null),c=0,n.__k=it(n.__k,function(m){if(m!=null){if(m.__p=n,m.__b=n.__b+1,(u=b[c])===null||u&&m.key==u.key&&m.type===u.type)b[c]=void 0;else for(h=0;h<p;h++){if((u=b[h])&&m.key==u.key&&m.type===u.type){b[h]=void 0;break}u=null}if(f=ot(t,m,u=u||ee,e,i,o,l,null,s,a),(h=m.ref)&&u.ref!=h&&(g||(g=[])).push(h,m.__c||f,m),f!=null){if(_==null&&(_=f),m.l!=null)f=m.l,m.l=null;else if(o==u||f!=s||f.parentNode==null){e:if(s==null||s.parentNode!==t)t.appendChild(f);else{for(d=s,h=0;(d=d.nextSibling)&&h<p;h+=2)if(d==f)break e;t.insertBefore(f,s)}n.type=="option"&&(t.value="")}s=f.nextSibling,typeof n.type=="function"&&(n.l=f)}}return c++,m}),n.__e=_,o!=null&&typeof n.type!="function")for(c=o.length;c--;)o[c]!=null&&Dt(o[c]);for(c=p;c--;)b[c]!=null&&Ut(b[c],b[c]);if(g)for(c=0;c<g.length;c++)jt(g[c],g[++c],g[++c])}function it(t,n,r){if(r==null&&(r=[]),t==null||typeof t=="boolean")n&&r.push(n(null));else if(Array.isArray(t))for(var e=0;e<t.length;e++)it(t[e],n,r);else r.push(n?n(bn(t)):t);return r}function yn(t,n,r,e,i){var o;for(o in r)o in n||gt(t,o,null,r[o],e);for(o in n)i&&typeof n[o]!="function"||o==="value"||o==="checked"||r[o]===n[o]||gt(t,o,n[o],r[o],e)}function _t(t,n,r){n[0]==="-"?t.setProperty(n,r):t[n]=typeof r=="number"&&mn.test(n)===!1?r+"px":r??""}function gt(t,n,r,e,i){var o,l,s,a,c;if(!((n=i?n==="className"?"class":n:n==="class"?"className":n)==="key"||n==="children"))if(n==="style")if(o=t.style,typeof r=="string")o.cssText=r;else{if(typeof e=="string"&&(o.cssText="",e=null),e)for(l in e)r&&l in r||_t(o,l,"");if(r)for(s in r)e&&r[s]===e[s]||_t(o,s,r[s])}else n[0]==="o"&&n[1]==="n"?(a=n!==(n=n.replace(/Capture$/,"")),c=n.toLowerCase(),n=(c in t?c:n).slice(2),r?(e||t.addEventListener(n,vt,a),(t.t||(t.t={}))[n]=r):t.removeEventListener(n,vt,a)):n!=="list"&&n!=="tagName"&&n!=="form"&&!i&&n in t?t[n]=r??"":typeof r!="function"&&n!=="dangerouslySetInnerHTML"&&(n!==(n=n.replace(/^xlink:?/,""))?r==null||r===!1?t.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),r):r==null||r===!1?t.removeAttribute(n):t.setAttribute(n,r))}function vt(t){return this.t[t.type](O.event?O.event(t):t)}function ot(t,n,r,e,i,o,l,s,a,c){var h,u,f,d,_,g,b,p,m,y,E=n.type;if(n.constructor!==void 0)return null;(h=O.__b)&&h(n);try{e:if(typeof E=="function"){if(p=n.props,m=(h=E.contextType)&&e[h.__c],y=h?m?m.props.value:h.__p:e,r.__c?b=(u=n.__c=r.__c).__p=u.__E:("prototype"in E&&E.prototype.render?n.__c=u=new E(p,y):(n.__c=u=new we(p,y),u.constructor=E,u.render=wn),m&&m.sub(u),u.props=p,u.state||(u.state={}),u.context=y,u.__n=e,f=u.__d=!0,u.__h=[]),u.__s==null&&(u.__s=u.state),E.getDerivedStateFromProps!=null&&$(u.__s==u.state?u.__s=$({},u.__s):u.__s,E.getDerivedStateFromProps(p,u.__s)),f)E.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&l.push(u);else{if(E.getDerivedStateFromProps==null&&s==null&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(p,y),!s&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(p,u.__s,y)===!1){for(u.props=p,u.state=u.__s,u.__d=!1,u.__v=n,n.__e=a!=null?a!==r.__e?a:r.__e:null,n.__k=r.__k,h=0;h<n.__k.length;h++)n.__k[h]&&(n.__k[h].__p=n);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(p,u.__s,y)}for(d=u.props,_=u.state,u.context=y,u.props=p,u.state=u.__s,(h=O.__r)&&h(n),u.__d=!1,u.__v=n,u.__P=t,h=u.render(u.props,u.state,u.context),n.__k=it(h!=null&&h.type==Le&&h.key==null?h.props.children:h),u.getChildContext!=null&&(e=$($({},e),u.getChildContext())),f||u.getSnapshotBeforeUpdate==null||(g=u.getSnapshotBeforeUpdate(d,_)),Bt(t,n,r,e,i,o,l,a,c),u.base=n.__e;h=u.__h.pop();)u.__s&&(u.state=u.__s),h.call(u);f||d==null||u.componentDidUpdate==null||u.componentDidUpdate(d,_,g),b&&(u.__E=u.__p=null)}else n.__e=kn(r.__e,n,r,e,i,o,l,c);(h=O.diffed)&&h(n)}catch(R){O.__e(R,n,r)}return n.__e}function Wt(t,n){for(var r;r=t.pop();)try{r.componentDidMount()}catch(e){O.__e(e,r.__v)}O.__c&&O.__c(n)}function kn(t,n,r,e,i,o,l,s){var a,c,h,u,f=r.props,d=n.props;if(i=n.type==="svg"||i,t==null&&o!=null){for(a=0;a<o.length;a++)if((c=o[a])!=null&&(n.type===null?c.nodeType===3:c.localName===n.type)){t=c,o[a]=null;break}}if(t==null){if(n.type===null)return document.createTextNode(d);t=i?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type),o=null}return n.type===null?f!==d&&(o!=null&&(o[o.indexOf(t)]=null),t.data=d):n!==r&&(o!=null&&(o=rt.slice.call(t.childNodes)),h=(f=r.props||ee).dangerouslySetInnerHTML,u=d.dangerouslySetInnerHTML,s||(u||h)&&(u&&h&&u.__html==h.__html||(t.innerHTML=u&&u.__html||"")),yn(t,d,f,i,s),n.__k=n.props.children,u||Bt(t,n,r,e,n.type!=="foreignObject"&&i,o,l,ee,s),s||("value"in d&&d.value!==void 0&&d.value!==t.value&&(t.value=d.value==null?"":d.value),"checked"in d&&d.checked!==void 0&&d.checked!==t.checked&&(t.checked=d.checked))),t}function jt(t,n,r){try{typeof t=="function"?t(n):t.current=n}catch(e){O.__e(e,r)}}function Ut(t,n,r){var e,i,o;if(O.unmount&&O.unmount(t),(e=t.ref)&&jt(e,null,n),r||typeof t.type=="function"||(r=(i=t.__e)!=null),t.__e=t.l=null,(e=t.__c)!=null){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(l){O.__e(l,n)}e.base=e.__P=null}if(e=t.__k)for(o=0;o<e.length;o++)e[o]&&Ut(e[o],n,r);i!=null&&Dt(i)}function wn(t,n,r){return this.constructor(t,r)}function Sn(t,n,r){var e,i,o;O.__p&&O.__p(t,n),i=(e=r===Pt)?null:n.__k,t=N(Le,null,[t]),o=[],ot(n,n.__k=t,i||ee,ee,n.ownerSVGElement!==void 0,i?null:rt.slice.call(n.childNodes),o,!1,ee,e),Wt(o,t)}O={},we.prototype.setState=function(t,n){var r=this.__s!==this.state&&this.__s||(this.__s=$({},this.state));(typeof t!="function"||(t=t(r,this.props)))&&$(r,t),t!=null&&this.__v&&(this.u=!1,n&&this.__h.push(n),Ue(this))},we.prototype.forceUpdate=function(t){this.__v&&(t&&this.__h.push(t),this.u=!0,Ue(this))},we.prototype.render=Le,Me=[],Mt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Xe=O.debounceRendering,O.__e=function(t,n,r){for(var e;n=n.__p;)if((e=n.__c)&&!e.__p)try{if(e.constructor&&e.constructor.getDerivedStateFromError!=null)e.setState(e.constructor.getDerivedStateFromError(t));else{if(e.componentDidCatch==null)continue;e.componentDidCatch(t)}return Ue(e.__E=e)}catch(i){t=i}throw t},Pt=ee;function En(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function In(t,n,r){return n&&En(t.prototype,n),t}function V(){return V=Object.assign||function(t){for(var n=arguments,r=1;r<arguments.length;r++){var e=n[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},V.apply(this,arguments)}var Rn="[-\\+]?\\d+%?",Cn="[-\\+]?\\d*\\.\\d+%?",se="(?:"+Cn+")|(?:"+Rn+")",Gt="[\\s|\\(]+("+se+")[,|\\s]+("+se+")[,|\\s]+("+se+")\\s*\\)?",Vt="[\\s|\\(]+("+se+")[,|\\s]+("+se+")[,|\\s]+("+se+")[,|\\s]+("+se+")\\s*\\)?",Tn=new RegExp("rgb"+Gt),Nn=new RegExp("rgba"+Vt),An=new RegExp("hsl"+Gt),On=new RegExp("hsla"+Vt),Be="^(?:#?|0x?)",ae="([0-9a-fA-F]{1})",ue="([0-9a-fA-F]{2})",Hn=new RegExp(Be+ae+ae+ae+"$"),Mn=new RegExp(Be+ae+ae+ae+ae+"$"),Pn=new RegExp(Be+ue+ue+ue+"$"),Dn=new RegExp(Be+ue+ue+ue+ue+"$"),Ln=2e3,Bn=4e4,Ae=Math.log,ye=Math.round,Ie=Math.floor;function K(t,n,r){return Math.min(Math.max(t,n),r)}function U(t,n){var r=t.indexOf("%")>-1,e=parseFloat(t);return r?n/100*e:e}function G(t){return parseInt(t,16)}function le(t){return t.toString(16).padStart(2,"0")}var ke=function(){function t(r,e){this.$={h:0,s:0,v:0,a:1},r&&this.set(r),this.onChange=e,this.initialValue=V({},this.$)}var n=t.prototype;return n.set=function(e){if(typeof e=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(e)?this.hexString=e:/^rgba?/.test(e)?this.rgbString=e:/^hsla?/.test(e)&&(this.hslString=e);else if(typeof e=="object")e instanceof t?this.hsva=e.hsva:"r"in e&&"g"in e&&"b"in e?this.rgb=e:"h"in e&&"s"in e&&"v"in e?this.hsv=e:"h"in e&&"s"in e&&"l"in e?this.hsl=e:"kelvin"in e&&(this.kelvin=e.kelvin);else throw new Error("Invalid color value")},n.setChannel=function(e,i,o){var l;this[e]=V({},this[e],(l={},l[i]=o,l))},n.reset=function(){this.hsva=this.initialValue},n.clone=function(){return new t(this)},n.unbind=function(){this.onChange=void 0},t.hsvToRgb=function(e){var i=e.h/60,o=e.s/100,l=e.v/100,s=Ie(i),a=i-s,c=l*(1-o),h=l*(1-a*o),u=l*(1-(1-a)*o),f=s%6,d=[l,h,c,c,u,l][f],_=[u,l,l,h,c,c][f],g=[c,c,u,l,l,h][f];return{r:K(d*255,0,255),g:K(_*255,0,255),b:K(g*255,0,255)}},t.rgbToHsv=function(e){var i=e.r/255,o=e.g/255,l=e.b/255,s=Math.max(i,o,l),a=Math.min(i,o,l),c=s-a,h=0,u=s,f=s===0?0:c/s;switch(s){case a:h=0;break;case i:h=(o-l)/c+(o<l?6:0);break;case o:h=(l-i)/c+2;break;case l:h=(i-o)/c+4;break}return{h:h*60%360,s:K(f*100,0,100),v:K(u*100,0,100)}},t.hsvToHsl=function(e){var i=e.s/100,o=e.v/100,l=(2-i)*o,s=l<=1?l:2-l,a=s<1e-9?0:i*o/s;return{h:e.h,s:K(a*100,0,100),l:K(l*50,0,100)}},t.hslToHsv=function(e){var i=e.l*2,o=e.s*(i<=100?i:200-i)/100,l=i+o<1e-9?0:2*o/(i+o);return{h:e.h,s:K(l*100,0,100),v:K((i+o)/2,0,100)}},t.kelvinToRgb=function(e){var i=e/100,o,l,s;return i<66?(o=255,l=-155.25485562709179-.44596950469579133*(l=i-2)+104.49216199393888*Ae(l),s=i<20?0:-254.76935184120902+.8274096064007395*(s=i-10)+115.67994401066147*Ae(s)):(o=351.97690566805693+.114206453784165*(o=i-55)-40.25366309332127*Ae(o),l=325.4494125711974+.07943456536662342*(l=i-50)-28.0852963507957*Ae(l),s=255),{r:K(Ie(o),0,255),g:K(Ie(l),0,255),b:K(Ie(s),0,255)}},t.rgbToKelvin=function(e){for(var i=e.r,o=e.b,l=.4,s=Ln,a=Bn,c;a-s>l;){c=(a+s)*.5;var h=t.kelvinToRgb(c);h.b/h.r>=o/i?a=c:s=c}return c},In(t,[{key:"hsv",get:function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},set:function(e){var i=this.$;if(e=V({},i,e),this.onChange){var o={h:!1,v:!1,s:!1,a:!1};for(var l in i)o[l]=e[l]!=i[l];this.$=e,(o.h||o.s||o.v||o.a)&&this.onChange(this,o)}else this.$=e}},{key:"hsva",get:function(){return V({},this.$)},set:function(e){this.hsv=e}},{key:"hue",get:function(){return this.$.h},set:function(e){this.hsv={h:e}}},{key:"saturation",get:function(){return this.$.s},set:function(e){this.hsv={s:e}}},{key:"value",get:function(){return this.$.v},set:function(e){this.hsv={v:e}}},{key:"alpha",get:function(){return this.$.a},set:function(e){this.hsv=V({},this.hsv,{a:e})}},{key:"kelvin",get:function(){return t.rgbToKelvin(this.rgb)},set:function(e){this.rgb=t.kelvinToRgb(e)}},{key:"red",get:function(){var e=this.rgb;return e.r},set:function(e){this.rgb=V({},this.rgb,{r:e})}},{key:"green",get:function(){var e=this.rgb;return e.g},set:function(e){this.rgb=V({},this.rgb,{g:e})}},{key:"blue",get:function(){var e=this.rgb;return e.b},set:function(e){this.rgb=V({},this.rgb,{b:e})}},{key:"rgb",get:function(){var e=t.hsvToRgb(this.$),i=e.r,o=e.g,l=e.b;return{r:ye(i),g:ye(o),b:ye(l)}},set:function(e){this.hsv=V({},t.rgbToHsv(e),{a:e.a===void 0?1:e.a})}},{key:"rgba",get:function(){return V({},this.rgb,{a:this.alpha})},set:function(e){this.rgb=e}},{key:"hsl",get:function(){var e=t.hsvToHsl(this.$),i=e.h,o=e.s,l=e.l;return{h:ye(i),s:ye(o),l:ye(l)}},set:function(e){this.hsv=V({},t.hslToHsv(e),{a:e.a===void 0?1:e.a})}},{key:"hsla",get:function(){return V({},this.hsl,{a:this.alpha})},set:function(e){this.hsl=e}},{key:"rgbString",get:function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},set:function(e){var i,o,l,s,a=1;if((i=Tn.exec(e))?(o=U(i[1],255),l=U(i[2],255),s=U(i[3],255)):(i=Nn.exec(e))&&(o=U(i[1],255),l=U(i[2],255),s=U(i[3],255),a=U(i[4],1)),i)this.rgb={r:o,g:l,b:s,a};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},set:function(e){this.rgbString=e}},{key:"hexString",get:function(){var e=this.rgb;return"#"+le(e.r)+le(e.g)+le(e.b)},set:function(e){var i,o,l,s,a=255;if((i=Hn.exec(e))?(o=G(i[1])*17,l=G(i[2])*17,s=G(i[3])*17):(i=Mn.exec(e))?(o=G(i[1])*17,l=G(i[2])*17,s=G(i[3])*17,a=G(i[4])*17):(i=Pn.exec(e))?(o=G(i[1]),l=G(i[2]),s=G(i[3])):(i=Dn.exec(e))&&(o=G(i[1]),l=G(i[2]),s=G(i[3]),a=G(i[4])),i)this.rgb={r:o,g:l,b:s,a:a/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var e=this.rgba;return"#"+le(e.r)+le(e.g)+le(e.b)+le(Ie(e.a*255))},set:function(e){this.hexString=e}},{key:"hslString",get:function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},set:function(e){var i,o,l,s,a=1;if((i=An.exec(e))?(o=U(i[1],360),l=U(i[2],100),s=U(i[3],100)):(i=On.exec(e))&&(o=U(i[1],360),l=U(i[2],100),s=U(i[3],100),a=U(i[4],1)),i)this.hsl={h:o,s:l,l:s,a};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},set:function(e){this.hslString=e}}]),t}(),Wn={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function lt(t){var n,r=t.width,e=t.sliderSize,i=t.borderWidth,o=t.handleRadius,l=t.padding,s=t.sliderShape,a=t.layoutDirection==="horizontal";return e=(n=e)!=null?n:l*2+o*2,s==="circle"?{handleStart:t.padding+t.handleRadius,handleRange:r-l*2-o*2,width:r,height:r,cx:r/2,cy:r/2,radius:r/2-i/2}:{handleStart:e/2,handleRange:r-e,radius:e/2,x:0,y:0,width:a?e:r,height:a?r:e}}function jn(t,n){var r=n.hsva,e=n.rgb;switch(t.sliderType){case"red":return e.r/2.55;case"green":return e.g/2.55;case"blue":return e.b/2.55;case"alpha":return r.a*100;case"kelvin":var i=t.minTemperature,o=t.maxTemperature,l=o-i,s=(n.kelvin-i)/l*100;return Math.max(0,Math.min(s,100));case"hue":return r.h/=3.6;case"saturation":return r.s;case"value":default:return r.v}}function Un(t,n,r){var e=lt(t),i=e.handleRange,o=e.handleStart,l;t.layoutDirection==="horizontal"?l=-1*r+i+o:l=n-o,l=Math.max(Math.min(l,i),0);var s=Math.round(100/i*l);switch(t.sliderType){case"kelvin":var a=t.minTemperature,c=t.maxTemperature,h=c-a;return a+h*(s/100);case"alpha":return s/100;case"hue":return s*3.6;case"red":case"blue":case"green":return s*2.55;default:return s}}function Gn(t,n){var r=lt(t),e=r.width,i=r.height,o=r.handleRange,l=r.handleStart,s=t.layoutDirection==="horizontal",a=jn(t,n),c=s?e/2:i/2,h=l+a/100*o;return s&&(h=-1*h+o+l*2),{x:s?c:h,y:s?h:c}}function Vn(t,n){var r=n.hsv,e=n.rgb;switch(t.sliderType){case"red":return[[0,"rgb(0,"+e.g+","+e.b+")"],[100,"rgb(255,"+e.g+","+e.b+")"]];case"green":return[[0,"rgb("+e.r+",0,"+e.b+")"],[100,"rgb("+e.r+",255,"+e.b+")"]];case"blue":return[[0,"rgb("+e.r+","+e.g+",0)"],[100,"rgb("+e.r+","+e.g+",255)"]];case"alpha":return[[0,"rgba("+e.r+","+e.g+","+e.b+",0)"],[100,"rgb("+e.r+","+e.g+","+e.b+")"]];case"kelvin":for(var i=[],o=t.minTemperature,l=t.maxTemperature,s=8,a=l-o,c=o,h=0;c<l;c+=a/s,h+=1){var u=ke.kelvinToRgb(c),f=u.r,d=u.g,_=u.b;i.push([100/s*h,"rgb("+f+","+d+","+_+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var g=ke.hsvToHsl({h:r.h,s:0,v:r.v}),b=ke.hsvToHsl({h:r.h,s:100,v:r.v});return[[0,"hsl("+g.h+","+g.s+"%,"+g.l+"%)"],[100,"hsl("+b.h+","+b.s+"%,"+b.l+"%)"]];case"value":default:var p=ke.hsvToHsl({h:r.h,s:r.s,v:100});return[[0,"#000"],[100,"hsl("+p.h+","+p.s+"%,"+p.l+"%)"]]}}var Ft=Math.PI*2,Fn=function(n,r){return(n%r+r)%r},zt=function(n,r){return Math.sqrt(n*n+r*r)};function Xt(t){return t.width/2-t.padding-t.handleRadius-t.borderWidth}function zn(t,n,r){var e=We(t),i=e.cx,o=e.cy,l=t.width/2;return zt(i-n,o-r)<l}function We(t){var n=t.width/2;return{width:t.width,radius:n-t.borderWidth,cx:n,cy:n}}function qt(t,n,r){var e=t.wheelAngle,i=t.wheelDirection;return r&&i==="clockwise"?n=e+n:i==="clockwise"?n=360-e+n:r&&i==="anticlockwise"?n=e+180-n:i==="anticlockwise"&&(n=e-n),Fn(n,360)}function Xn(t,n){var r=n.hsv,e=We(t),i=e.cx,o=e.cy,l=Xt(t),s=(180+qt(t,r.h,!0))*(Ft/360),a=r.s/100*l,c=t.wheelDirection==="clockwise"?-1:1;return{x:i+a*Math.cos(s)*c,y:o+a*Math.sin(s)*c}}function mt(t,n,r){var e=We(t),i=e.cx,o=e.cy,l=Xt(t);n=i-n,r=o-r;var s=qt(t,Math.atan2(-r,-n)*(360/Ft)),a=Math.min(zt(n,r),l);return{h:Math.round(s),s:Math.round(100/l*a)}}function st(t){var n=t.width,r=t.boxHeight,e=t.padding,i=t.handleRadius;return{width:n,height:r??n,radius:e+i}}function bt(t,n,r){var e=st(t),i=e.width,o=e.height,l=e.radius,s=l,a=i-l*2,c=o-l*2,h=(n-s)/a*100,u=(r-s)/c*100;return{s:Math.max(0,Math.min(h,100)),v:Math.max(0,Math.min(100-u,100))}}function qn(t,n){var r=st(t),e=r.width,i=r.height,o=r.radius,l=n.hsv,s=o,a=e-o*2,c=i-o*2;return{x:s+l.s/100*a,y:s+(c-l.v/100*c)}}function Kn(t,n){var r=n.hue;return[[[0,"#fff"],[100,"hsl("+r+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var Ge;function Yn(t){Ge||(Ge=document.getElementsByTagName("base"));var n=window.navigator.userAgent,r=/^((?!chrome|android).)*safari/i.test(n),e=/iPhone|iPod|iPad/i.test(n),i=window.location;return(r||e)&&Ge.length>0?i.protocol+"//"+i.host+i.pathname+i.search+t:t}function Kt(t,n,r,e){for(var i=0;i<e.length;i++){var o=e[i].x-n,l=e[i].y-r,s=Math.sqrt(o*o+l*l);if(s<t.handleRadius)return i}return null}function at(t){return{boxSizing:"border-box",border:t.borderWidth+"px solid "+t.borderColor}}function Ke(t,n,r){return t+"-gradient("+n+", "+r.map(function(e){var i=e[0],o=e[1];return o+" "+i+"%"}).join(",")+")"}function L(t){return typeof t=="string"?t:t+"px"}var Jn={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},pt=["mousemove","touchmove","mouseup","touchend"],je=function(t){function n(r){t.call(this,r),this.uid=(Math.random()+1).toString(36).substring(5)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.render=function(e){var i=this.handleEvent.bind(this),o={onMouseDown:i,ontouchstart:i},l=e.layoutDirection==="horizontal",s=e.margin===null?e.sliderMargin:e.margin,a={overflow:"visible",display:l?"inline-block":"block"};return e.index>0&&(a[l?"marginLeft":"marginTop"]=s),N(Le,null,e.children(this.uid,o,a))},n.prototype.handleEvent=function(e){var i=this,o=this.props.onInput,l=this.base.getBoundingClientRect();e.preventDefault();var s=e.touches?e.changedTouches[0]:e,a=s.clientX-l.left,c=s.clientY-l.top;switch(e.type){case"mousedown":case"touchstart":var h=o(a,c,0);h!==!1&&pt.forEach(function(u){document.addEventListener(u,i,{passive:!1})});break;case"mousemove":case"touchmove":o(a,c,1);break;case"mouseup":case"touchend":o(a,c,2),pt.forEach(function(u){document.removeEventListener(u,i,{passive:!1})});break}},n}(we);function ve(t){var n=t.r,r=t.url,e=n,i=n;return N("svg",{className:"IroHandle IroHandle--"+t.index+" "+(t.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+L(t.x)+", "+L(t.y)+")",willChange:"transform",top:L(-n),left:L(-n),width:L(n*2),height:L(n*2),position:"absolute",overflow:"visible"}},r&&N("use",Object.assign({xlinkHref:Yn(r)},t.props)),!r&&N("circle",{cx:e,cy:i,r:n,fill:"none","stroke-width":2,stroke:"#000"}),!r&&N("circle",{cx:e,cy:i,r:n-2,fill:t.fill,"stroke-width":2,stroke:"#fff"}))}ve.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function De(t){var n=t.activeIndex,r=n!==void 0&&n<t.colors.length?t.colors[n]:t.color,e=lt(t),i=e.width,o=e.height,l=e.radius,s=Gn(t,r),a=Vn(t,r);function c(h,u,f){var d=Un(t,h,u);t.parent.inputActive=!0,r[t.sliderType]=d,t.onInput(f,t.id)}return N(je,Object.assign({},t,{onInput:c}),function(h,u,f){return N("div",Object.assign({},u,{className:"IroSlider",style:Object.assign({},{position:"relative",width:L(i),height:L(o),borderRadius:L(l),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},f)}),N("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:L(l),background:Ke("linear",t.layoutDirection==="horizontal"?"to top":"to right",a)},at(t))}),N(ve,{isActive:!0,index:r.index,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:s.x,y:s.y}))})}De.defaultProps=Object.assign({},Wn);function Zn(t){var n=st(t),r=n.width,e=n.height,i=n.radius,o=t.colors,l=t.parent,s=t.activeIndex,a=s!==void 0&&s<t.colors.length?t.colors[s]:t.color,c=Kn(t,a),h=o.map(function(f){return qn(t,f)});function u(f,d,_){if(_===0){var g=Kt(t,f,d,h);g!==null?l.setActiveColor(g):(l.inputActive=!0,a.hsv=bt(t,f,d),t.onInput(_,t.id))}else _===1&&(l.inputActive=!0,a.hsv=bt(t,f,d));t.onInput(_,t.id)}return N(je,Object.assign({},t,{onInput:u}),function(f,d,_){return N("div",Object.assign({},d,{className:"IroBox",style:Object.assign({},{width:L(r),height:L(e),position:"relative"},_)}),N("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:L(i)},at(t),{background:Ke("linear","to bottom",c[1])+","+Ke("linear","to right",c[0])})}),o.filter(function(g){return g!==a}).map(function(g){return N(ve,{isActive:!1,index:g.index,fill:g.hslString,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:h[g.index].x,y:h[g.index].y})}),N(ve,{isActive:!0,index:a.index,fill:a.hslString,r:t.activeHandleRadius||t.handleRadius,url:t.handleSvg,props:t.handleProps,x:h[a.index].x,y:h[a.index].y}))})}var Qn="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",xn="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function Yt(t){var n=We(t),r=n.width,e=t.colors;t.borderWidth;var i=t.parent,o=t.color,l=o.hsv,s=e.map(function(h){return Xn(t,h)}),a={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function c(h,u,f){if(f===0){if(!zn(t,h,u))return!1;var d=Kt(t,h,u,s);d!==null?i.setActiveColor(d):(i.inputActive=!0,o.hsv=mt(t,h,u),t.onInput(f,t.id))}else f===1&&(i.inputActive=!0,o.hsv=mt(t,h,u));t.onInput(f,t.id)}return N(je,Object.assign({},t,{onInput:c}),function(h,u,f){return N("div",Object.assign({},u,{className:"IroWheel",style:Object.assign({},{width:L(r),height:L(r),position:"relative"},f)}),N("div",{className:"IroWheelHue",style:Object.assign({},a,{transform:"rotateZ("+(t.wheelAngle+90)+"deg)",background:t.wheelDirection==="clockwise"?Qn:xn})}),N("div",{className:"IroWheelSaturation",style:Object.assign({},a,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),t.wheelLightness&&N("div",{className:"IroWheelLightness",style:Object.assign({},a,{background:"#000",opacity:1-l.v/100})}),N("div",{className:"IroWheelBorder",style:Object.assign({},a,at(t))}),e.filter(function(d){return d!==o}).map(function(d){return N(ve,{isActive:!1,index:d.index,fill:d.hslString,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:s[d.index].x,y:s[d.index].y})}),N(ve,{isActive:!0,index:o.index,fill:o.hslString,r:t.activeHandleRadius||t.handleRadius,url:t.handleSvg,props:t.handleProps,x:s[o.index].x,y:s[o.index].y}))})}function $n(t){var n=function(r,e){var i,o=document.createElement("div");Sn(N(t,Object.assign({},{ref:function(s){return i=s}},e)),o);function l(){var s=r instanceof Element?r:document.querySelector(r);s.appendChild(i.base),i.onMount(s)}return document.readyState!=="loading"?l():document.addEventListener("DOMContentLoaded",l),i};return n.prototype=t.prototype,Object.assign(n,t),n.__component=t,n}var Jt=function(t){function n(r){var e=this;t.call(this,r),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=r.id;var i=r.colors.length>0?r.colors:[r.color];i.forEach(function(o){return e.addColor(o)}),this.setActiveColor(0),this.state=Object.assign({},r,{color:this.color,colors:this.colors,layout:r.layout})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.addColor=function(e,i){i===void 0&&(i=this.colors.length);var o=new ke(e,this.onColorChange.bind(this));this.colors.splice(i,0,o),this.colors.forEach(function(l,s){return l.index=s}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",o)},n.prototype.removeColor=function(e){var i=this.colors.splice(e,1)[0];i.unbind(),this.colors.forEach(function(o,l){return o.index=l}),this.state&&this.setState({colors:this.colors}),i.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",i)},n.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},n.prototype.setColors=function(e,i){var o=this;i===void 0&&(i=0),this.colors.forEach(function(l){return l.unbind()}),this.colors=[],e.forEach(function(l){return o.addColor(l)}),this.setActiveColor(i),this.emit("color:setAll",this.colors)},n.prototype.on=function(e,i){var o=this,l=this.events;(Array.isArray(e)?e:[e]).forEach(function(s){(l[s]||(l[s]=[])).push(i),o.deferredEvents[s]&&(o.deferredEvents[s].forEach(function(a){i.apply(null,a)}),o.deferredEvents[s]=[])})},n.prototype.off=function(e,i){var o=this;(Array.isArray(e)?e:[e]).forEach(function(l){var s=o.events[l];s&&s.splice(s.indexOf(i),1)})},n.prototype.emit=function(e){for(var i=this,o=[],l=arguments.length-1;l-- >0;)o[l]=arguments[l+1];var s=this.activeEvents,a=s.hasOwnProperty(e)?s[e]:!1;if(!a){s[e]=!0;var c=this.events[e]||[];c.forEach(function(h){return h.apply(i,o)}),s[e]=!1}},n.prototype.deferredEmit=function(e){for(var i,o=[],l=arguments.length-1;l-- >0;)o[l]=arguments[l+1];var s=this.deferredEvents;(i=this).emit.apply(i,[e].concat(o)),(s[e]||(s[e]=[])).push(o)},n.prototype.setOptions=function(e){this.setState(e)},n.prototype.resize=function(e){this.setOptions({width:e})},n.prototype.reset=function(){this.colors.forEach(function(e){return e.reset()}),this.setState({colors:this.colors})},n.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},n.prototype.onColorChange=function(e,i){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,i)),this.emit("color:change",e,i)},n.prototype.emitInputEvent=function(e,i){e===0?this.emit("input:start",this.color,i):e===1?this.emit("input:move",this.color,i):e===2&&this.emit("input:end",this.color,i)},n.prototype.render=function(e,i){var o=this,l=i.layout;if(!Array.isArray(l)){switch(l){default:l=[{component:Yt},{component:De}]}i.transparency&&l.push({component:De,options:{sliderType:"alpha"}})}return N("div",{class:"IroColorPicker",id:i.id,style:{display:i.display}},l.map(function(s,a){var c=s.component,h=s.options;return N(c,Object.assign({},i,h,{ref:void 0,onInput:o.emitInputEvent.bind(o),parent:o,index:a}))}))},n}(we);Jt.defaultProps=Object.assign({},Jn,{colors:[],display:"block",id:null,layout:"default",margin:null});var er=$n(Jt),Ye;(function(t){t.version="5.5.2",t.Color=ke,t.ColorPicker=er,function(n){n.h=N,n.ComponentBase=je,n.Handle=ve,n.Slider=De,n.Wheel=Yt,n.Box=Zn}(t.ui||(t.ui={}))})(Ye||(Ye={}));var Ve=Ye;function yt(t){let n,r,e,i,o,l;return{c(){n=B("span"),r=F(t[5]),e=F("K"),this.h()},l(s){n=W(s,"SPAN",{class:!0});var a=j(n);r=z(a,t[5]),e=z(a,"K"),a.forEach(w),this.h()},h(){Ee(n,"class","svelte-11jh7l8")},m(s,a){T(s,n,a),M(n,r),M(n,e),l=!0},p(s,a){t=s,(!l||a&32)&&Y(r,t[5])},i(s){l||(s&&$t(()=>{l&&(o&&o.end(1),i=tn(n,ft,{duration:t[6]/2}),i.start())}),l=!0)},o(s){i&&i.invalidate(),s&&(o=nn(n,ft,{duration:t[6]/2,delay:t[6]*2})),l=!1},d(s){s&&w(n),s&&o&&o.end()}}}function tr(t){let n,r=`all ${t[6]}ms ease`,e,i,o=t[2]&&t[5]&&t[3]&&yt(t);return{c(){n=B("div"),e=P(),o&&o.c(),i=te(),this.h()},l(l){n=W(l,"DIV",{class:!0}),j(n).forEach(w),e=D(l),o&&o.l(l),i=te(),this.h()},h(){var l,s;Ee(n,"class","svelte-11jh7l8"),pe(n,"margin-top",((l=t[1])==null?void 0:l.length)!==1?"2em":"0"),pe(n,"opacity",((s=t[0])==null?void 0:s.state)==="off"?"0.25":"unset"),pe(n,"transition",r)},m(l,s){T(l,n,s),t[14](n),T(l,e,s),o&&o.m(l,s),T(l,i,s)},p(l,[s]){var a,c;s&2&&pe(n,"margin-top",((a=l[1])==null?void 0:a.length)!==1?"2em":"0"),s&1&&pe(n,"opacity",((c=l[0])==null?void 0:c.state)==="off"?"0.25":"unset"),s&64&&r!==(r=`all ${l[6]}ms ease`)&&pe(n,"transition",r),l[2]&&l[5]&&l[3]?o?(o.p(l,s),s&44&&C(o,1)):(o=yt(l),o.c(),C(o,1),o.m(i.parentNode,i)):o&&(ce(),H(o,1,1,()=>{o=null}),fe())},i(l){C(o)},o(l){H(o)},d(l){l&&(w(n),w(e),w(i)),t[14](null),o&&o.d(l)}}}function nr(t,n,r){let e,i,o,l,s,a;x(t,tt,S=>r(17,s=S)),x(t,rn,S=>r(6,a=S));let{entity:c}=n,{colorMode:h}=n,{supportedColorModes:u}=n,{tempSelected:f}=n,{colorSelected:d}=n,_,g,b,p,m=!1,y;const E=[{component:Ve.ui.Wheel,options:{wheelAngle:270,wheelDirection:"clockwise"}}];Ht(async()=>{r(9,_=Ve.ColorPicker(g,{width:275,color:`rgb(${i||"255, 255, 255"})`,handleRadius:20,wheelLightness:!1,borderWidth:3,layoutDirection:"horizontal",layout:h==="xy"?E:l})),_.on("input:start",()=>{clearTimeout(p),X(`all ${a}ms ease`),r(3,m=!0)}),_.on("input:change",R),_.on("input:move",()=>X("none")),_.on("input:end",S=>{r(5,b=void 0),X(`all ${a}ms ease`),y=void 0,R(S),p=setTimeout(()=>{r(3,m=!1)},1e3)})});async function R(S){var ne,v,I,re,ie,oe;if(r(5,b=Math.round(S==null?void 0:S.kelvin)),y)return;const q=typeof((v=(ne=_==null?void 0:_.state)==null?void 0:ne.layout)==null?void 0:v[0])!="string"?(oe=(ie=(re=(I=_==null?void 0:_.state)==null?void 0:I.layout)==null?void 0:re[0])==null?void 0:ie.options)==null?void 0:oe.sliderType:void 0;let J;if(q==="kelvin"&&(u!=null&&u.includes("color_temp"))?J={kelvin:S==null?void 0:S.kelvin}:q||(J={rgb_color:[S.rgb.r,S.rgb.g,S.rgb.b]}),!!J){y=He(s,"light","turn_on",{entity_id:c==null?void 0:c.entity_id,...J});try{await y}catch(me){console.error("Failed to update color or temperature:",me)}finally{y=void 0}}}function X(S){const q=g.querySelector("svg.IroHandle");q&&(q.style.transition=S)}xt(()=>{clearTimeout(p),p=void 0});function A(S){Oe[S?"unshift":"push"](()=>{g=S,r(4,g)})}return t.$$set=S=>{"entity"in S&&r(0,c=S.entity),"colorMode"in S&&r(7,h=S.colorMode),"supportedColorModes"in S&&r(1,u=S.supportedColorModes),"tempSelected"in S&&r(2,f=S.tempSelected),"colorSelected"in S&&r(8,d=S.colorSelected)},t.$$.update=()=>{t.$$.dirty&1&&r(13,e=c==null?void 0:c.attributes),t.$$.dirty&8192&&r(11,i=e==null?void 0:e.rgb_color),t.$$.dirty&8192&&r(12,o=e==null?void 0:e.color_temp_kelvin),t.$$.dirty&4&&f&&r(3,m=!1),t.$$.dirty&8192&&r(10,l=[{component:Ve.ui.Slider,options:{sliderShape:"circle",sliderType:"kelvin",minTemperature:e==null?void 0:e.min_color_temp_kelvin,maxTemperature:e==null?void 0:e.max_color_temp_kelvin}}]),t.$$.dirty&6792&&_&&!m&&(h==="xy"&&i?r(9,_.color.rgb={r:i[0],g:i[1],b:i[2]},_):h==="color_temp"&&o&&r(9,_.color.kelvin=o,_)),t.$$.dirty&1796&&_&&(f?_.setOptions({layout:l}):d&&_.setOptions({layout:E}))},[c,u,f,m,g,b,a,h,d,_,l,i,o,e,A]}class rr extends $e{constructor(n){super(),et(this,n,nr,tr,Je,{entity:0,colorMode:7,supportedColorModes:1,tempSelected:2,colorSelected:8})}}function kt(t,n,r){const e=t.slice();return e[37]=n[r],e}function wt(t){let n,r;return n=new un({props:{$$slots:{title:[sr],default:[lr]},$$scope:{ctx:t}}}),{c(){he(n.$$.fragment)},l(e){de(n.$$.fragment,e)},m(e,i){_e(n,e,i),r=!0},p(e,i){const o={};i[0]&524285|i[1]&512&&(o.$$scope={dirty:i,ctx:e}),n.$set(o)},i(e){r||(C(n.$$.fragment,e),r=!0)},o(e){H(n.$$.fragment,e),r=!1},d(e){ge(n,e)}}}function St(t){let n,r=t[16]("group")+"",e,i,o,l,s,a;const c=[or,ir],h=[];function u(f,d){var _,g,b;return((b=(g=(_=f[3])==null?void 0:_.attributes)==null?void 0:g.entity_id)==null?void 0:b.length)<=2?0:1}return o=u(t),l=h[o]=c[o](t),{c(){n=B("h2"),e=F(r),i=P(),l.c(),s=te()},l(f){n=W(f,"H2",{});var d=j(n);e=z(d,r),d.forEach(w),i=D(f),l.l(f),s=te()},m(f,d){T(f,n,d),M(n,e),T(f,i,d),h[o].m(f,d),T(f,s,d),a=!0},p(f,d){(!a||d[0]&65536)&&r!==(r=f[16]("group")+"")&&Y(e,r);let _=o;o=u(f),o===_?h[o].p(f,d):(ce(),H(h[_],1,1,()=>{h[_]=null}),fe(),l=h[o],l?l.p(f,d):(l=h[o]=c[o](f),l.c()),C(l,1),l.m(s.parentNode,s))},i(f){a||(C(l),a=!0)},o(f){H(l),a=!1},d(f){f&&(w(n),w(i),w(s)),h[o].d(f)}}}function ir(t){var e;let n,r;return n=new dn({props:{computeIcons:!0,options:t[12],value:(e=t[3])==null?void 0:e.entity_id,placeholder:t[16]("entity")}}),n.$on("change",t[26]),{c(){he(n.$$.fragment)},l(i){de(n.$$.fragment,i)},m(i,o){_e(n,i,o),r=!0},p(i,o){var s;const l={};o[0]&4096&&(l.options=i[12]),o[0]&8&&(l.value=(s=i[3])==null?void 0:s.entity_id),o[0]&65536&&(l.placeholder=i[16]("entity")),n.$set(l)},i(i){r||(C(n.$$.fragment,i),r=!0)},o(i){H(n.$$.fragment,i),r=!1},d(i){ge(n,i)}}}function or(t){var h,u;let n,r,e=Se(void 0,t[3])+"",i,o,l,s,a=ht((u=(h=t[3])==null?void 0:h.attributes)==null?void 0:u.entity_id),c=[];for(let f=0;f<a.length;f+=1)c[f]=Et(kt(t,a,f));return{c(){n=B("div"),r=B("button"),i=F(e),o=P();for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){n=W(f,"DIV",{class:!0});var d=j(n);r=W(d,"BUTTON",{});var _=j(r);i=z(_,e),_.forEach(w),o=D(d);for(let g=0;g<c.length;g+=1)c[g].l(d);d.forEach(w),this.h()},h(){var f,d,_;Z(r,"selected",((_=(d=t[9])==null?void 0:d[(f=t[3])==null?void 0:f.entity_id])==null?void 0:_.entity_id)===t[11]),Ee(n,"class","button-container")},m(f,d){T(f,n,d),M(n,r),M(r,i),M(n,o);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(n,null);l||(s=Re(r,"click",t[24]),l=!0)},p(f,d){var _,g,b,p,m;if(d[0]&8&&e!==(e=Se(void 0,f[3])+"")&&Y(i,e),d[0]&2568&&Z(r,"selected",((b=(g=f[9])==null?void 0:g[(_=f[3])==null?void 0:_.entity_id])==null?void 0:b.entity_id)===f[11]),d[0]&536077){a=ht((m=(p=f[3])==null?void 0:p.attributes)==null?void 0:m.entity_id);let y;for(y=0;y<a.length;y+=1){const E=kt(f,a,y);c[y]?c[y].p(E,d):(c[y]=Et(E),c[y].c(),c[y].m(n,null))}for(;y<c.length;y+=1)c[y].d(1);c.length=a.length}},i:ct,o:ct,d(f){f&&w(n),en(c,f),l=!1,s()}}}function Et(t){var a,c,h;let n,r=Se(void 0,(a=t[9])==null?void 0:a[t[37]],(h=(c=t[3])==null?void 0:c.attributes)==null?void 0:h.friendly_name)+"",e,i,o,l;function s(){return t[25](t[37])}return{c(){n=B("button"),e=F(r),i=P(),this.h()},l(u){n=W(u,"BUTTON",{});var f=j(n);e=z(f,r),i=D(f),f.forEach(w),this.h()},h(){var u,f;Z(n,"selected",((f=(u=t[9])==null?void 0:u[t[37]])==null?void 0:f.entity_id)===t[11])},m(u,f){T(u,n,f),M(n,e),M(n,i),o||(l=Re(n,"click",s),o=!0)},p(u,f){var d,_,g,b,p;t=u,f[0]&520&&r!==(r=Se(void 0,(d=t[9])==null?void 0:d[t[37]],(g=(_=t[3])==null?void 0:_.attributes)==null?void 0:g.friendly_name)+"")&&Y(e,r),f[0]&2568&&Z(n,"selected",((p=(b=t[9])==null?void 0:b[t[37]])==null?void 0:p.entity_id)===t[11])},d(u){u&&w(n),o=!1,l()}}}function It(t){let n,r=t[16]("brightness")+"",e,i,o,l=Intl.NumberFormat(t[17],{style:"percent"}).format(t[14]/100)+"",s,a,c,h,u,f;function d(b){t[28](b)}function _(b){t[29](b)}let g={entity:t[5],debounce:t[10],timeout:t[19],brightness:t[13]};return t[2]!==void 0&&(g.rangeValue=t[2]),t[14]!==void 0&&(g.current=t[14]),c=new vn({props:g}),Oe.push(()=>ze(c,"rangeValue",d)),Oe.push(()=>ze(c,"current",_)),{c(){n=B("h2"),e=F(r),i=P(),o=B("span"),s=F(l),a=P(),he(c.$$.fragment),this.h()},l(b){n=W(b,"H2",{});var p=j(n);e=z(p,r),i=D(p),o=W(p,"SPAN",{class:!0});var m=j(o);s=z(m,l),m.forEach(w),p.forEach(w),a=D(b),de(c.$$.fragment,b),this.h()},h(){Ee(o,"class","align-right")},m(b,p){T(b,n,p),M(n,e),M(n,i),M(n,o),M(o,s),T(b,a,p),_e(c,b,p),f=!0},p(b,p){(!f||p[0]&65536)&&r!==(r=b[16]("brightness")+"")&&Y(e,r),(!f||p[0]&147456)&&l!==(l=Intl.NumberFormat(b[17],{style:"percent"}).format(b[14]/100)+"")&&Y(s,l);const m={};p[0]&32&&(m.entity=b[5]),p[0]&1024&&(m.debounce=b[10]),p[0]&8192&&(m.brightness=b[13]),!h&&p[0]&4&&(h=!0,m.rangeValue=b[2],Fe(()=>h=!1)),!u&&p[0]&16384&&(u=!0,m.current=b[14],Fe(()=>u=!1)),c.$set(m)},i(b){f||(C(c.$$.fragment,b),f=!0)},o(b){H(c.$$.fragment,b),f=!1},d(b){b&&(w(n),w(a)),ge(c,b)}}}function Rt(t){let n,r=t[16]("change_color")+"",e;return{c(){n=B("h2"),e=F(r)},l(i){n=W(i,"H2",{});var o=j(n);e=z(o,r),o.forEach(w)},m(i,o){T(i,n,o),M(n,e)},p(i,o){o[0]&65536&&r!==(r=i[16]("change_color")+"")&&Y(e,r)},d(i){i&&w(n)}}}function Ct(t){var c,h,u;let n,r=(c=t[6])==null?void 0:c.includes("color_temp"),e,i,o=(h=t[6])==null?void 0:h.includes("white"),l=r&&Tt(t),s=((u=t[8])==null?void 0:u.COLOR)&&Nt(t),a=o&&At(t);return{c(){n=B("div"),l&&l.c(),e=P(),s&&s.c(),i=P(),a&&a.c(),this.h()},l(f){n=W(f,"DIV",{class:!0});var d=j(n);l&&l.l(d),e=D(d),s&&s.l(d),i=D(d),a&&a.l(d),d.forEach(w),this.h()},h(){Ee(n,"class","button-container")},m(f,d){T(f,n,d),l&&l.m(n,null),M(n,e),s&&s.m(n,null),M(n,i),a&&a.m(n,null)},p(f,d){var _,g,b;d[0]&64&&(r=(_=f[6])==null?void 0:_.includes("color_temp")),r?l?l.p(f,d):(l=Tt(f),l.c(),l.m(n,e)):l&&(l.d(1),l=null),(g=f[8])!=null&&g.COLOR?s?s.p(f,d):(s=Nt(f),s.c(),s.m(n,i)):s&&(s.d(1),s=null),d[0]&64&&(o=(b=f[6])==null?void 0:b.includes("white")),o?a?a.p(f,d):(a=At(f),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},d(f){f&&w(n),l&&l.d(),s&&s.d(),a&&a.d()}}}function Tt(t){let n,r=t[16]("color_temp")+"",e,i,o,l;return{c(){n=B("button"),e=F(r),this.h()},l(s){n=W(s,"BUTTON",{});var a=j(n);e=z(a,r),a.forEach(w),this.h()},h(){Z(n,"selected",t[4]==="color_temp")},m(s,a){T(s,n,a),M(n,e),o||(l=[Re(n,"click",t[30]),Ze(i=nt.call(null,n,t[18]))],o=!0)},p(s,a){a[0]&65536&&r!==(r=s[16]("color_temp")+"")&&Y(e,r),i&&Qe(i.update)&&a[0]&262144&&i.update.call(null,s[18]),a[0]&16&&Z(n,"selected",s[4]==="color_temp")},d(s){s&&w(n),o=!1,xe(l)}}}function Nt(t){let n,r=t[16]("color")+"",e,i,o,l;return{c(){n=B("button"),e=F(r),this.h()},l(s){n=W(s,"BUTTON",{});var a=j(n);e=z(a,r),a.forEach(w),this.h()},h(){Z(n,"selected",t[4]==="color")},m(s,a){T(s,n,a),M(n,e),o||(l=[Re(n,"click",t[31]),Ze(i=nt.call(null,n,t[18]))],o=!0)},p(s,a){a[0]&65536&&r!==(r=s[16]("color")+"")&&Y(e,r),i&&Qe(i.update)&&a[0]&262144&&i.update.call(null,s[18]),a[0]&16&&Z(n,"selected",s[4]==="color")},d(s){s&&w(n),o=!1,xe(l)}}}function At(t){let n,r=t[16]("set_white")+"",e,i,o,l;return{c(){n=B("button"),e=F(r),this.h()},l(s){n=W(s,"BUTTON",{});var a=j(n);e=z(a,r),a.forEach(w),this.h()},h(){Z(n,"selected",t[4]==="white")},m(s,a){T(s,n,a),M(n,e),o||(l=[Re(n,"click",t[32]),Ze(i=nt.call(null,n,t[18]))],o=!0)},p(s,a){a[0]&65536&&r!==(r=s[16]("set_white")+"")&&Y(e,r),i&&Qe(i.update)&&a[0]&262144&&i.update.call(null,s[18]),a[0]&16&&Z(n,"selected",s[4]==="white")},d(s){s&&w(n),o=!1,xe(l)}}}function Ot(t){let n,r;return n=new rr({props:{entity:t[5],colorMode:t[7],supportedColorModes:t[6],tempSelected:t[4]==="color_temp",colorSelected:t[4]!=="color_temp"}}),{c(){he(n.$$.fragment)},l(e){de(n.$$.fragment,e)},m(e,i){_e(n,e,i),r=!0},p(e,i){const o={};i[0]&32&&(o.entity=e[5]),i[0]&128&&(o.colorMode=e[7]),i[0]&64&&(o.supportedColorModes=e[6]),i[0]&16&&(o.tempSelected=e[4]==="color_temp"),i[0]&16&&(o.colorSelected=e[4]!=="color_temp"),n.$set(o)},i(e){r||(C(n.$$.fragment,e),r=!0)},o(e){H(n.$$.fragment,e),r=!1},d(e){ge(n,e)}}}function lr(t){var X,A,S,q,J,ne;let n,r,e=t[16]("toggle")+"",i,o,l,s,a,c,h,u,f,d,_,g=((A=(X=t[3])==null?void 0:X.attributes)==null?void 0:A.entity_id)&&St(t);function b(v){t[27](v)}let p={};t[15]!==void 0&&(p.checked=t[15]),l=new hn({props:p}),Oe.push(()=>ze(l,"checked",b)),l.$on("change",t[20]);let m=((S=t[8])==null?void 0:S.BRIGHTNESS)&&It(t),y=((q=t[8])==null?void 0:q.BRIGHTNESS)&&Rt(t),E=((J=t[6])==null?void 0:J.length)>1&&Ct(t),R=((ne=t[8])==null?void 0:ne.BRIGHTNESS)&&t[4]!=="white"&&Ot(t);return d=new fn({}),{c(){g&&g.c(),n=P(),r=B("h2"),i=F(e),o=P(),he(l.$$.fragment),a=P(),m&&m.c(),c=P(),y&&y.c(),h=P(),E&&E.c(),u=P(),R&&R.c(),f=P(),he(d.$$.fragment)},l(v){g&&g.l(v),n=D(v),r=W(v,"H2",{});var I=j(r);i=z(I,e),I.forEach(w),o=D(v),de(l.$$.fragment,v),a=D(v),m&&m.l(v),c=D(v),y&&y.l(v),h=D(v),E&&E.l(v),u=D(v),R&&R.l(v),f=D(v),de(d.$$.fragment,v)},m(v,I){g&&g.m(v,I),T(v,n,I),T(v,r,I),M(r,i),T(v,o,I),_e(l,v,I),T(v,a,I),m&&m.m(v,I),T(v,c,I),y&&y.m(v,I),T(v,h,I),E&&E.m(v,I),T(v,u,I),R&&R.m(v,I),T(v,f,I),_e(d,v,I),_=!0},p(v,I){var ie,oe,me,Ce,Te,Ne;(oe=(ie=v[3])==null?void 0:ie.attributes)!=null&&oe.entity_id?g?(g.p(v,I),I[0]&8&&C(g,1)):(g=St(v),g.c(),C(g,1),g.m(n.parentNode,n)):g&&(ce(),H(g,1,1,()=>{g=null}),fe()),(!_||I[0]&65536)&&e!==(e=v[16]("toggle")+"")&&Y(i,e);const re={};!s&&I[0]&32768&&(s=!0,re.checked=v[15],Fe(()=>s=!1)),l.$set(re),(me=v[8])!=null&&me.BRIGHTNESS?m?(m.p(v,I),I[0]&256&&C(m,1)):(m=It(v),m.c(),C(m,1),m.m(c.parentNode,c)):m&&(ce(),H(m,1,1,()=>{m=null}),fe()),(Ce=v[8])!=null&&Ce.BRIGHTNESS?y?y.p(v,I):(y=Rt(v),y.c(),y.m(h.parentNode,h)):y&&(y.d(1),y=null),((Te=v[6])==null?void 0:Te.length)>1?E?E.p(v,I):(E=Ct(v),E.c(),E.m(u.parentNode,u)):E&&(E.d(1),E=null),(Ne=v[8])!=null&&Ne.BRIGHTNESS&&v[4]!=="white"?R?(R.p(v,I),I[0]&272&&C(R,1)):(R=Ot(v),R.c(),C(R,1),R.m(f.parentNode,f)):R&&(ce(),H(R,1,1,()=>{R=null}),fe())},i(v){_||(C(g),C(l.$$.fragment,v),C(m),C(R),C(d.$$.fragment,v),_=!0)},o(v){H(g),H(l.$$.fragment,v),H(m),H(R),H(d.$$.fragment,v),_=!1},d(v){v&&(w(n),w(r),w(o),w(a),w(c),w(h),w(u),w(f)),g&&g.d(v),ge(l,v),m&&m.d(v),y&&y.d(v),E&&E.d(v),R&&R.d(v),ge(d,v)}}}function sr(t){let n,r=Se(t[0],t[5])+"",e;return{c(){n=B("h1"),e=F(r),this.h()},l(i){n=W(i,"H1",{slot:!0});var o=j(n);e=z(o,r),o.forEach(w),this.h()},h(){Ee(n,"slot","title")},m(i,o){T(i,n,o),M(n,e)},p(i,o){o[0]&33&&r!==(r=Se(i[0],i[5])+"")&&Y(e,r)},d(i){i&&w(n)}}}function ar(t){let n,r,e=t[1]&&wt(t);return{c(){e&&e.c(),n=te()},l(i){e&&e.l(i),n=te()},m(i,o){e&&e.m(i,o),T(i,n,o),r=!0},p(i,o){i[1]?e?(e.p(i,o),o[0]&2&&C(e,1)):(e=wt(i),e.c(),C(e,1),e.m(n.parentNode,n)):e&&(ce(),H(e,1,1,()=>{e=null}),fe())},i(i){r||(C(e),r=!0)},o(i){H(e),r=!1},d(i){i&&w(n),e&&e.d(i)}}}function ur(t,n,r){let e,i,o,l,s,a,c,h,u,f,d,_,g,b;x(t,tt,k=>r(33,f=k)),x(t,on,k=>r(9,d=k)),x(t,ln,k=>r(16,_=k)),x(t,sn,k=>r(17,g=k)),x(t,an,k=>r(18,b=k));let{isOpen:p}=n,{sel:m}=n,y=!1,E,R=0,X,A,S,q=!1;const J=["hs","xy","rgb","rgbw","rgbww"],ne=[...J,"color_temp","brightness","white"];Ht(()=>{var k;r(3,A=e),A!=null&&A.entity_id&&r(11,X=(k=d==null?void 0:d[A.entity_id])==null?void 0:k.entity_id)});function v(){He(f,"light","toggle",{entity_id:e==null?void 0:e.entity_id})}function I(k){r(22,q=!0),r(4,S=k),k==="white"&&He(f,"light","turn_on",{entity_id:e==null?void 0:e.entity_id,white:!0})}const re=()=>{var k;r(11,X=(k=d==null?void 0:d[A==null?void 0:A.entity_id])==null?void 0:k.entity_id),r(0,m=d==null?void 0:d[A==null?void 0:A.entity_id]),clearTimeout(E),r(10,y=!1),r(2,R=c||0)},ie=k=>{var Q;r(11,X=(Q=d==null?void 0:d[k])==null?void 0:Q.entity_id),r(0,m=d==null?void 0:d[k]),clearTimeout(E),r(10,y=!1),r(2,R=c||0)},oe=k=>{var Q;(k==null?void 0:k.detail)!==null&&(r(11,X=(Q=d==null?void 0:d[k==null?void 0:k.detail])==null?void 0:Q.entity_id),r(0,m=d==null?void 0:d[k==null?void 0:k.detail]),clearTimeout(E),r(10,y=!1),r(2,R=c||0))};function me(k){s=k,r(15,s),r(5,e),r(9,d),r(0,m)}function Ce(k){R=k,r(2,R)}function Te(k){a=k,r(14,a),r(2,R)}const Ne=()=>I("color_temp"),Zt=()=>I("color"),Qt=()=>I("white");return t.$$set=k=>{"isOpen"in k&&r(1,p=k.isOpen),"sel"in k&&r(0,m=k.sel)},t.$$.update=()=>{var k,Q,ut;t.$$.dirty[0]&513&&r(5,e=d==null?void 0:d[m==null?void 0:m.entity_id]),t.$$.dirty[0]&32&&r(23,i=e==null?void 0:e.attributes),t.$$.dirty[0]&8388608&&r(6,o=Array.isArray(i==null?void 0:i.supported_color_modes)?i==null?void 0:i.supported_color_modes:[i==null?void 0:i.supported_color_modes].filter(Boolean)),t.$$.dirty[0]&8388608&&r(7,l=i==null?void 0:i.color_mode),t.$$.dirty[0]&192&&r(8,h={COLOR_MODE:o==null?void 0:o.includes(l),COLOR:o==null?void 0:o.some(be=>J.includes(be)),BRIGHTNESS:o==null?void 0:o.some(be=>ne.includes(be))}),t.$$.dirty[0]&4194704&&r(4,S=q?S:l==="color_temp"||l==="white"?l:h!=null&&h.COLOR?"color":l),t.$$.dirty[0]&32&&r(15,s=(e==null?void 0:e.state)==="on"),t.$$.dirty[0]&4&&r(14,a=Math.round(R/2.55)),t.$$.dirty[0]&32&&r(13,c=(k=e==null?void 0:e.attributes)==null?void 0:k.brightness),t.$$.dirty[0]&8&&r(12,u=[{id:A==null?void 0:A.entity_id,label:A==null?void 0:A.entity_id},...((ut=(Q=A==null?void 0:A.attributes)==null?void 0:Q.entity_id)==null?void 0:ut.map(be=>({id:be,label:be})))||[]])},[m,p,R,A,S,e,o,l,h,d,y,X,u,c,a,s,_,g,b,E,v,I,q,i,re,ie,oe,me,Ce,Te,Ne,Zt,Qt]}class pr extends $e{constructor(n){super(),et(this,n,ur,ar,Je,{isOpen:1,sel:0},null,[-1,-1])}}export{pr as default};
