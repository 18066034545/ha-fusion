import{a as ge,g as D,j as I,k as S,d as f,u as $,b as B,c as ce,H as pe,h as x,t as z,F as J,m as H,l as A,o as w,w as Q,p as ee,y as te,r as _e,n as ke}from"./scheduler.BGjPv-1J.js";import{S as be,i as we,g as G,a as q,c as R,t as M,b as ie,d as ne,m as se,e as le}from"./index.DGGgQIon.js";import{h as ye,i as ae,q as Ce,e as U,B as Ee,Q as $e}from"./Loader.DbTsSYa5.js";import{I as oe}from"./2.DxYEmZCZ.js";const e={lighting:{type:"lighting",name:"照明",icon:"mdi:ceiling-light",items:[]},curtain:{type:"curtain",name:"窗帘",icon:"mdi:curtains",items:[]},ac:{type:"ac",name:"空调",icon:"mdi:air-conditioner",items:[]},camera:{type:"camera",name:"监控",icon:"mdi:cctv",items:[]},media:{type:"media",name:"音乐",icon:"mdi:music",items:[]},scene:{type:"scene",name:"场景",icon:"mdi:movie-edit",items:[]},sensor:{type:"sensor",name:"传感器",icon:"mdi:motion-sensor",items:[]},other:{type:"other",name:"其他",icon:"mdi:dots-horizontal",items:[]}},Y={colors:{primary:"#FF6B6B",secondary:"#4ECDC4",background:"linear-gradient(135deg, #654ea3 0%, #da98b4 100%)",text:"#FFFFFF"}},Z={sidebarWidth:280,motion:!0,hide_views:!1,hide_sidebar:!1},re=[{id:"apartment-2b1b",name:"两室一厅",description:"适合小家庭的两室一厅户型，包含客厅、主卧、次卧等基础空间",preview:"/templates/2b1b.png",rooms:[{id:1,name:"客厅",icon:"mdi:sofa",sections:[{...e.lighting,id:101},{...e.curtain,id:102},{...e.ac,id:103},{...e.media,id:104},{...e.scene,id:105},{...e.sensor,id:106}]},{id:2,name:"主卧",icon:"mdi:bed-double",sections:[{...e.lighting,id:201},{...e.curtain,id:202},{...e.ac,id:203},{...e.scene,id:204},{...e.sensor,id:205}]},{id:3,name:"次卧",icon:"mdi:bed",sections:[{...e.lighting,id:301},{...e.curtain,id:302},{...e.ac,id:303},{...e.scene,id:304},{...e.sensor,id:305}]},{id:4,name:"厨房",icon:"mdi:stove",sections:[{...e.lighting,id:401},{...e.sensor,id:402}]},{id:5,name:"卫生间",icon:"mdi:shower",sections:[{...e.lighting,id:501},{...e.sensor,id:502}]}],theme:Y,settings:Z},{id:"apartment-3b2b",name:"三室两厅",description:"适合中等家庭的三室两厅户型，带有书房空间",preview:"/templates/3b2b.png",rooms:[{id:1,name:"客厅",icon:"mdi:sofa",sections:[{...e.lighting,id:101},{...e.curtain,id:102},{...e.ac,id:103},{...e.media,id:104},{...e.scene,id:105},{...e.sensor,id:106},{...e.camera,id:107}]},{id:2,name:"主卧",icon:"mdi:bed-double",sections:[{...e.lighting,id:201},{...e.curtain,id:202},{...e.ac,id:203},{...e.scene,id:204},{...e.sensor,id:205}]},{id:3,name:"次卧",icon:"mdi:bed",sections:[{...e.lighting,id:301},{...e.curtain,id:302},{...e.ac,id:303},{...e.scene,id:304},{...e.sensor,id:305}]},{id:4,name:"书房",icon:"mdi:book",sections:[{...e.lighting,id:401},{...e.curtain,id:402},{...e.ac,id:403},{...e.sensor,id:404}]},{id:5,name:"餐厅",icon:"mdi:silverware-fork-knife",sections:[{...e.lighting,id:501},{...e.curtain,id:502},{...e.scene,id:503},{...e.sensor,id:504}]},{id:6,name:"厨房",icon:"mdi:stove",sections:[{...e.lighting,id:601},{...e.sensor,id:602},{...e.camera,id:603}]},{id:7,name:"主卫",icon:"mdi:shower",sections:[{...e.lighting,id:701},{...e.sensor,id:702}]},{id:8,name:"次卫",icon:"mdi:toilet",sections:[{...e.lighting,id:801},{...e.sensor,id:802}]}],theme:Y,settings:Z},{id:"villa",name:"别墅",description:"适合大户型的多层别墅，包含更多娱乐和功能空间",preview:"/templates/villa.png",rooms:[{id:1,name:"客厅",icon:"mdi:sofa",sections:[{...e.lighting,id:101},{...e.curtain,id:102},{...e.ac,id:103},{...e.media,id:104},{...e.scene,id:105},{...e.sensor,id:106},{...e.camera,id:107}]},{id:2,name:"主卧",icon:"mdi:bed-double",sections:[{...e.lighting,id:201},{...e.curtain,id:202},{...e.ac,id:203},{...e.scene,id:204},{...e.sensor,id:205},{...e.media,id:206}]},{id:3,name:"次卧1",icon:"mdi:bed",sections:[{...e.lighting,id:301},{...e.curtain,id:302},{...e.ac,id:303},{...e.scene,id:304},{...e.sensor,id:305}]},{id:4,name:"次卧2",icon:"mdi:bed",sections:[{...e.lighting,id:401},{...e.curtain,id:402},{...e.ac,id:403},{...e.scene,id:404},{...e.sensor,id:405}]},{id:5,name:"书房",icon:"mdi:book",sections:[{...e.lighting,id:501},{...e.curtain,id:502},{...e.ac,id:503},{...e.sensor,id:504}]},{id:6,name:"影音室",icon:"mdi:movie",sections:[{...e.lighting,id:601},{...e.curtain,id:602},{...e.ac,id:603},{...e.media,id:604},{...e.scene,id:605},{...e.sensor,id:606}]},{id:7,name:"餐厅",icon:"mdi:silverware-fork-knife",sections:[{...e.lighting,id:701},{...e.curtain,id:702},{...e.scene,id:703},{...e.sensor,id:704},{...e.media,id:705}]},{id:8,name:"厨房",icon:"mdi:stove",sections:[{...e.lighting,id:801},{...e.sensor,id:802},{...e.camera,id:803}]},{id:9,name:"健身房",icon:"mdi:dumbbell",sections:[{...e.lighting,id:901},{...e.ac,id:902},{...e.media,id:903},{...e.sensor,id:904}]},{id:10,name:"花园",icon:"mdi:flower",sections:[{...e.lighting,id:1001},{...e.sensor,id:1002},{...e.camera,id:1003}]}],theme:Y,settings:Z}];function de(v,t,n){const s=v.slice();return s[13]=t[n],s}function me(v,t,n){const s=v.slice();return s[18]=t[n],s}function he(v,t,n){const s=v.slice();return s[10]=t[n],s}function De(v,t,n){const s=v.slice();return s[13]=t[n],s}function Ie(v){var K,V;let t,n="确认应用模板",s,l,m,r=((K=v[0])==null?void 0:K.name)+"",_,a,h,u,p,F,i,d,o="返回选择",k,C,y="确认应用",N,O,j,T=U(((V=v[0])==null?void 0:V.rooms)||[]),b=[];for(let c=0;c<T.length;c+=1)b[c]=fe(de(v,T,c));const X=c=>q(b[c],1,1,()=>{b[c]=null});return{c(){t=D("h2"),t.textContent=n,s=x(),l=D("p"),m=z('您即将应用"'),_=z(r),a=z('"模板。此操作将覆盖当前配置，但会自动备份现有设置。'),h=x(),u=D("div"),p=D("div");for(let c=0;c<b.length;c+=1)b[c].c();F=x(),i=D("div"),d=D("button"),d.textContent=o,k=x(),C=D("button"),C.textContent=y,this.h()},l(c){t=I(c,"H2",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1q07448"&&(t.textContent=n),s=H(c),l=I(c,"P",{class:!0});var g=S(l);m=A(g,'您即将应用"'),_=A(g,r),a=A(g,'"模板。此操作将覆盖当前配置，但会自动备份现有设置。'),g.forEach(f),h=H(c),u=I(c,"DIV",{class:!0});var P=S(u);p=I(P,"DIV",{class:!0});var L=S(p);for(let W=0;W<b.length;W+=1)b[W].l(L);L.forEach(f),P.forEach(f),F=H(c),i=I(c,"DIV",{class:!0});var E=S(i);d=I(E,"BUTTON",{class:!0,"data-svelte-h":!0}),J(d)!=="svelte-102gf3l"&&(d.textContent=o),k=H(E),C=I(E,"BUTTON",{class:!0,"data-svelte-h":!0}),J(C)!=="svelte-fzwyf5"&&(C.textContent=y),E.forEach(f),this.h()},h(){$(t,"class","svelte-1ovco3k"),$(l,"class","description svelte-1ovco3k"),$(p,"class","rooms svelte-1ovco3k"),$(u,"class","preview svelte-1ovco3k"),$(d,"class","cancel svelte-1ovco3k"),$(C,"class","apply svelte-1ovco3k"),$(i,"class","actions svelte-1ovco3k")},m(c,g){B(c,t,g),B(c,s,g),B(c,l,g),w(l,m),w(l,_),w(l,a),B(c,h,g),B(c,u,g),w(u,p);for(let P=0;P<b.length;P+=1)b[P]&&b[P].m(p,null);B(c,F,g),B(c,i,g),w(i,d),w(i,k),w(i,C),N=!0,O||(j=[Q(d,"click",v[5]),Q(C,"click",v[4])],O=!0)},p(c,g){var P,L;if((!N||g&1)&&r!==(r=((P=c[0])==null?void 0:P.name)+"")&&ee(_,r),g&1){T=U(((L=c[0])==null?void 0:L.rooms)||[]);let E;for(E=0;E<T.length;E+=1){const W=de(c,T,E);b[E]?(b[E].p(W,g),M(b[E],1)):(b[E]=fe(W),b[E].c(),M(b[E],1),b[E].m(p,null))}for(G(),E=T.length;E<b.length;E+=1)X(E);R()}},i(c){if(!N){for(let g=0;g<T.length;g+=1)M(b[g]);N=!0}},o(c){b=b.filter(Boolean);for(let g=0;g<b.length;g+=1)q(b[g]);N=!1},d(c){c&&(f(t),f(s),f(l),f(h),f(u),f(F),f(i)),te(b,c),O=!1,_e(j)}}}function Ve(v){let t,n="选择户型模板",s,l,m="选择一个预设的户型模板，快速配置您的智能家居空间。所有模板都包含照明、窗帘、空调等常用控制。",r,_,a=[],h=new Map,u,p=U(re);const F=i=>i[10].id;for(let i=0;i<p.length;i+=1){let d=he(v,p,i),o=F(d);h.set(o,a[i]=ve(o,d))}return{c(){t=D("h2"),t.textContent=n,s=x(),l=D("p"),l.textContent=m,r=x(),_=D("div");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){t=I(i,"H2",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1x1bcfy"&&(t.textContent=n),s=H(i),l=I(i,"P",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-1orne3p"&&(l.textContent=m),r=H(i),_=I(i,"DIV",{class:!0});var d=S(_);for(let o=0;o<a.length;o+=1)a[o].l(d);d.forEach(f),this.h()},h(){$(t,"class","svelte-1ovco3k"),$(l,"class","description svelte-1ovco3k"),$(_,"class","templates svelte-1ovco3k")},m(i,d){B(i,t,d),B(i,s,d),B(i,l,d),B(i,r,d),B(i,_,d);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(_,null);u=!0},p(i,d){d&12&&(p=U(re),G(),a=Ee(a,d,F,1,i,p,h,_,$e,ve,null,he),R())},i(i){if(!u){for(let d=0;d<p.length;d+=1)M(a[d]);u=!0}},o(i){for(let d=0;d<a.length;d+=1)q(a[d]);u=!1},d(i){i&&(f(t),f(s),f(l),f(r),f(_));for(let d=0;d<a.length;d+=1)a[d].d()}}}function ue(v){let t,n,s,l,m=v[18].name+"",r,_,a;return n=new oe({props:{icon:v[18].icon,width:"16",height:"16"}}),{c(){t=D("div"),ie(n.$$.fragment),s=x(),l=D("span"),r=z(m),_=x(),this.h()},l(h){t=I(h,"DIV",{class:!0});var u=S(t);ne(n.$$.fragment,u),s=H(u),l=I(u,"SPAN",{});var p=S(l);r=A(p,m),p.forEach(f),_=H(u),u.forEach(f),this.h()},h(){$(t,"class","section svelte-1ovco3k")},m(h,u){B(h,t,u),se(n,t,null),w(t,s),w(t,l),w(l,r),w(t,_),a=!0},p(h,u){const p={};u&1&&(p.icon=h[18].icon),n.$set(p),(!a||u&1)&&m!==(m=h[18].name+"")&&ee(r,m)},i(h){a||(M(n.$$.fragment,h),a=!0)},o(h){q(n.$$.fragment,h),a=!1},d(h){h&&f(t),le(n)}}}function fe(v){let t,n,s,l,m,r=v[13].name+"",_,a,h,u,p;s=new oe({props:{icon:v[13].icon,width:"24",height:"24"}});let F=U(v[13].sections),i=[];for(let o=0;o<F.length;o+=1)i[o]=ue(me(v,F,o));const d=o=>q(i[o],1,1,()=>{i[o]=null});return{c(){t=D("div"),n=D("div"),ie(s.$$.fragment),l=x(),m=D("span"),_=z(r),a=x(),h=D("div");for(let o=0;o<i.length;o+=1)i[o].c();u=x(),this.h()},l(o){t=I(o,"DIV",{class:!0});var k=S(t);n=I(k,"DIV",{class:!0});var C=S(n);ne(s.$$.fragment,C),l=H(C),m=I(C,"SPAN",{});var y=S(m);_=A(y,r),y.forEach(f),C.forEach(f),a=H(k),h=I(k,"DIV",{class:!0});var N=S(h);for(let O=0;O<i.length;O+=1)i[O].l(N);N.forEach(f),u=H(k),k.forEach(f),this.h()},h(){$(n,"class","room-header svelte-1ovco3k"),$(h,"class","room-sections svelte-1ovco3k"),$(t,"class","room svelte-1ovco3k")},m(o,k){B(o,t,k),w(t,n),se(s,n,null),w(n,l),w(n,m),w(m,_),w(t,a),w(t,h);for(let C=0;C<i.length;C+=1)i[C]&&i[C].m(h,null);w(t,u),p=!0},p(o,k){const C={};if(k&1&&(C.icon=o[13].icon),s.$set(C),(!p||k&1)&&r!==(r=o[13].name+"")&&ee(_,r),k&1){F=U(o[13].sections);let y;for(y=0;y<F.length;y+=1){const N=me(o,F,y);i[y]?(i[y].p(N,k),M(i[y],1)):(i[y]=ue(N),i[y].c(),M(i[y],1),i[y].m(h,null))}for(G(),y=F.length;y<i.length;y+=1)d(y);R()}},i(o){if(!p){M(s.$$.fragment,o);for(let k=0;k<F.length;k+=1)M(i[k]);p=!0}},o(o){q(s.$$.fragment,o),i=i.filter(Boolean);for(let k=0;k<i.length;k+=1)q(i[k]);p=!1},d(o){o&&f(t),le(s),te(i,o)}}}function Te(v){let t,n,s;return n=new oe({props:{icon:v[13].icon,width:"20",height:"20"}}),{c(){t=D("div"),ie(n.$$.fragment),this.h()},l(l){t=I(l,"DIV",{class:!0});var m=S(t);ne(n.$$.fragment,m),m.forEach(f),this.h()},h(){$(t,"class","room-icon svelte-1ovco3k")},m(l,m){B(l,t,m),se(n,t,null),s=!0},p:ke,i(l){s||(M(n.$$.fragment,l),s=!0)},o(l){q(n.$$.fragment,l),s=!1},d(l){l&&f(t),le(n)}}}function Fe(v){let t,n,s=v[10].rooms.length-4+"",l;return{c(){t=D("div"),n=z("+"),l=z(s),this.h()},l(m){t=I(m,"DIV",{class:!0});var r=S(t);n=A(r,"+"),l=A(r,s),r.forEach(f),this.h()},h(){$(t,"class","room-more svelte-1ovco3k")},m(m,r){B(m,t,r),w(t,n),w(t,l)},d(m){m&&f(t)}}}function ve(v,t){let n,s,l=`<img src="${t[10].preview}" alt="${t[10].name}" class="svelte-1ovco3k"/>`,m,r,_,a=t[10].name+"",h,u,p,F=t[10].description+"",i,d,o,k,C,y,N,O,j=U(t[10].rooms.slice(0,4)),T=[];for(let V=0;V<j.length;V+=1)T[V]=Te(De(t,j,V));let b=t[10].rooms.length>4&&Fe(t);function X(){return t[6](t[10])}function K(...V){return t[7](t[10],...V)}return{key:v,first:null,c(){n=D("div"),s=D("div"),s.innerHTML=l,m=x(),r=D("div"),_=D("h3"),h=z(a),u=x(),p=D("p"),i=z(F),d=x(),o=D("div");for(let V=0;V<T.length;V+=1)T[V].c();k=x(),b&&b.c(),C=x(),this.h()},l(V){n=I(V,"DIV",{class:!0,role:!0,tabindex:!0});var c=S(n);s=I(c,"DIV",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-16p7e1i"&&(s.innerHTML=l),m=H(c),r=I(c,"DIV",{class:!0});var g=S(r);_=I(g,"H3",{class:!0});var P=S(_);h=A(P,a),P.forEach(f),u=H(g),p=I(g,"P",{class:!0});var L=S(p);i=A(L,F),L.forEach(f),g.forEach(f),d=H(c),o=I(c,"DIV",{class:!0});var E=S(o);for(let W=0;W<T.length;W+=1)T[W].l(E);k=H(E),b&&b.l(E),E.forEach(f),C=H(c),c.forEach(f),this.h()},h(){$(s,"class","template-preview svelte-1ovco3k"),$(_,"class","svelte-1ovco3k"),$(p,"class","svelte-1ovco3k"),$(r,"class","template-info svelte-1ovco3k"),$(o,"class","template-rooms svelte-1ovco3k"),$(n,"class","template-card svelte-1ovco3k"),$(n,"role","button"),$(n,"tabindex","0"),this.first=n},m(V,c){B(V,n,c),w(n,s),w(n,m),w(n,r),w(r,_),w(_,h),w(r,u),w(r,p),w(p,i),w(n,d),w(n,o);for(let g=0;g<T.length;g+=1)T[g]&&T[g].m(o,null);w(o,k),b&&b.m(o,null),w(n,C),y=!0,N||(O=[Q(n,"click",X),Q(n,"keydown",K)],N=!0)},p(V,c){t=V},i(V){if(!y){for(let c=0;c<j.length;c+=1)M(T[c]);y=!0}},o(V){T=T.filter(Boolean);for(let c=0;c<T.length;c+=1)q(T[c]);y=!1},d(V){V&&f(n),te(T,V),b&&b.d(),N=!1,_e(O)}}}function Se(v){let t,n,s,l;const m=[Ve,Ie],r=[];function _(a,h){return a[1]?1:0}return n=_(v),s=r[n]=m[n](v),{c(){t=D("div"),s.c(),this.h()},l(a){t=I(a,"DIV",{class:!0});var h=S(t);s.l(h),h.forEach(f),this.h()},h(){$(t,"class","template-selector svelte-1ovco3k")},m(a,h){B(a,t,h),r[n].m(t,null),l=!0},p(a,[h]){let u=n;n=_(a),n===u?r[n].p(a,h):(G(),q(r[u],1,1,()=>{r[u]=null}),R(),s=r[n],s?s.p(a,h):(s=r[n]=m[n](a),s.c()),M(s,1),s.m(t,null))},i(a){l||(M(s),l=!0)},o(a){q(s),l=!1},d(a){a&&f(t),r[n].d()}}}function Be(v,t,n){let s,l;ce(v,ye,i=>n(8,s=i)),ce(v,ae,i=>n(9,l=i));let m=null,r=!1;function _(i){n(0,m=i),n(1,r=!0)}function a(i,d){(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),_(d))}function h(){if(!m)return;const i=JSON.stringify(l);localStorage.setItem("ha-fusion-backup",i);const d={...l,views:m.rooms.map(o=>({id:o.id,name:o.name,icon:o.icon,sections:o.sections.map(k=>({id:k.id,name:k.name,icon:k.icon,type:k.type,items:[]}))})),theme:m.theme,hide_views:m.settings.hide_views,hide_sidebar:m.settings.hide_sidebar,sidebarWidth:m.settings.sidebarWidth};pe(ae,l=d,l),s(),Ce(),setTimeout(()=>{window.location.reload()},100)}function u(){n(1,r=!1),n(0,m=null)}return[m,r,_,a,h,u,i=>_(i),(i,d)=>a(d,i)]}class Me extends be{constructor(t){super(),we(this,t,Be,Se,ge,{})}}export{Me as default};
