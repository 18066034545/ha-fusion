import{a as _t,e as Ve,b as d,d as f,c as Oe,I as Ye,A as ct,g as b,h as N,t as le,j as $,k as O,m as R,l as ie,F as mt,u as T,C as Y,o as v,x as pe,w as he,i as ke,p as _e,r as dt,M as Ze}from"./scheduler.BGjPv-1J.js";import{S as pt,i as ht,t as M,g as ft,a as A,c as ut,b as Z,d as x,m as ee,e as te}from"./index.DGGgQIon.js";import{c as kt,s as vt,r as gt,l as bt,g as xe}from"./Loader.DbTsSYa5.js";import{I as ve,R as ge,c as et}from"./2.DxYEmZCZ.js";import{R as $t}from"./RangeSlider.C_8PVi7s.js";import{I as yt}from"./Index.Cs2EGFG_.js";function tt(a){let e,t;return e=new yt({props:{$$slots:{title:[Et],default:[Dt]},$$scope:{ctx:a}}}),{c(){Z(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,i){ee(e,l,i),t=!0},p(l,i){const o={};i[0]&2046|i[1]&1&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function lt(a){var l;let e=((l=a[2])==null?void 0:l.media_artist)+"",t;return{c(){t=le(e)},l(i){t=ie(i,e)},m(i,o){d(i,t,o)},p(i,o){var s;o[0]&4&&e!==(e=((s=i[2])==null?void 0:s.media_artist)+"")&&_e(t,e)},d(i){i&&f(t)}}}function it(a){let e;return{c(){e=le("-")},l(t){e=ie(t,"-")},m(t,l){d(t,e,l)},d(t){t&&f(e)}}}function nt(a){var l;let e=((l=a[2])==null?void 0:l.media_title)+"",t;return{c(){t=le(e)},l(i){t=ie(i,e)},m(i,o){d(i,t,o)},p(i,o){var s;o[0]&4&&e!==(e=((s=i[2])==null?void 0:s.media_title)+"")&&_e(t,e)},d(i){i&&f(t)}}}function at(a){var l;let e,t=((l=a[2])==null?void 0:l.entity_picture)&&ot(a);return{c(){t&&t.c(),e=Ve()},l(i){t&&t.l(i),e=Ve()},m(i,o){t&&t.m(i,o),d(i,e,o)},p(i,o){var s;(s=i[2])!=null&&s.entity_picture?t?t.p(i,o):(t=ot(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&f(e),t&&t.d(i)}}}function ot(a){let e,t,l;return{c(){e=b("img"),this.h()},l(i){e=$(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){var i,o;Ze(e.src,t=(i=a[2])==null?void 0:i.entity_picture)||T(e,"src",t),T(e,"alt",l=(o=a[2])==null?void 0:o.media_title),T(e,"class","svelte-1t1ikq6")},m(i,o){d(i,e,o)},p(i,o){var s,m;o[0]&4&&!Ze(e.src,t=(s=i[2])==null?void 0:s.entity_picture)&&T(e,"src",t),o[0]&4&&l!==(l=(m=i[2])==null?void 0:m.media_title)&&T(e,"alt",l)},d(i){i&&f(e)}}}function st(a){var C;let e,t,l,i,o=be((C=a[2])==null?void 0:C.media_duration)+"",s;function m(k,y){return k[3]||k[4]?wt:Tt}let c=m(a),_=c(a);return{c(){e=b("div"),t=b("div"),_.c(),l=N(),i=b("div"),s=le(o),this.h()},l(k){e=$(k,"DIV",{class:!0});var y=O(e);t=$(y,"DIV",{class:!0});var p=O(t);_.l(p),p.forEach(f),l=R(y),i=$(y,"DIV",{class:!0});var h=O(i);s=ie(h,o),h.forEach(f),y.forEach(f),this.h()},h(){T(t,"class","current-time"),T(i,"class","duration-time"),T(e,"class","time-container svelte-1t1ikq6")},m(k,y){d(k,e,y),v(e,t),_.m(t,null),v(e,l),v(e,i),v(i,s)},p(k,y){var p;c===(c=m(k))&&_?_.p(k,y):(_.d(1),_=c(k),_&&(_.c(),_.m(t,null))),y[0]&4&&o!==(o=be((p=k[2])==null?void 0:p.media_duration)+"")&&_e(s,o)},d(k){k&&f(e),_.d()}}}function Tt(a){let e=be(a[5])+"",t;return{c(){t=le(e)},l(l){t=ie(l,e)},m(l,i){d(l,t,i)},p(l,i){i[0]&32&&e!==(e=be(l[5])+"")&&_e(t,e)},d(l){l&&f(t)}}}function wt(a){let e=(be(a[8])||"00:00")+"",t;return{c(){t=le(e)},l(l){t=ie(l,e)},m(l,i){d(l,t,i)},p(l,i){i[0]&256&&e!==(e=(be(l[8])||"00:00")+"")&&_e(t,e)},d(l){l&&f(t)}}}function rt(a){var o;let e,t,l,i;return e=new $t({props:{value:a[5],min:0,max:(o=a[2])==null?void 0:o.media_duration}}),e.$on("input",a[19]),e.$on("dragging",a[20]),{c(){Z(e.$$.fragment),t=N(),l=b("br")},l(s){x(e.$$.fragment,s),t=R(s),l=$(s,"BR",{})},m(s,m){ee(e,s,m),d(s,t,m),d(s,l,m),i=!0},p(s,m){var _;const c={};m[0]&32&&(c.value=s[5]),m[0]&4&&(c.max=(_=s[2])==null?void 0:_.media_duration),e.$set(c)},i(s){i||(M(e.$$.fragment,s),i=!0)},o(s){A(e.$$.fragment,s),i=!1},d(s){s&&(f(t),f(l)),te(e,s)}}}function Dt(a){var Se,He,Pe,Ae,Fe,Le,je,ze,Ge,Je,Ke;let e,t,l,i,o,s,m,c,_,C,k,y,p,h,ne,K,V,S,j,Q,H,B,ae,W,P,ce,oe=a[10]("volume_level")+"",se,me,U,L,z,G,u,re,de,Ce="VOL",Be,X,fe,ue,qe,$e,Me,Ue,w=((Se=a[2])==null?void 0:Se.media_artist)&&lt(a),q=((He=a[2])==null?void 0:He.media_artist)&&((Pe=a[2])==null?void 0:Pe.media_title)&&it(),D=((Ae=a[2])==null?void 0:Ae.media_title)&&nt(a),E=(((Fe=a[2])==null?void 0:Fe.media_artist)||((Le=a[2])==null?void 0:Le.media_title))&&at(a),I=((je=a[2])==null?void 0:je.media_position)&&((ze=a[2])==null?void 0:ze.media_duration)&&st(a),g=((Ge=a[2])==null?void 0:Ge.media_duration)!==void 0&&((Je=a[2])==null?void 0:Je.media_position)!==void 0&&((Ke=a[2])==null?void 0:Ke.media_position_updated_at)&&rt(a);return C=new ve({props:{icon:"ic:round-fast-rewind",height:"none"}}),h=new ve({props:{icon:"ic:round-pause",height:"none"}}),S=new ve({props:{icon:"ic:round-play-arrow",height:"none"}}),B=new ve({props:{icon:"ic:round-fast-forward",height:"none"}}),G=new ve({props:{icon:"typcn:plus",height:"none"}}),ue=new ve({props:{icon:"typcn:minus",height:"none"}}),{c(){e=b("h2"),w&&w.c(),t=N(),q&&q.c(),l=N(),D&&D.c(),i=N(),E&&E.c(),o=N(),I&&I.c(),s=N(),g&&g.c(),m=N(),c=b("div"),_=b("button"),Z(C.$$.fragment),y=N(),p=b("button"),Z(h.$$.fragment),K=N(),V=b("button"),Z(S.$$.fragment),Q=N(),H=b("button"),Z(B.$$.fragment),W=N(),P=b("br"),ce=N(),se=le(oe),me=N(),U=b("div"),L=b("button"),z=b("div"),Z(G.$$.fragment),re=N(),de=b("div"),de.textContent=Ce,Be=N(),X=b("button"),fe=b("div"),Z(ue.$$.fragment),this.h()},l(n){e=$(n,"H2",{});var r=O(e);w&&w.l(r),t=R(r),q&&q.l(r),l=R(r),D&&D.l(r),r.forEach(f),i=R(n),E&&E.l(n),o=R(n),I&&I.l(n),s=R(n),g&&g.l(n),m=R(n),c=$(n,"DIV",{class:!0});var F=O(c);_=$(F,"BUTTON",{class:!0});var ye=O(_);x(C.$$.fragment,ye),ye.forEach(f),y=R(F),p=$(F,"BUTTON",{class:!0});var Te=O(p);x(h.$$.fragment,Te),Te.forEach(f),K=R(F),V=$(F,"BUTTON",{class:!0});var we=O(V);x(S.$$.fragment,we),we.forEach(f),Q=R(F),H=$(F,"BUTTON",{class:!0});var De=O(H);x(B.$$.fragment,De),De.forEach(f),F.forEach(f),W=R(n),P=$(n,"BR",{}),ce=R(n),se=ie(n,oe),me=R(n),U=$(n,"DIV",{class:!0});var J=O(U);L=$(J,"BUTTON",{class:!0});var Ee=O(L);z=$(Ee,"DIV",{style:!0});var Ie=O(z);x(G.$$.fragment,Ie),Ie.forEach(f),Ee.forEach(f),re=R(J),de=$(J,"DIV",{"data-svelte-h":!0}),mt(de)!=="svelte-vrzeav"&&(de.textContent=Ce),Be=R(J),X=$(J,"BUTTON",{class:!0});var Ne=O(X);fe=$(Ne,"DIV",{style:!0});var Re=O(fe);x(ue.$$.fragment,Re),Re.forEach(f),Ne.forEach(f),J.forEach(f),this.h()},h(){var n,r;T(_,"class","svelte-1t1ikq6"),T(p,"class","svelte-1t1ikq6"),Y(p,"display",((n=a[6])==null?void 0:n.state)==="playing"?"block":"none"),T(V,"class","svelte-1t1ikq6"),Y(V,"display",((r=a[6])==null?void 0:r.state)!=="playing"?"block":"none"),T(H,"class","svelte-1t1ikq6"),T(c,"class","icon-container svelte-1t1ikq6"),Y(z,"scale","90%"),Y(z,"margin-bottom","-0.2rem"),T(L,"class","svelte-1t1ikq6"),Y(fe,"scale","90%"),Y(fe,"margin-bottom","-0.2rem"),T(X,"class","svelte-1t1ikq6"),T(U,"class","vol-container svelte-1t1ikq6")},m(n,r){d(n,e,r),w&&w.m(e,null),v(e,t),q&&q.m(e,null),v(e,l),D&&D.m(e,null),d(n,i,r),E&&E.m(n,r),d(n,o,r),I&&I.m(n,r),d(n,s,r),g&&g.m(n,r),d(n,m,r),d(n,c,r),v(c,_),ee(C,_,null),v(c,y),v(c,p),ee(h,p,null),v(c,K),v(c,V),ee(S,V,null),v(c,Q),v(c,H),ee(B,H,null),d(n,W,r),d(n,P,r),d(n,ce,r),d(n,se,r),d(n,me,r),d(n,U,r),v(U,L),v(L,z),ee(G,z,null),v(U,re),v(U,de),v(U,Be),v(U,X),v(X,fe),ee(ue,fe,null),$e=!0,Me||(Ue=[pe(k=ge.call(null,_,a[9])),he(_,"click",a[21]),pe(ne=ge.call(null,p,a[9])),he(p,"click",a[22]),he(V,"click",a[23]),pe(j=ge.call(null,V,a[9])),he(H,"click",a[24]),pe(ae=ge.call(null,H,a[9])),he(L,"click",a[25]),pe(u=ge.call(null,L,a[9])),pe(qe=ge.call(null,X,a[9])),he(X,"click",a[26])],Me=!0)},p(n,r){var F,ye,Te,we,De,J,Ee,Ie,Ne,Re,Qe,We,Xe;(F=n[2])!=null&&F.media_artist?w?w.p(n,r):(w=lt(n),w.c(),w.m(e,t)):w&&(w.d(1),w=null),(ye=n[2])!=null&&ye.media_artist&&((Te=n[2])!=null&&Te.media_title)?q||(q=it(),q.c(),q.m(e,l)):q&&(q.d(1),q=null),(we=n[2])!=null&&we.media_title?D?D.p(n,r):(D=nt(n),D.c(),D.m(e,null)):D&&(D.d(1),D=null),(De=n[2])!=null&&De.media_artist||(J=n[2])!=null&&J.media_title?E?E.p(n,r):(E=at(n),E.c(),E.m(o.parentNode,o)):E&&(E.d(1),E=null),(Ee=n[2])!=null&&Ee.media_position&&((Ie=n[2])!=null&&Ie.media_duration)?I?I.p(n,r):(I=st(n),I.c(),I.m(s.parentNode,s)):I&&(I.d(1),I=null),((Ne=n[2])==null?void 0:Ne.media_duration)!==void 0&&((Re=n[2])==null?void 0:Re.media_position)!==void 0&&((Qe=n[2])!=null&&Qe.media_position_updated_at)?g?(g.p(n,r),r[0]&4&&M(g,1)):(g=rt(n),g.c(),M(g,1),g.m(m.parentNode,m)):g&&(ft(),A(g,1,1,()=>{g=null}),ut()),k&&ke(k.update)&&r[0]&512&&k.update.call(null,n[9]),ne&&ke(ne.update)&&r[0]&512&&ne.update.call(null,n[9]),r[0]&64&&Y(p,"display",((We=n[6])==null?void 0:We.state)==="playing"?"block":"none"),j&&ke(j.update)&&r[0]&512&&j.update.call(null,n[9]),r[0]&64&&Y(V,"display",((Xe=n[6])==null?void 0:Xe.state)!=="playing"?"block":"none"),ae&&ke(ae.update)&&r[0]&512&&ae.update.call(null,n[9]),(!$e||r[0]&1024)&&oe!==(oe=n[10]("volume_level")+"")&&_e(se,oe),u&&ke(u.update)&&r[0]&512&&u.update.call(null,n[9]),qe&&ke(qe.update)&&r[0]&512&&qe.update.call(null,n[9])},i(n){$e||(M(g),M(C.$$.fragment,n),M(h.$$.fragment,n),M(S.$$.fragment,n),M(B.$$.fragment,n),M(G.$$.fragment,n),M(ue.$$.fragment,n),$e=!0)},o(n){A(g),A(C.$$.fragment,n),A(h.$$.fragment,n),A(S.$$.fragment,n),A(B.$$.fragment,n),A(G.$$.fragment,n),A(ue.$$.fragment,n),$e=!1},d(n){n&&(f(e),f(i),f(o),f(s),f(m),f(c),f(W),f(P),f(ce),f(se),f(me),f(U)),w&&w.d(),q&&q.d(),D&&D.d(),E&&E.d(n),I&&I.d(n),g&&g.d(n),te(C),te(h),te(S),te(B),te(G),te(ue),Me=!1,dt(Ue)}}}function Et(a){let e,t=xe(a[1],a[6])+"",l;return{c(){e=b("h1"),l=le(t),this.h()},l(i){e=$(i,"H1",{slot:!0});var o=O(e);l=ie(o,t),o.forEach(f),this.h()},h(){T(e,"slot","title")},m(i,o){d(i,e,o),v(e,l)},p(i,o){o[0]&66&&t!==(t=xe(i[1],i[6])+"")&&_e(l,t)},d(i){i&&f(e)}}}function It(a){let e,t,l=a[0]&&tt(a);return{c(){l&&l.c(),e=Ve()},l(i){l&&l.l(i),e=Ve()},m(i,o){l&&l.m(i,o),d(i,e,o),t=!0},p(i,o){i[0]?l?(l.p(i,o),o[0]&1&&M(l,1)):(l=tt(i),l.c(),M(l,1),l.m(e.parentNode,e)):l&&(ft(),A(l,1,1,()=>{l=null}),ut())},i(i){t||(M(l),t=!0)},o(i){A(l),t=!1},d(i){i&&f(e),l&&l.d(i)}}}const Nt=2500;function be(a){if(a){const e=Math.floor(a/3600),t=Math.floor(a%3600/60),l=Math.floor(a%60),i=e>0?e+":":"",o=t<10?"0"+t+":":t+":",s=l<10?"0"+l:l;return i+o+s}}function Rt(a,e,t){let l,i,o,s,m,c,_,C,k;Oe(a,kt,u=>t(30,c=u)),Oe(a,vt,u=>t(18,_=u)),Oe(a,gt,u=>t(9,C=u)),Oe(a,bt,u=>t(10,k=u));let{isOpen:y}=e,{selected:p}=e,h,ne,K=Date.now(),V=!1,S=!1,j,Q=0,H=!1,B,ae=0;Ye(()=>{i?ne=setInterval(()=>{t(13,K=Date.now())},1e3):t(13,K=Date.now())}),Ye(()=>{}),ct(()=>{clearInterval(ne)});async function W(u){if(t(8,ae=u),t(4,S=!0),clearTimeout(j),t(7,j=setTimeout(()=>{t(4,S=!1),t(5,Q=m||0)},Nt)),H)B!==u&&(B=u);else{H=!0;try{await et(c,"media_player","media_seek",{entity_id:l==null?void 0:l.entity_id,seek_position:u})}catch(re){console.error("Failed to change position:",re)}if(H=!1,B!==void 0&&B!==u){const re=B;B=void 0,W(re)}}}function P(u){et(c,"media_player",u,{entity_id:l==null?void 0:l.entity_id})}const ce=u=>{W(u.detail)},oe=u=>{t(3,V=u.detail),u.detail&&clearTimeout(j)},se=()=>{P("media_previous_track")},me=()=>{P("media_pause")},U=()=>P("media_play"),L=()=>P("media_next_track"),z=()=>P("volume_up"),G=()=>{P("volume_down")};return a.$$set=u=>{"isOpen"in u&&t(0,y=u.isOpen),"selected"in u&&t(1,p=u.selected)},a.$$.update=()=>{a.$$.dirty[0]&262146&&t(6,l=_[p==null?void 0:p.entity_id]),a.$$.dirty[0]&64&&t(2,h=l==null?void 0:l.attributes),a.$$.dirty[0]&64&&t(15,i=(l==null?void 0:l.state)==="playing"),a.$$.dirty[0]&4&&t(17,o=new Date(h==null?void 0:h.media_position_updated_at).getTime()),a.$$.dirty[0]&139264&&t(16,s=(K-o)/1e3),a.$$.dirty[0]&98308&&t(14,m=(h==null?void 0:h.media_position)+(i?s:0)),a.$$.dirty[0]&16444&&t(5,Q=!S&&!V?Math.min(m||0,(h==null?void 0:h.media_duration)||0):Q)},[y,p,h,V,S,Q,l,j,ae,C,k,W,P,K,m,i,s,o,_,ce,oe,se,me,U,L,z,G]}class Ut extends pt{constructor(e){super(),ht(this,e,Rt,It,_t,{isOpen:0,selected:1},null,[-1,-1])}}export{Ut as default};
