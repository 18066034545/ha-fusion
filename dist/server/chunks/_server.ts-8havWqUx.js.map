{"version":3,"file":"_server.ts-8havWqUx.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/_api/get_all_themes/_server.ts.js"],"sourcesContent":["import { readdir, readFile } from \"fs/promises\";\nimport { d as dev } from \"../../../../chunks/index3.js\";\nimport { j as json, e as error } from \"../../../../chunks/index.js\";\nimport yaml from \"js-yaml\";\nimport path from \"path\";\nconst GET = async ({ setHeaders }) => {\n  try {\n    const dir = dev ? \"./static/themes\" : \"./build/client/themes\";\n    const files = await readdir(dir);\n    const yamlFiles = files.filter((file) => file.endsWith(\".yaml\"));\n    const themes = await Promise.all(\n      yamlFiles.map(async (file) => {\n        const filePath = `${dir}/${file}`;\n        const data = await readFile(filePath, \"utf-8\");\n        const themeData = yaml.load(data);\n        if (path.parse(file).name !== themeData?.title) {\n          return null;\n        }\n        return {\n          file,\n          title: themeData?.title,\n          author: themeData?.author,\n          attribution: themeData?.attribution,\n          theme: themeData?.theme\n        };\n      })\n    );\n    const validate = themes.filter(Boolean);\n    setHeaders({ \"Cache-Control\": \"max-age=0\" });\n    return json(validate);\n  } catch (err) {\n    error(500, err.message);\n  }\n};\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;;;AAKK,MAAC,GAAG,GAAG,OAAO,EAAE,UAAU,EAAE,KAAK;AACtC,EAAE,IAAI;AACN,IAAI,MAAM,GAAG,GAAG,GAAG,GAAG,iBAAiB,GAAG,uBAAuB;AACjE,IAAI,MAAM,KAAK,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;AACpC,IAAI,MAAM,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AACpE,IAAI,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,GAAG;AACpC,MAAM,SAAS,CAAC,GAAG,CAAC,OAAO,IAAI,KAAK;AACpC,QAAQ,MAAM,QAAQ,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;AACzC,QAAQ,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC;AACtD,QAAQ,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;AACzC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,SAAS,EAAE,KAAK,EAAE;AACxD,UAAU,OAAO,IAAI;AACrB;AACA,QAAQ,OAAO;AACf,UAAU,IAAI;AACd,UAAU,KAAK,EAAE,SAAS,EAAE,KAAK;AACjC,UAAU,MAAM,EAAE,SAAS,EAAE,MAAM;AACnC,UAAU,WAAW,EAAE,SAAS,EAAE,WAAW;AAC7C,UAAU,KAAK,EAAE,SAAS,EAAE;AAC5B,SAAS;AACT,OAAO;AACP,KAAK;AACL,IAAI,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;AAC3C,IAAI,UAAU,CAAC,EAAE,eAAe,EAAE,WAAW,EAAE,CAAC;AAChD,IAAI,OAAO,IAAI,CAAC,QAAQ,CAAC;AACzB,GAAG,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,OAAO,CAAC;AAC3B;AACA;;;;"}