{"version":3,"file":"_server.ts-B9YKhChD.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/_api/get_translation/_server.ts.js"],"sourcesContent":["import { readFile } from \"fs/promises\";\nimport { j as json, e as error } from \"../../../../chunks/index.js\";\nimport { d as dev } from \"../../../../chunks/index3.js\";\nconst POST = async ({ request, setHeaders }) => {\n  try {\n    const body = await request.json();\n    if (!body.locale || typeof body.locale !== \"string\") {\n      throw new Error(\"Invalid locale\");\n    }\n    const dir = dev ? \"./static/translations\" : \"./build/client/translations\";\n    const [en, locale] = await Promise.all([\n      readFile(`${dir}/en.json`, \"utf8\"),\n      body.locale && body.locale !== \"en\" ? readFile(`${dir}/${body.locale}.json`, \"utf8\") : void 0\n    ]);\n    const translations = locale ? { ...JSON.parse(locale), _default: JSON.parse(en) } : JSON.parse(en);\n    setHeaders({ \"Cache-Control\": \"max-age=0\" });\n    return json(translations);\n  } catch (err) {\n    error(500, err.message);\n  }\n};\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;;AAGK,MAAC,IAAI,GAAG,OAAO,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK;AAChD,EAAE,IAAI;AACN,IAAI,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AACrC,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,QAAQ,EAAE;AACzD,MAAM,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC;AACvC;AACA,IAAI,MAAM,GAAG,GAAG,GAAG,GAAG,uBAAuB,GAAG,6BAA6B;AAC7E,IAAI,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;AAC3C,MAAM,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAE,MAAM,CAAC;AACxC,MAAM,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,KAAK,IAAI,GAAG,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC,GAAG,KAAK;AAClG,KAAK,CAAC;AACN,IAAI,MAAM,YAAY,GAAG,MAAM,GAAG,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;AACtG,IAAI,UAAU,CAAC,EAAE,eAAe,EAAE,WAAW,EAAE,CAAC;AAChD,IAAI,OAAO,IAAI,CAAC,YAAY,CAAC;AAC7B,GAAG,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,OAAO,CAAC;AAC3B;AACA;;;;"}