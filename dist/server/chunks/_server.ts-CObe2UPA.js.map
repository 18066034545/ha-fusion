{"version":3,"file":"_server.ts-CObe2UPA.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/_api/version/_server.ts.js"],"sourcesContent":["import { readFile, writeFile } from \"fs/promises\";\nimport { j as json, e as error } from \"../../../../chunks/index.js\";\nconst GET = async () => {\n  try {\n    const [packageFile, versionFile] = await Promise.all([\n      readFile(\"./package.json\", \"utf8\").catch(() => \"{}\"),\n      readFile(\"./data/version.json\", \"utf8\").catch(() => \"{}\")\n    ]);\n    const packageData = JSON.parse(packageFile);\n    const versionData = JSON.parse(versionFile);\n    return json({\n      installed: packageData?.version,\n      latest: versionData?.latest,\n      last_updated: versionData?.last_updated\n    });\n  } catch (err) {\n    error(500, err);\n  }\n};\nconst POST = async ({ request }) => {\n  try {\n    const body = await request.json();\n    const data = JSON.stringify(body, null, \"\t\") + \"\\n\";\n    await writeFile(\"./data/version.json\", data);\n    return json({ message: \"success\" });\n  } catch (err) {\n    return error(500, err);\n  }\n};\nexport {\n  GET,\n  POST\n};\n"],"names":[],"mappings":";;;AAEK,MAAC,GAAG,GAAG,YAAY;AACxB,EAAE,IAAI;AACN,IAAI,MAAM,CAAC,WAAW,EAAE,WAAW,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;AACzD,MAAM,QAAQ,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC;AAC1D,MAAM,QAAQ,CAAC,qBAAqB,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,IAAI;AAC9D,KAAK,CAAC;AACN,IAAI,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;AAC/C,IAAI,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;AAC/C,IAAI,OAAO,IAAI,CAAC;AAChB,MAAM,SAAS,EAAE,WAAW,EAAE,OAAO;AACrC,MAAM,MAAM,EAAE,WAAW,EAAE,MAAM;AACjC,MAAM,YAAY,EAAE,WAAW,EAAE;AACjC,KAAK,CAAC;AACN,GAAG,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC;AACnB;AACA;AACK,MAAC,IAAI,GAAG,OAAO,EAAE,OAAO,EAAE,KAAK;AACpC,EAAE,IAAI;AACN,IAAI,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AACrC,IAAI,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,GAAG,IAAI;AACvD,IAAI,MAAM,SAAS,CAAC,qBAAqB,EAAE,IAAI,CAAC;AAChD,IAAI,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC;AACvC,GAAG,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,OAAO,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC;AAC1B;AACA;;;;"}