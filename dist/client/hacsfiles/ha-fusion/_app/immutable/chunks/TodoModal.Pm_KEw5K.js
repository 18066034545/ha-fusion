import{e as ke,R as fe,c as x,f as Ie,I as ye,h as Ee,i as ze,k as Ne}from"./2.dCG7GHcU.js";import{a as we,h as K,e as ce,m as J,b as D,w as P,d as k,c as W,I as Me,g as T,t as X,j as C,k as B,l as Y,u as g,C as z,v as ee,o as N,x as ie,G as Te,p as Z,i as oe,r as ne,N as Ce,D as pe,n as Oe}from"./scheduler.BGjPv-1J.js";import{S as Re,i as Se,t as H,g as ue,a as Q,c as re,b as te,d as le,m as se,e as ae}from"./index.DGGgQIon.js";import{c as De,p as Be,s as $e,l as Ue,r as Pe,g as me,e as _e,B as Ve,C as Ae}from"./Loader.DbTsSYa5.js";import{I as Fe}from"./Index.CWVzh7Hi.js";import{C as He}from"./ConfigButtons.Cc1o6-ot.js";import{I as Le}from"./InputClear.DnqX4aGi.js";const{Map:je,document:qe}=ke;function he(l,t,e){const s=l.slice();return s[29]=t[e],s}function ge(l){let t,e;return t=new Fe({props:{$$slots:{title:[We],default:[Qe]},$$scope:{ctx:l}}}),{c(){te(t.$$.fragment)},l(s){le(t.$$.fragment,s)},m(s,o){se(t,s,o),e=!0},p(s,o){const u={};o[0]&2046|o[1]&4&&(u.$$scope={dirty:o,ctx:s}),t.$set(u)},i(s){e||(H(t.$$.fragment,s),e=!0)},o(s){Q(t.$$.fragment,s),e=!1},d(s){ae(t,s)}}}function Ge(l){let t,e,s,o,u;return{c(){t=T("input"),this.h()},l(a){t=C(a,"INPUT",{placeholder:!0,name:!0,class:!0,type:!0,autocomplete:!0,spellcheck:!0}),this.h()},h(){g(t,"placeholder",e=l[9]("add_item")),g(t,"name",s=l[9]("add")),g(t,"class","input"),g(t,"type","text"),g(t,"autocomplete","off"),g(t,"spellcheck","false"),z(t,"padding",l[32])},m(a,d){D(a,t,d),pe(t,l[4]),o||(u=P(t,"input",l[20]),o=!0)},p(a,d){d[0]&512&&e!==(e=a[9]("add_item"))&&g(t,"placeholder",e),d[0]&512&&s!==(s=a[9]("add"))&&g(t,"name",s),d[0]&16&&t.value!==a[4]&&pe(t,a[4]),d[1]&2&&z(t,"padding",a[32])},d(a){a&&k(t),o=!1,u()}}}function be(l){let t,e=[],s=new je,o,u,a,d,f=_e(l[2]);const _=r=>r[29].uid;for(let r=0;r<f.length;r+=1){let m=he(l,f,r),p=_(m);s.set(p,e[r]=ve(p,m))}return{c(){t=T("section");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=C(r,"SECTION",{class:!0});var m=B(t);for(let p=0;p<e.length;p+=1)e[p].l(m);m.forEach(k),this.h()},h(){g(t,"class","svelte-zxsaug")},m(r,m){D(r,t,m);for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(t,null);u=!0,a||(d=[ie(o=Ie.call(null,t,{items:l[2],...l[7]})),P(t,"consider",l[16]),P(t,"finalize",l[16])],a=!0)},p(r,m){if(m[0]&51244){f=_e(r[2]),ue();for(let p=0;p<e.length;p+=1)e[p].r();e=Ve(e,m,_,1,r,f,s,t,Ae,ve,null,he);for(let p=0;p<e.length;p+=1)e[p].a();re()}o&&oe(o.update)&&m[0]&132&&o.update.call(null,{items:r[2],...r[7]})},i(r){if(!u){for(let m=0;m<f.length;m+=1)H(e[m]);u=!0}},o(r){for(let m=0;m<e.length;m+=1)Q(e[m]);u=!1},d(r){r&&k(t);for(let m=0;m<e.length;m+=1)e[m].d();a=!1,ne(d)}}}function Ke(l){let t=(l[11].has(l[29].uid)?l[11].get(l[29].uid):l[29].summary)+"",e;return{c(){e=X(t)},l(s){e=Y(s,t)},m(s,o){D(s,e,o)},p(s,o){o[0]&4&&t!==(t=(s[11].has(s[29].uid)?s[11].get(s[29].uid):s[29].summary)+"")&&Z(e,t)},d(s){s&&k(e)}}}function Je(l){let t,e,s,o,u,a;function d(...f){return l[23](l[29],...f)}return{c(){t=T("form"),e=T("input"),this.h()},l(f){t=C(f,"FORM",{});var _=B(t);e=C(_,"INPUT",{id:!0,class:!0}),_.forEach(k),this.h()},h(){g(e,"id",s=l[29].uid),e.value=o=l[29].summary,g(e,"class","inputname svelte-zxsaug")},m(f,_){D(f,t,_),N(t,e),u||(a=[P(e,"change",d),P(e,"blur",l[24]),P(t,"submit",Ze)],u=!0)},p(f,_){l=f,_[0]&4&&s!==(s=l[29].uid)&&g(e,"id",s),_[0]&4&&o!==(o=l[29].summary)&&e.value!==o&&(e.value=o)},d(f){f&&k(t),u=!1,ne(a)}}}function ve(l,t){let e,s,o,u,a,d,f,_,r,m,p,y,O,V,w=Oe,R=`opacity ${t[3]/2}ms ease`,b,A,L;function j(...h){return t[22](t[29],...h)}function q(h,E){return h[5]===h[29].uid?Je:Ke}let F=q(t),M=F(t);function U(){return t[25](t[29])}return y=new ye({props:{icon:"mdi:drag",height:"none"}}),{key:l,first:null,c(){e=T("div"),s=T("div"),o=T("label"),u=T("input"),_=K(),r=T("span"),M.c(),m=K(),p=T("span"),te(y.$$.fragment),O=K(),this.h()},l(h){e=C(h,"DIV",{class:!0,"data-exclude-drag-modal":!0});var E=B(e);s=C(E,"DIV",{class:!0});var G=B(s);o=C(G,"LABEL",{for:!0,class:!0});var I=B(o);u=C(I,"INPUT",{id:!0,type:!0,class:!0}),I.forEach(k),_=J(G),r=C(G,"SPAN",{class:!0,role:!0,tabindex:!0});var n=B(r);M.l(n),n.forEach(k),G.forEach(k),m=J(E),p=C(E,"SPAN",{class:!0});var c=B(p);le(y.$$.fragment,c),c.forEach(k),O=J(E),E.forEach(k),this.h()},h(){g(u,"id",a=t[29].uid),g(u,"type","checkbox"),u.checked=d=t[29].status==="completed",g(u,"class","input-checkbox svelte-zxsaug"),g(o,"for",f=t[29].uid),g(o,"class","hitbox svelte-zxsaug"),g(r,"class","item-name svelte-zxsaug"),g(r,"role","button"),g(r,"tabindex","0"),g(s,"class","label-container svelte-zxsaug"),g(p,"class","icon svelte-zxsaug"),g(e,"class","todo-item svelte-zxsaug"),g(e,"data-exclude-drag-modal",""),z(e,"opacity",t[29].status==="completed"?"0.3":"1"),z(e,"transition",R),this.first=e},m(h,E){D(h,e,E),N(e,s),N(s,o),N(o,u),N(s,_),N(s,r),M.m(r,null),N(e,m),N(e,p),se(y,p,null),N(e,O),b=!0,A||(L=[P(u,"input",j),P(r,"click",U),P(r,"keydown",t[19])],A=!0)},p(h,E){t=h,(!b||E[0]&4&&a!==(a=t[29].uid))&&g(u,"id",a),(!b||E[0]&4&&d!==(d=t[29].status==="completed"))&&(u.checked=d),(!b||E[0]&4&&f!==(f=t[29].uid))&&g(o,"for",f),F===(F=q(t))&&M?M.p(t,E):(M.d(1),M=F(t),M&&(M.c(),M.m(r,null))),E[0]&4&&z(e,"opacity",t[29].status==="completed"?"0.3":"1"),E[0]&8&&R!==(R=`opacity ${t[3]/2}ms ease`)&&z(e,"transition",R)},r(){V=e.getBoundingClientRect()},f(){Ee(e),w()},a(){var h;w(),w=ze(e,V,Ne,{duration:(h=t[7])==null?void 0:h.flipDurationMs})},i(h){b||(H(y.$$.fragment,h),b=!0)},o(h){Q(y.$$.fragment,h),b=!1},d(h){h&&k(e),M.d(),ae(y),A=!1,ne(L)}}}function Qe(l){let t,e=l[9]("todo_list")+"",s,o,u,a,d,f,_,r=l[9]("add")+"",m,p,y,O=`opacity ${l[3]}ms ease`,V,w,R,b,A=l[9]("clear_items")+"",L,j,q,F=`opacity ${l[3]}ms ease, background-color ${l[3]}ms ease`,M,U,h,E,G;a=new Le({props:{condition:l[4],$$slots:{default:[Ge,({padding:n})=>({32:n}),({padding:n})=>[0,n?2:0]]},$$scope:{ctx:l}}}),a.$on("clear",l[21]);let I=l[2]&&be(l);return U=new He({props:{sel:l[1]}}),{c(){t=T("h2"),s=X(e),o=K(),u=T("div"),te(a.$$.fragment),d=K(),f=T("form"),_=T("button"),m=X(r),V=K(),I&&I.c(),w=K(),R=T("div"),b=T("button"),L=X(A),M=K(),te(U.$$.fragment),this.h()},l(n){t=C(n,"H2",{});var c=B(t);s=Y(c,e),c.forEach(k),o=J(n),u=C(n,"DIV",{class:!0});var i=B(u);le(a.$$.fragment,i),d=J(i),f=C(i,"FORM",{});var v=B(f);_=C(v,"BUTTON",{class:!0,type:!0});var $=B(_);m=Y($,r),$.forEach(k),v.forEach(k),i.forEach(k),V=J(n),I&&I.l(n),w=J(n),R=C(n,"DIV",{class:!0});var S=B(R);b=C(S,"BUTTON",{class:!0});var de=B(b);L=Y(de,A),de.forEach(k),M=J(S),le(U.$$.fragment,S),S.forEach(k),this.h()},h(){g(_,"class","action done submit svelte-zxsaug"),g(_,"type","submit"),_.disabled=p=l[4]==="",z(_,"cursor",l[4]?"pointer":"unset"),z(_,"opacity",l[4]===""?"0.5":"1"),z(_,"transition",O),g(u,"class","h-container svelte-zxsaug"),g(b,"class","action svelte-zxsaug"),b.disabled=j=!l[8],ee(b,"remove",l[8]),ee(b,"done",!l[8]),z(b,"opacity",l[8]?"1":"0.3"),z(b,"cursor",l[8]?"pointer":"unset"),z(b,"transition",F),g(R,"class","add-config-button svelte-zxsaug")},m(n,c){D(n,t,c),N(t,s),D(n,o,c),D(n,u,c),se(a,u,null),N(u,d),N(u,f),N(f,_),N(_,m),D(n,V,c),I&&I.m(n,c),D(n,w,c),D(n,R,c),N(R,b),N(b,L),N(R,M),se(U,R,null),h=!0,E||(G=[ie(y=fe.call(null,_,l[10])),P(f,"submit",Te(l[12])),P(b,"click",l[13]),ie(q=fe.call(null,b,l[10]))],E=!0)},p(n,c){(!h||c[0]&512)&&e!==(e=n[9]("todo_list")+"")&&Z(s,e);const i={};c[0]&16&&(i.condition=n[4]),c[0]&528|c[1]&6&&(i.$$scope={dirty:c,ctx:n}),a.$set(i),(!h||c[0]&512)&&r!==(r=n[9]("add")+"")&&Z(m,r),(!h||c[0]&16&&p!==(p=n[4]===""))&&(_.disabled=p),y&&oe(y.update)&&c[0]&1024&&y.update.call(null,n[10]),c[0]&16&&z(_,"cursor",n[4]?"pointer":"unset"),c[0]&16&&z(_,"opacity",n[4]===""?"0.5":"1"),c[0]&8&&O!==(O=`opacity ${n[3]}ms ease`)&&z(_,"transition",O),n[2]?I?(I.p(n,c),c[0]&4&&H(I,1)):(I=be(n),I.c(),H(I,1),I.m(w.parentNode,w)):I&&(ue(),Q(I,1,1,()=>{I=null}),re()),(!h||c[0]&512)&&A!==(A=n[9]("clear_items")+"")&&Z(L,A),(!h||c[0]&256&&j!==(j=!n[8]))&&(b.disabled=j),q&&oe(q.update)&&c[0]&1024&&q.update.call(null,n[10]),(!h||c[0]&256)&&ee(b,"remove",n[8]),(!h||c[0]&256)&&ee(b,"done",!n[8]),c[0]&256&&z(b,"opacity",n[8]?"1":"0.3"),c[0]&256&&z(b,"cursor",n[8]?"pointer":"unset"),c[0]&8&&F!==(F=`opacity ${n[3]}ms ease, background-color ${n[3]}ms ease`)&&z(b,"transition",F);const v={};c[0]&2&&(v.sel=n[1]),U.$set(v)},i(n){h||(H(a.$$.fragment,n),H(I),H(U.$$.fragment,n),h=!0)},o(n){Q(a.$$.fragment,n),Q(I),Q(U.$$.fragment,n),h=!1},d(n){n&&(k(t),k(o),k(u),k(V),k(w),k(R)),ae(a),I&&I.d(n),ae(U),E=!1,ne(G)}}}function We(l){let t,e=me(l[1],l[6])+"",s;return{c(){t=T("h1"),s=X(e),this.h()},l(o){t=C(o,"H1",{slot:!0});var u=B(t);s=Y(u,e),u.forEach(k),this.h()},h(){g(t,"slot","title")},m(o,u){D(o,t,u),N(t,s)},p(o,u){u[0]&66&&e!==(e=me(o[1],o[6])+"")&&Z(s,e)},d(o){o&&k(t)}}}function Xe(l){let t,e,s,o,u,a=l[0]&&ge(l);return{c(){t=K(),a&&a.c(),e=ce()},l(d){t=J(d),a&&a.l(d),e=ce()},m(d,f){D(d,t,f),a&&a.m(d,f),D(d,e,f),s=!0,o||(u=P(qe,"keydown",l[17]),o=!0)},p(d,f){d[0]?a?(a.p(d,f),f[0]&1&&H(a,1)):(a=ge(d),a.c(),H(a,1),a.m(e.parentNode,e)):a&&(ue(),Q(a,1,1,()=>{a=null}),re())},i(d){s||(H(a),s=!0)},o(d){Q(a),s=!1},d(d){d&&(k(t),k(e)),a&&a.d(d),o=!1,u()}}}function Ye(l){if(l)return l.some(t=>t.status==="completed")}function Ze(){if(document){const l=document==null?void 0:document.activeElement;l==null||l.blur()}}function xe(l,t,e){let s,o,u,a,d,f,_,r;W(l,De,i=>e(26,a=i)),W(l,Be,i=>e(3,d=i)),W(l,$e,i=>e(18,f=i)),W(l,Ue,i=>e(9,_=i)),W(l,Pe,i=>e(10,r=i));let{isOpen:m}=t,{sel:p}=t,y,O="",V,w=new Map;function R(){y.sort((i,v)=>(i.status==="completed"?1:0)-(v.status==="completed"?1:0))}function b(){O!==""&&(x(a,"todo","add_item",{entity_id:s==null?void 0:s.entity_id,item:O}),e(4,O=""),w.clear())}function A(){x(a,"todo","remove_completed_items",{entity_id:s==null?void 0:s.entity_id}),w.clear()}Me(()=>{a==null||a.subscribeMessage(i=>{i&&(e(2,y=i.items.map(v=>({...v,id:v.uid}))),R())},{type:"todo/item/subscribe",entity_id:s==null?void 0:s.entity_id})});function L(i,v){var S;const $=(S=i==null?void 0:i.target)==null?void 0:S.value;$&&(w.set(v,$),x(a,"todo","update_item",{entity_id:s==null?void 0:s.entity_id,item:v,rename:$}))}function j(i,v){const $=i==null?void 0:i.target;$&&(x(a,"todo","update_item",{entity_id:s==null?void 0:s.entity_id,item:v,status:$!=null&&$.checked?"completed":"needs_action"}),w.clear())}function q(i){if(e(2,y=i.detail.items.map(S=>({...S,uid:S.id}))),(i==null?void 0:i.type)!=="finalize")return;const v=i.detail.info.id,$=y.findIndex(S=>S.uid===v)-1>=0?y[y.findIndex(S=>S.uid===v)-1].uid:void 0;F(v,$)}function F(i,v){a==null||a.sendMessage({type:"todo/item/move",entity_id:s==null?void 0:s.entity_id,uid:i,previous_uid:v}),w.clear()}function M(i){i.key==="Enter"&&b()}function U(i){Ce.call(this,l,i)}function h(){O=this.value,e(4,O)}const E=()=>{e(4,O="")},G=(i,v)=>j(v,i.uid),I=(i,v)=>L(v,i.uid),n=()=>{e(5,V=void 0)},c=async i=>{e(5,V=i.uid);const v=document.getElementById(i.uid);v&&v.focus()};return l.$$set=i=>{"isOpen"in i&&e(0,m=i.isOpen),"sel"in i&&e(1,p=i.sel)},l.$$.update=()=>{l.$$.dirty[0]&262146&&e(6,s=f[p==null?void 0:p.entity_id]),l.$$.dirty[0]&4&&e(8,o=Ye(y)),l.$$.dirty[0]&8&&e(7,u={flipDurationMs:d,dropTargetStyle:{},zoneTabIndex:-1})},[m,p,y,d,O,V,s,u,o,_,r,w,b,A,L,j,q,M,f,U,h,E,G,I,n,c]}class ot extends Re{constructor(t){super(),Se(this,t,xe,Xe,we,{isOpen:0,sel:1},null,[-1,-1])}}export{ot as default};
