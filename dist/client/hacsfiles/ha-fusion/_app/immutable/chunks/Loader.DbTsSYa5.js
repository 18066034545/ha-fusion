import{ab as X,ac as G,a1 as C,X as K,r as P,a0 as Q,ad as U,z as v,a as Y,e as A,b as W,n as E,d as z,c as Z,I as N,g as tt,j as et,F as st,u as at,J as nt}from"./scheduler.BGjPv-1J.js";import{g as ot,a as J,c as ct,t as S,S as rt,i as it,h as lt}from"./index.DGGgQIon.js";import{w as c,d as j,r as x}from"./index.DqLi_Cxs.js";function $t(e,t){const s=t.token={};function a(n,o,r,l){if(t.token!==s)return;t.resolved=l;let i=t.ctx;r!==void 0&&(i=i.slice(),i[r]=l);const u=n&&(t.current=n)(i);let p=!1;t.block&&(t.blocks?t.blocks.forEach((_,d)=>{d!==o&&_&&(ot(),J(_,1,1,()=>{t.blocks[d]===_&&(t.blocks[d]=null)}),ct())}):t.block.d(1),u.c(),S(u,1),u.m(t.mount(),t.anchor),p=!0),t.block=u,t.blocks&&(t.blocks[o]=u),p&&K()}if(X(e)){const n=G();if(e.then(o=>{C(n),a(t.then,1,t.value,o),C(null)},o=>{if(C(n),a(t.catch,2,t.error,o),C(null),!t.hasCatch)throw o}),t.current!==t.pending)return a(t.pending,0),!0}else{if(t.current!==t.then)return a(t.then,1,t.value,e),!0;t.resolved=e}}function St(e,t,s){const a=t.slice(),{resolved:n}=e;e.current===e.then&&(a[e.value]=n),e.current===e.catch&&(a[e.error]=n),e.block.p(a,s)}function xt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Mt(e,t){e.d(1),t.delete(e.key)}function dt(e,t){J(e,1,1,()=>{t.delete(e.key)})}function Ct(e,t){e.f(),dt(e,t)}function Dt(e,t,s,a,n,o,r,l,i,u,p,_){let d=e.length,g=o.length,m=d;const y={};for(;m--;)y[e[m].key]=m;const k=[],h=new Map,T=new Map,O=[];for(m=g;m--;){const f=_(n,o,m),b=s(f);let w=r.get(b);w?O.push(()=>w.p(f,t)):(w=u(b,f),w.c()),h.set(b,k[m]=w),b in y&&T.set(b,Math.abs(m-y[b]))}const B=new Set,V=new Set;function I(f){S(f,1),f.m(l,p),r.set(f.key,f),p=f.first,g--}for(;d&&g;){const f=k[g-1],b=e[d-1],w=f.key,M=b.key;f===b?(p=f.first,d--,g--):h.has(M)?!r.has(w)||B.has(w)?I(f):V.has(M)?d--:T.get(w)>T.get(M)?(V.add(w),I(f)):(B.add(M),d--):(i(b,r),d--)}for(;d--;){const f=e[d];h.has(f.key)||i(f,r)}for(;g;)I(k[g-1]);return P(O),k}function Ft(e,t){const s={},a={},n={$$scope:1};let o=e.length;for(;o--;){const r=e[o],l=t[o];if(l){for(const i in r)i in l||(a[i]=1);for(const i in l)n[i]||(s[i]=l[i],n[i]=1);e[o]=l}else for(const i in r)n[i]=1}for(const r in a)r in s||(s[r]=void 0);return s}function Tt(e){return typeof e=="object"&&e!==null?e:{}}function It(e,t,s){var a;return s!=null&&s.type?e[t]=s.detail||((a=s.target)==null?void 0:a.value):s!==void 0?e[t]=s:delete e[t],e}function ut(e){var t;return(t=e==null?void 0:e.split("."))==null?void 0:t[0]}function ft(e,t,s=void 0){var n,o,r;const a=(e==null?void 0:e.name)||((n=t==null?void 0:t.attributes)==null?void 0:n.friendly_name)||((r=(o=t==null?void 0:t.entity_id)==null?void 0:o.split("."))==null?void 0:r[1]);return!(e!=null&&e.name)&&s&&(a!=null&&a.startsWith(s+" "))?a==null?void 0:a.substring((s==null?void 0:s.length)+1):a}function jt(e){const t=ut(e==null?void 0:e.entity_id),s=e==null?void 0:e.state;if(!t||!s)return;let a;switch(t){case"automation":case"button":case"cover":case"fan":case"humidifier":case"input_boolean":case"light":case"media_player":case"script":case"siren":case"switch":a="toggle";break;case"input_button":a="press";break;case"lock":a=s==="locked"?"unlock":"lock";break;case"remote":return"homeassistant.toggle";case"scene":a="turn_on";break;case"timer":a=s==="active"?"cancel":"start";break;case"vacuum":a=s==="cleaning"?"pause":"start";break}if(a)return`${t}.${a}`}function Lt(e){const t=new Set;for(const a of e.sidebar)t.add(a.id);for(const a of e.views)if(t.add(a.id),a.sections){for(const n of a.sections)if(t.add(n.id),n.items)for(const o of n.items)t.add(o.id)}let s;for(;!s||t.has(s);)s=Math.floor(Math.random()*1e13-1e12)+1e12;return s}function Ot(e){return/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(e)}function Bt(e,t){const s=new Date(e);isNaN(s.getTime())&&console.error("Invalid timestamp");const a=new Intl.RelativeTimeFormat(t,{numeric:"auto"});let n;const o=[["second",60],["minute",60],["hour",24],["day",30],["month",12],["year",1/0]],r=new Date,l=(s.getTime()-r.getTime())/1e3;let i=Math.abs(l);for(n=0;n<o.length&&!(i<o[n][1]);n++)i/=o[n][1];return a.format(Math.round(i)*(l<0?-1:1),o[n][0])}function Vt(e,t){return e?Object.entries(t).reduce((s,[a,n])=>(typeof n=="number"&&(s[a]=(e&n)!==0),s),{}):{}}const Ut=c(typeof localStorage<"u"&&localStorage.getItem("ha-fusion-interface")||"template"),At=c(),Ht=c(),q=c(),Wt=c(),Et=c(),zt=c(),Jt=c(),qt=c(),Rt=x(["active","auto","cool","dry","fan_only","heat","heat_cool","heating","home","on","open","playing","unlocking","unlocked","cleaning","returning","eco","electric","performance","high_demand","heat_pump","gas"]),Xt=x({cooling:"cool",drying:"dry",fan:"fan_only",preheating:"heat",heating:"heat",idle:"off",off:"off"}),Gt=c(),Kt=c(!1),Pt=c({}),Qt=c(!1),Yt=c(!1),Zt=c(!1),Nt=c(!1),pt=c(190),te=x(61.35),ht=c({}),ee=c(),se=j(ht,e=>t=>{var s;return e[t]||((s=e._default)==null?void 0:s[t])||t}),ae=c(),ne=c(!1),oe=c(!0),ce=c(!1),re=c({}),ie=c({}),le=c({}),de=c({}),ue=c({graph:void 0,sensor:void 0,timer:void 0,bar:void 0,radial:void 0,camera:void 0,history:void 0}),fe=c(),pe=c(),he=c([]),me=c(0),ge=c(()=>{}),_e=x(new Date,function(t){const s=setInterval(()=>{t(new Date)},1e3);return t(new Date),function(){clearInterval(s)}}),be=x({color:"rgba(255, 255, 255, 0.15)",opacity:.5,spreadingDuration:"300ms",spreadingTimingFunction:"ease-in-out",clearingDuration:"350ms",clearingTimingFunction:"ease-in-out"}),we=c(),ve=c(),ye=c(!1),ke=c(!1),$e=j(q,e=>Object.keys(e)),Se=c(),xe=j(q,e=>t=>{var s,a,n;return(n=(a=(s=Object.keys(e))==null?void 0:s.filter(o=>t.length>0?o.startsWith(`${t}.`):!0))==null?void 0:a.sort())==null?void 0:n.map(o=>{const r=ft(void 0,e==null?void 0:e[o]);return{id:o,label:r??o,hint:r===o?void 0:o}})}),Me=c(),Ce=c({}),De=c({}),Fe=c({children:[],selectedShapes:[],mode:"default",undoStack:[],redoStack:[]});function L(e){const t=e-1;return t*t*t+1}function Te(e){return e===1?e:1-Math.pow(2,-10*e)}function mt(e,{delay:t=0,duration:s=400,easing:a=Q}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:a,css:o=>`opacity: ${o*n}`}}function Ie(e,{delay:t=0,duration:s=400,easing:a=L,x:n=0,y:o=0,opacity:r=0}={}){const l=getComputedStyle(e),i=+l.opacity,u=l.transform==="none"?"":l.transform,p=i*(1-r),[_,d]=U(n),[g,m]=U(o);return{delay:t,duration:s,easing:a,css:(y,k)=>`
			transform: ${u} translate(${(1-y)*_}${d}, ${(1-y)*g}${m});
			opacity: ${i-p*k}`}}function je(e,{delay:t=0,duration:s=400,easing:a=L,axis:n="y"}={}){const o=getComputedStyle(e),r=+o.opacity,l=n==="y"?"height":"width",i=parseFloat(o[l]),u=n==="y"?["top","bottom"]:["left","right"],p=u.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),_=parseFloat(o[`padding${p[0]}`]),d=parseFloat(o[`padding${p[1]}`]),g=parseFloat(o[`margin${p[0]}`]),m=parseFloat(o[`margin${p[1]}`]),y=parseFloat(o[`border${p[0]}Width`]),k=parseFloat(o[`border${p[1]}Width`]);return{delay:t,duration:s,easing:a,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*r};${l}: ${h*i}px;padding-${u[0]}: ${h*_}px;padding-${u[1]}: ${h*d}px;margin-${u[0]}: ${h*g}px;margin-${u[1]}: ${h*m}px;border-${u[0]}-width: ${h*y}px;border-${u[1]}-width: ${h*k}px;`}}function Le(e,{delay:t=0,duration:s=400,easing:a=L,start:n=0,opacity:o=0}={}){const r=getComputedStyle(e),l=+r.opacity,i=r.transform==="none"?"":r.transform,u=1-n,p=l*(1-o);return{delay:t,duration:s,easing:a,css:(_,d)=>`
			transform: ${i} scale(${1-u*d});
			opacity: ${l-p*d}
		`}}const D=c(!1),F=c(null),$=c([]),R=c(null);function Oe(){var s,a;const e=v($).length,t=v($)[e-1];return(s=t==null?void 0:t.callbacks)!=null&&s.onBeforeClose&&((a=t==null?void 0:t.callbacks)==null?void 0:a.onBeforeClose())===!1?!1:($.set([]),!0)}function gt(e=1){var a,n;const t=v($).length,s=v($)[t-1];return v(F)||(a=s==null?void 0:s.callbacks)!=null&&a.onBeforeClose&&((n=s==null?void 0:s.callbacks)==null?void 0:n.onBeforeClose())===!1?!1:(v(D)&&t>0&&F.set(!0),D.set(!1),R.set("pop"),_t(e),!0)}function Be(){return gt(1)}function Ve(e,t,s){v(F)||(R.set("push"),v(D)&&v($).length&&F.set(!0),D.set(!1),$.update(a=>[...a,{component:e,props:t}]))}function _t(e=1){$.update(t=>t.slice(0,Math.max(0,t.length-e)))}function H(e){let t,s='<svg viewBox="0 0 50 50" class="svelte-1254tw9"><circle cx="25" cy="25" r="20" class="svelte-1254tw9"></circle></svg>',a;return{c(){t=tt("div"),t.innerHTML=s,this.h()},l(n){t=et(n,"DIV",{class:!0,"data-svelte-h":!0}),st(t)!=="svelte-10jbmr6"&&(t.innerHTML=s),this.h()},h(){at(t,"class","svelte-1254tw9")},m(n,o){W(n,t,o)},p(n,o){e=n},i(n){n&&(a||nt(()=>{a=lt(t,mt,{duration:e[1],delay:e[1]}),a.start()}))},o:E,d(n){n&&z(t)}}}function bt(e){let t,s=e[0]&&H(e);return{c(){s&&s.c(),t=A()},l(a){s&&s.l(a),t=A()},m(a,n){s&&s.m(a,n),W(a,t,n)},p(a,[n]){a[0]?s?n&1&&S(s,1):(s=H(a),s.c(),S(s,1),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i(a){S(s)},o:E,d(a){a&&z(t),s&&s.d(a)}}}function wt(e,t,s){let a;Z(e,pt,o=>s(1,a=o));let n=!1;return N(()=>{s(0,n=!0)}),[n,a]}class Ue extends rt{constructor(t){super(),it(this,t,wt,bt,Y,{})}}export{Fe as $,L as A,Dt as B,Ct as C,Le as D,mt as E,$ as F,re as G,Ht as H,ue as I,Ft as J,Tt as K,Wt as L,Se as M,$e as N,Oe as O,ie as P,dt as Q,F as R,D as S,$t as T,St as U,Te as V,Ue as W,Ie as X,ye as Y,ke as Z,Lt as _,ut as a,De as a0,we as a1,ve as a2,Et as a3,Me as a4,Ce as a5,Kt as a6,Gt as a7,Ut as a8,ae as a9,Rt as aa,Xt as ab,te as ac,pe as ad,fe as ae,Nt as af,Qt as ag,ht as ah,qt as ai,Yt as aj,Pt as ak,ne as al,ce as am,oe as an,le as ao,Mt as ap,Vt as b,At as c,ee as d,xt as e,Zt as f,ft as g,ge as h,Jt as i,xe as j,me as k,se as l,he as m,Ot as n,zt as o,pt as p,Be as q,be as r,q as s,de as t,It as u,jt as v,Ve as w,_e as x,je as y,Bt as z};
