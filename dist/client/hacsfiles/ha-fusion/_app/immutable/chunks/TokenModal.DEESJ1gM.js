import{a as re,e as ee,b as M,d as c,c as K,g as d,h as q,t as g,j as h,k as w,F as te,m as A,l as k,u as m,C as ae,o as r,D as se,w as oe,G as ie,p as B,r as ue,H as fe}from"./scheduler.BGjPv-1J.js";import{S as ce,i as pe,t as D,g as _e,a as Q,c as me,b as de,d as he,m as ve,e as be}from"./index.DGGgQIon.js";import{o as ne,l as ge,p as ke,q as ye}from"./Loader.DbTsSYa5.js";import{I as we}from"./Index.CWVzh7Hi.js";import{b as Oe}from"./paths.BK9v0FUF.js";function le(n){let t,s;return t=new we({props:{$$slots:{title:[Te],default:[Ce]},$$scope:{ctx:n}}}),{c(){de(t.$$.fragment)},l(e){he(t.$$.fragment,e)},m(e,a){ve(t,e,a),s=!0},p(e,a){const o={};a&158&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(e){s||(D(t.$$.fragment,e),s=!0)},o(e){Q(t.$$.fragment,e),s=!1},d(e){be(t,e)}}}function Ce(n){var Y;let t,s,e=`A <b>long-lived access token</b> is required for authentication when using both Ingress and the
				Home Assistant Companion app simultaneously.`,a,o,O,u,y=((Y=n[2])==null?void 0:Y.hassUrl)+"",C,i,z,L,T,W="long-lived access token",G,F,p,H,U=n[3]("token")+"",N,J,v,R,_,I=n[3]("save")+"",P,S,j=`opacity ${n[4]}ms ease`,V,X;return{c(){t=d("div"),s=d("p"),s.innerHTML=e,a=q(),o=d("p"),O=g("Open your user profile, "),u=d("a"),C=g(y),i=g("/profile/security"),L=g(`\r
				to create and copy a new `),T=d("b"),T.textContent=W,G=g("."),F=q(),p=d("form"),H=d("h2"),N=g(U),J=q(),v=d("input"),R=q(),_=d("button"),P=g(I),this.h()},l(l){t=h(l,"DIV",{"data-exclude-drag-modal":!0,class:!0});var f=w(t);s=h(f,"P",{"data-svelte-h":!0}),te(s)!=="svelte-17jh2z1"&&(s.innerHTML=e),a=A(f),o=h(f,"P",{});var b=w(o);O=k(b,"Open your user profile, "),u=h(b,"A",{href:!0,target:!0,class:!0});var E=w(u);C=k(E,y),i=k(E,"/profile/security"),E.forEach(c),L=k(b,`\r
				to create and copy a new `),T=h(b,"B",{"data-svelte-h":!0}),te(T)!=="svelte-3617aw"&&(T.textContent=W),G=k(b,"."),b.forEach(c),f.forEach(c),F=A(l),p=h(l,"FORM",{});var $=w(p);H=h($,"H2",{});var Z=w(H);N=k(Z,U),Z.forEach(c),J=A($),v=h($,"INPUT",{class:!0,type:!0}),R=A($),_=h($,"BUTTON",{class:!0,type:!0});var x=w(_);P=k(x,I),x.forEach(c),$.forEach(c),this.h()},h(){var l;m(u,"href",z=((l=n[2])==null?void 0:l.hassUrl)+"/profile/security"),m(u,"target","_blank"),m(u,"class","svelte-kewexz"),m(t,"data-exclude-drag-modal",""),m(t,"class","svelte-kewexz"),m(v,"class","input"),m(v,"type","password"),m(_,"class","done action svelte-kewexz"),m(_,"type","submit"),_.disabled=S=n[1]==="",ae(_,"transition",j)},m(l,f){M(l,t,f),r(t,s),r(t,a),r(t,o),r(o,O),r(o,u),r(u,C),r(u,i),r(o,L),r(o,T),r(o,G),M(l,F,f),M(l,p,f),r(p,H),r(H,N),r(p,J),r(p,v),se(v,n[1]),r(p,R),r(p,_),r(_,P),V||(X=[oe(v,"input",n[6]),oe(p,"submit",ie(n[5]))],V=!0)},p(l,f){var b,E;f&4&&y!==(y=((b=l[2])==null?void 0:b.hassUrl)+"")&&B(C,y),f&4&&z!==(z=((E=l[2])==null?void 0:E.hassUrl)+"/profile/security")&&m(u,"href",z),f&8&&U!==(U=l[3]("token")+"")&&B(N,U),f&2&&v.value!==l[1]&&se(v,l[1]),f&8&&I!==(I=l[3]("save")+"")&&B(P,I),f&2&&S!==(S=l[1]==="")&&(_.disabled=S),f&16&&j!==(j=`opacity ${l[4]}ms ease`)&&ae(_,"transition",j)},d(l){l&&(c(t),c(F),c(p)),V=!1,ue(X)}}}function Te(n){let t,s=n[3]("login")+"",e;return{c(){t=d("h1"),e=g(s),this.h()},l(a){t=h(a,"H1",{slot:!0});var o=w(t);e=k(o,s),o.forEach(c),this.h()},h(){m(t,"slot","title")},m(a,o){M(a,t,o),r(t,e)},p(a,o){o&8&&s!==(s=a[3]("login")+"")&&B(e,s)},d(a){a&&c(t)}}}function Ee(n){let t,s,e=n[0]&&le(n);return{c(){e&&e.c(),t=ee()},l(a){e&&e.l(a),t=ee()},m(a,o){e&&e.m(a,o),M(a,t,o),s=!0},p(a,[o]){a[0]?e?(e.p(a,o),o&1&&D(e,1)):(e=le(a),e.c(),D(e,1),e.m(t.parentNode,t)):e&&(_e(),Q(e,1,1,()=>{e=null}),me())},i(a){s||(D(e),s=!0)},o(a){Q(e),s=!1},d(a){a&&c(t),e&&e.d(a)}}}function $e(n,t,s){let e,a,o;K(n,ne,i=>s(2,e=i)),K(n,ge,i=>s(3,a=i)),K(n,ke,i=>s(4,o=i));let{isOpen:O}=t,u="";async function y(){if(u){fe(ne,e.token=u,e);try{const i=await fetch(`${Oe}/_api/save_config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});i.ok?ye():console.error("Failed to save configuration.",i)}catch(i){console.error("Failed to save configuration.",i)}}}function C(){u=this.value,s(1,u)}return n.$$set=i=>{"isOpen"in i&&s(0,O=i.isOpen)},[O,u,e,a,o,y,C]}class Fe extends ce{constructor(t){super(),pe(this,t,$e,Ee,re,{isOpen:0})}}export{Fe as default};
