import{a as x,O as L,g as j,h as N,j as S,k as V,d as T,m as U,u as k,C as v,v as G,b as $,o as D,w as M,x as J,P as Q,Q as W,R as X,i as ee,J as te,r as oe,c as Y,I as ne,A as se,f as re}from"./scheduler.BGjPv-1J.js";import{S as le,i as ae,b as ie,d as ue,m as ce,t as K,h as fe,a as P,k as de,e as me}from"./index.DGGgQIon.js";import{I as pe,R as _e,e as ge}from"./2.dCG7GHcU.js";import{V as he,X as be,D as ye,Y as ke,Z as we,F as Ie,p as Ee,r as Te,q as R}from"./Loader.DbTsSYa5.js";function ve(e){var l;function s(){return Array.from(e.querySelectorAll('button:not([tabindex="-1"]), [href], input, select, textarea')).map(r=>r)}function t(r){if(r.key!=="Tab")return;const d=document.activeElement,g=s(),i=g.at(0),_=g.at(-1);r.shiftKey&&d===i&&(_==null||_.focus(),r.preventDefault()),!r.shiftKey&&d===_&&(i==null||i.focus(),r.preventDefault())}return(l=s()[0])==null||l.focus(),e.addEventListener("keydown",t),{destroy(){e.removeEventListener("keydown",t)}}}const{window:A}=ge,De=e=>({}),Z=e=>({});function Ce(e){let s,t,l,r,d,g,i,_,I,y,E=`translateY(${e[5]}px)`,o,u,c,h,b;const C=e[15].title,m=L(C,e,e[14],Z);_=new pe({props:{icon:"mingcute:close-fill",height:"none"}});const w=e[15].default,p=L(w,e,e[14],null);return{c(){s=j("div"),t=j("div"),l=j("div"),r=j("div"),d=j("h1"),m&&m.c(),g=N(),i=j("button"),ie(_.$$.fragment),y=N(),p&&p.c(),this.h()},l(a){s=S(a,"DIV",{role:!0,class:!0});var f=V(s);t=S(f,"DIV",{id:!0,class:!0});var q=V(t);l=S(q,"DIV",{class:!0});var F=V(l);r=S(F,"DIV",{class:!0});var O=V(r);d=S(O,"H1",{});var z=V(d);m&&m.l(z),z.forEach(T),g=U(O),i=S(O,"BUTTON",{"aria-label":!0,tabindex:!0,class:!0});var B=V(i);ue(_.$$.fragment,B),B.forEach(T),O.forEach(T),y=U(F),p&&p.l(F),F.forEach(T),q.forEach(T),f.forEach(T),this.h()},h(){k(i,"aria-label","close"),k(i,"tabindex","-1"),k(i,"class","svelte-1j4iul"),v(i,"outline","none"),k(r,"class","header svelte-1j4iul"),k(l,"class","contents svelte-1j4iul"),G(l,"warning",!e[0]),v(l,"width",e[1]==="large"?"80vw":"40rem"),k(t,"id","modal"),k(t,"class","svelte-1j4iul"),v(t,"transform",E),v(t,"transition",e[3]?"none":`transform ${e[4]}ms ease-out`),k(s,"role","dialog"),k(s,"class","svelte-1j4iul")},m(a,f){$(a,s,f),D(s,t),D(t,l),D(l,r),D(r,d),m&&m.m(d,null),D(r,g),D(r,i),ce(_,i,null),D(l,y),p&&p.m(l,null),e[17](l),c=!0,h||(b=[M(A,"pointerup",e[9]),M(A,"pointermove",e[8]),M(A,"keydown",e[10]),M(i,"click",e[16]),J(I=_e.call(null,i,e[6])),M(t,"pointerdown",e[7]),J(ve.call(null,t))],h=!0)},p(a,[f]){e=a,m&&m.p&&(!c||f&16384)&&Q(m,C,e,e[14],c?X(C,e[14],f,De):W(e[14]),Z),I&&ee(I.update)&&f&64&&I.update.call(null,e[6]),p&&p.p&&(!c||f&16384)&&Q(p,w,e,e[14],c?X(w,e[14],f,null):W(e[14]),null),(!c||f&1)&&G(l,"warning",!e[0]),f&2&&v(l,"width",e[1]==="large"?"80vw":"40rem"),f&32&&E!==(E=`translateY(${e[5]}px)`)&&v(t,"transform",E),f&24&&v(t,"transition",e[3]?"none":`transform ${e[4]}ms ease-out`)},i(a){c||(K(m,a),K(_.$$.fragment,a),K(p,a),te(()=>{c&&(u&&u.end(1),o=fe(s,be,{duration:e[4]*3,y:-35,easing:he,opacity:.9}),o.start())}),c=!0)},o(a){P(m,a),P(_.$$.fragment,a),P(p,a),o&&o.invalidate(),u=de(s,ye,{duration:e[4]/2,start:.85}),c=!1},d(a){a&&T(s),m&&m.d(a),me(_),p&&p.d(a),e[17](null),a&&u&&u.end(),h=!1,oe(b)}}}function Fe(e,s){let t;return function(...r){const d=()=>{clearTimeout(t),e(...r)};clearTimeout(t),t=setTimeout(d,s)}}function Oe(e){const s=["[data-exclude-drag-modal]","button","img","input","pre",'[class^="cm-"]','[slot="item"]','[class^="maplibregl-"]',".IroHandle, .IroSliderGradient, .IroWheelBorder"];for(;e;){if(e.matches&&s.some(t=>e.matches(t)))return!0;e=e.parentNode}return!1}function je(e,s,t){let l,r,d,g,i;Y(e,ke,n=>t(20,l=n)),Y(e,we,n=>t(21,r=n)),Y(e,Ie,n=>t(13,d=n)),Y(e,Ee,n=>t(4,g=n)),Y(e,Te,n=>t(6,i=n));let{$$slots:_={},$$scope:I}=s,{backdropImage:y=!0}=s,{size:E=void 0}=s,o,u,c=1,h=!1,b=0,C=0,m=window.innerHeight*.15,w;function p(){c=1-b/window.innerHeight*3,c<0&&(c=0),c>1&&(c=1),o&&(t(11,o.style.transition="opacity 100ms ease",o),t(11,o.style.opacity=c.toString(),o))}const a=Fe(p,50);ne(()=>{document!=null&&document.body&&(document.body.style.overflow="hidden"),t(11,o=document.querySelector("div.backdrop")),y?o&&(t(11,o.style.backgroundColor="black",o),t(11,o.style.backgroundImage="var(--theme-background-image)",o)):o&&(t(11,o.style.backgroundImage="none",o),t(11,o.style.backgroundColor="rgba(0,0,0,0.3)",o))}),se(async()=>{d.length===0&&(document.body.style.overflow="unset")});function f(n){Oe(n.target)||(t(3,h=!0),C=b)}function q(n){if(h&&n.buttons!==0){let H=b+n.movementY;n.movementY<0&&H<0&&(H=0),t(5,b=H)}else t(3,h=!1)}function F(){t(3,h=!1),b-C>m?(o&&t(11,o.style.transition="none",o),R()):(o&&t(11,o.style.transition="opacity 100ms ease-out",o),t(5,b=0))}function O(n){n.key==="Escape"&&!r&&!l&&R()}const z=()=>{R()};function B(n){re[n?"unshift":"push"](()=>{u=n,t(2,u),t(3,h),t(0,y),t(4,g)})}return e.$$set=n=>{"backdropImage"in n&&t(0,y=n.backdropImage),"size"in n&&t(1,E=n.size),"$$scope"in n&&t(14,I=n.$$scope)},e.$$.update=()=>{e.$$.dirty&29&&(h&&u?(t(2,u.style.backdropFilter="blur(2rem)",u),t(2,u.style.webkitBackdropFilter="blur(2rem)",u)):setTimeout(()=>{u&&y&&(t(2,u.style.backdropFilter="none",u),t(2,u.style.webkitBackdropFilter="none",u))},g)),e.$$.dirty&8208&&(d.length===1?setTimeout(()=>{t(12,w=1)},g):t(12,w=2)),e.$$.dirty&6144&&w===1&&o&&a()},[y,E,u,h,g,b,i,f,q,F,O,o,w,d,I,_,z,B]}class qe extends le{constructor(s){super(),ae(this,s,je,Ce,x,{backdropImage:0,size:1})}}export{qe as I};
