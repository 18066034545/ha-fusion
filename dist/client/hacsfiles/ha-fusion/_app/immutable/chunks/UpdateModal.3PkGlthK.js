import{a as we,e as W,b as v,d,c as Y,I as De,g as E,t as w,h as y,j as S,k as L,l as D,m as B,u as k,o as b,p as F,C as A,F as Ue,w as le,v as Q,x as Le,i as qe,r as Te,K as Fe,L as Ge,J as Ke,M as Me,n as X}from"./scheduler.BGjPv-1J.js";import{S as He,i as je,t as H,g as Ve,a as z,c as ye,b as Z,d as $,m as x,e as ee,j as ve}from"./index.DGGgQIon.js";import{c as Je,p as Ye,s as ze,l as Qe,r as We,b as Xe,g as he,A as Ze,y as ke}from"./Loader.DbTsSYa5.js";import{I as $e}from"./Index.CWVzh7Hi.js";import{C as xe}from"./ConfigButtons.Cc1o6-ot.js";import{t as el,S as ll,m as il,c as be,R as Be}from"./2.dCG7GHcU.js";function Ee(s){let e,t;return e=new $e({props:{$$slots:{title:[nl],default:[al]},$$scope:{ctx:s}}}),{c(){Z(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,i){x(e,l,i),t=!0},p(l,i){const a={};i&8404990&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Se(s){let e,t=`opacity ${s[10]}ms ease`;return{c(){e=E("progress"),this.h()},l(l){e=S(l,"PROGRESS",{max:!0,class:!0}),L(e).forEach(d),this.h()},h(){e.value=s[12],k(e,"max","100"),k(e,"class","svelte-9d80vq"),A(e,"opacity",s[4]?"1":"0.5"),A(e,"transition",t)},m(l,i){v(l,e,i)},p(l,i){i&4096&&(e.value=l[12]),i&16&&A(e,"opacity",l[4]?"1":"0.5"),i&1024&&t!==(t=`opacity ${l[10]}ms ease`)&&A(e,"transition",t)},d(l){l&&d(e)}}}function ge(s){var r,o;let e,t,l,i,a=((r=s[3])==null?void 0:r.installed_version)&&Ie(s),n=((o=s[3])==null?void 0:o.latest_version)&&Ne(s);return{c(){e=E("br"),t=y(),a&&a.c(),l=y(),n&&n.c(),i=W()},l(_){e=S(_,"BR",{}),t=B(_),a&&a.l(_),l=B(_),n&&n.l(_),i=W()},m(_,u){v(_,e,u),v(_,t,u),a&&a.m(_,u),v(_,l,u),n&&n.m(_,u),v(_,i,u)},p(_,u){var p,h;(p=_[3])!=null&&p.installed_version?a?a.p(_,u):(a=Ie(_),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),(h=_[3])!=null&&h.latest_version?n?n.p(_,u):(n=Ne(_),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(_){_&&(d(e),d(t),d(l),d(i)),a&&a.d(_),n&&n.d(_)}}}function Ie(s){var r;let e,t=s[11]("update_installed_version")+"",l,i,a=((r=s[3])==null?void 0:r.installed_version)+"",n;return{c(){e=E("div"),l=w(t),i=w(": "),n=w(a)},l(o){e=S(o,"DIV",{});var _=L(e);l=D(_,t),i=D(_,": "),n=D(_,a),_.forEach(d)},m(o,_){v(o,e,_),b(e,l),b(e,i),b(e,n)},p(o,_){var u;_&2048&&t!==(t=o[11]("update_installed_version")+"")&&F(l,t),_&8&&a!==(a=((u=o[3])==null?void 0:u.installed_version)+"")&&F(n,a)},d(o){o&&d(e)}}}function Ne(s){var r;let e,t=s[11]("update_latest_version")+"",l,i,a=((r=s[3])==null?void 0:r.latest_version)+"",n;return{c(){e=E("div"),l=w(t),i=w(": "),n=w(a)},l(o){e=S(o,"DIV",{});var _=L(e);l=D(_,t),i=D(_,": "),n=D(_,a),_.forEach(d)},m(o,_){v(o,e,_),b(e,l),b(e,i),b(e,n)},p(o,_){var u;_&2048&&t!==(t=o[11]("update_latest_version")+"")&&F(l,t),_&8&&a!==(a=((u=o[3])==null?void 0:u.latest_version)+"")&&F(n,a)},d(o){o&&d(e)}}}function Re(s){let e,t,l=s[11]("update_release_notes")+"",i,a;return{c(){e=E("p"),t=E("a"),i=w(l),this.h()},l(n){e=S(n,"P",{});var r=L(e);t=S(r,"A",{href:!0,target:!0,class:!0});var o=L(t);i=D(o,l),o.forEach(d),r.forEach(d),this.h()},h(){var n;k(t,"href",a=(n=s[3])==null?void 0:n.release_url),k(t,"target","_blank"),k(t,"class","svelte-9d80vq")},m(n,r){v(n,e,r),b(e,t),b(t,i)},p(n,r){var o;r&2048&&l!==(l=n[11]("update_release_notes")+"")&&F(i,l),r&8&&a!==(a=(o=n[3])==null?void 0:o.release_url)&&k(t,"href",a)},d(n){n&&d(e)}}}function Ce(s){let e,t,l,i,a,n=`.release-notes a {\r
						color: rgb(36 167 255);\r
					}`;const r=[sl,tl],o=[];function _(u,p){return u[6]?1:0}return t=_(s),l=o[t]=r[t](s),{c(){e=E("div"),l.c(),i=y(),a=E("style"),a.textContent=n,this.h()},l(u){e=S(u,"DIV",{class:!0});var p=L(e);l.l(p),i=B(p),a=S(p,"STYLE",{"data-svelte-h":!0}),Ue(a)!=="svelte-1igkjwx"&&(a.textContent=n),p.forEach(d),this.h()},h(){k(e,"class","release-notes svelte-9d80vq"),A(e,"display",s[6]?"block":"flex")},m(u,p){v(u,e,p),o[t].m(e,null),b(e,i),b(e,a)},p(u,p){let h=t;t=_(u),t===h?o[t].p(u,p):(Ve(),z(o[h],1,1,()=>{o[h]=null}),ye(),l=o[t],l?l.p(u,p):(l=o[t]=r[t](u),l.c()),H(l,1),l.m(e,i)),p&64&&A(e,"display",u[6]?"block":"flex")},d(u){u&&d(e),o[t].d()}}}function tl(s){let e,t,l,i;return{c(){e=E("div"),t=new Fe(!1),this.h()},l(a){e=S(a,"DIV",{});var n=L(e);t=Ge(n,!1),n.forEach(d),this.h()},h(){t.a=null,A(e,"display","inline-block")},m(a,n){v(a,e,n),t.m(s[6],e),i=!0},p(a,n){s=a,(!i||n&64)&&t.p(s[6])},i(a){i||(a&&Ke(()=>{i&&(l||(l=ve(e,ke,{duration:s[10]},!0)),l.run(1))}),i=!0)},o(a){a&&(l||(l=ve(e,ke,{duration:s[10]},!1)),l.run(0)),i=!1},d(a){a&&d(e),a&&l&&l.end()}}}function sl(s){let e,t;return{c(){e=E("img"),this.h()},l(l){e=S(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Me(e.src,t="loader.svg")||k(e,"src",t),k(e,"alt","loading"),k(e,"class","loader svelte-9d80vq")},m(l,i){v(l,e,i)},p:X,i:X,o:X,d(l){l&&d(e)}}}function Oe(s){let e,t,l,i,a,n=s[11]("update_create_backup")+"",r,o,_;return{c(){e=E("div"),t=E("label"),l=E("input"),i=y(),a=E("span"),r=w(n),this.h()},l(u){e=S(u,"DIV",{class:!0});var p=L(e);t=S(p,"LABEL",{for:!0,class:!0});var h=L(t);l=S(h,"INPUT",{id:!0,type:!0,class:!0}),i=B(h),a=S(h,"SPAN",{class:!0});var q=L(a);r=D(q,n),q.forEach(d),h.forEach(d),p.forEach(d),this.h()},h(){k(l,"id","backup"),k(l,"type","checkbox"),k(l,"class","input-checkbox svelte-9d80vq"),l.disabled=s[8],A(l,"cursor",s[8]?"default":"pointer"),k(a,"class","item-name svelte-9d80vq"),k(t,"for","backup"),k(t,"class","hitbox svelte-9d80vq"),k(e,"class","label-container svelte-9d80vq"),A(e,"opacity",s[8]?"0.5":"1"),A(e,"cursor",s[8]?"default":"pointer")},m(u,p){v(u,e,p),b(e,t),b(t,l),l.checked=s[5],b(t,i),b(t,a),b(a,r),o||(_=le(l,"change",s[20]),o=!0)},p(u,p){p&256&&(l.disabled=u[8]),p&32&&(l.checked=u[5]),p&256&&A(l,"cursor",u[8]?"default":"pointer"),p&2048&&n!==(n=u[11]("update_create_backup")+"")&&F(r,n),p&256&&A(e,"opacity",u[8]?"0.5":"1"),p&256&&A(e,"cursor",u[8]?"default":"pointer")},d(u){u&&d(e),o=!1,_()}}}function Pe(s){let e,t=s[11](s[9]?"undo":"update_skip")+"",l,i,a,n;return{c(){e=E("button"),l=w(t),this.h()},l(r){e=S(r,"BUTTON",{class:!0});var o=L(e);l=D(o,t),o.forEach(d),this.h()},h(){k(e,"class","action svelte-9d80vq"),e.disabled=s[8],Q(e,"done",s[9]),Q(e,"remove",!s[9]),A(e,"opacity",s[8]?"0.5":"1")},m(r,o){v(r,e,o),b(e,l),a||(n=[le(e,"click",s[21]),Le(i=Be.call(null,e,s[13]))],a=!0)},p(r,o){o&2560&&t!==(t=r[11](r[9]?"undo":"update_skip")+"")&&F(l,t),o&256&&(e.disabled=r[8]),i&&qe(i.update)&&o&8192&&i.update.call(null,r[13]),o&512&&Q(e,"done",r[9]),o&512&&Q(e,"remove",!r[9]),o&256&&A(e,"opacity",r[8]?"0.5":"1")},d(r){r&&d(e),a=!1,Te(n)}}}function Ae(s){let e,t=s[11]("update_install")+"",l,i,a,n;return{c(){e=E("button"),l=w(t),this.h()},l(r){e=S(r,"BUTTON",{class:!0});var o=L(e);l=D(o,t),o.forEach(d),this.h()},h(){k(e,"class","done action svelte-9d80vq"),e.disabled=s[8],A(e,"opacity",s[4]||s[8]?"0.5":"1")},m(r,o){v(r,e,o),b(e,l),a||(n=[le(e,"click",s[15]),Le(i=Be.call(null,e,s[13]))],a=!0)},p(r,o){o&2048&&t!==(t=r[11]("update_install")+"")&&F(l,t),o&256&&(e.disabled=r[8]),i&&qe(i.update)&&o&8192&&i.update.call(null,r[13]),o&272&&A(e,"opacity",r[4]||r[8]?"0.5":"1")},d(r){r&&d(e),a=!1,Te(n)}}}function al(s){var m,ie,te,se,ae,ne,oe,fe;let e,t=s[11]("state")+"",l,i,a,n,r,o,_,u,p,h,q,V,G,j,T,U;n=new ll({props:{entity_id:(m=s[1])==null?void 0:m.entity_id,selected:s[1]}});let g=((ie=s[7])==null?void 0:ie.PROGRESS)&&Se(s),N=((te=s[7])==null?void 0:te.SPECIFIC_VERSION)&&ge(s),I=((se=s[3])==null?void 0:se.release_url)&&Re(s),C=((ae=s[7])==null?void 0:ae.RELEASE_NOTES)&&Ce(s),R=((ne=s[7])==null?void 0:ne.BACKUP)&&Oe(s),O=((oe=s[7])==null?void 0:oe.SPECIFIC_VERSION)&&Pe(s),P=((fe=s[7])==null?void 0:fe.INSTALL)&&Ae(s);return T=new xe({props:{sel:s[1]}}),{c(){e=E("h2"),l=w(t),i=y(),a=E("div"),Z(n.$$.fragment),r=y(),g&&g.c(),o=y(),N&&N.c(),_=y(),I&&I.c(),u=y(),C&&C.c(),p=y(),R&&R.c(),h=y(),q=E("div"),V=E("div"),O&&O.c(),G=y(),P&&P.c(),j=y(),Z(T.$$.fragment),this.h()},l(f){e=S(f,"H2",{});var c=L(e);l=D(c,t),c.forEach(d),i=B(f),a=S(f,"DIV",{});var J=L(a);$(n.$$.fragment,J),J.forEach(d),r=B(f),g&&g.l(f),o=B(f),N&&N.l(f),_=B(f),I&&I.l(f),u=B(f),C&&C.l(f),p=B(f),R&&R.l(f),h=B(f),q=S(f,"DIV",{class:!0});var K=L(q);V=S(K,"DIV",{class:!0});var M=L(V);O&&O.l(M),G=B(M),P&&P.l(M),M.forEach(d),j=B(K),$(T.$$.fragment,K),K.forEach(d),this.h()},h(){k(V,"class","config-buttons-group svelte-9d80vq"),k(q,"class","add-config-buttons svelte-9d80vq")},m(f,c){v(f,e,c),b(e,l),v(f,i,c),v(f,a,c),x(n,a,null),v(f,r,c),g&&g.m(f,c),v(f,o,c),N&&N.m(f,c),v(f,_,c),I&&I.m(f,c),v(f,u,c),C&&C.m(f,c),v(f,p,c),R&&R.m(f,c),v(f,h,c),v(f,q,c),b(q,V),O&&O.m(V,null),b(V,G),P&&P.m(V,null),b(q,j),x(T,q,null),U=!0},p(f,c){var M,re,_e,ue,de,pe,ce,me;(!U||c&2048)&&t!==(t=f[11]("state")+"")&&F(l,t);const J={};c&2&&(J.entity_id=(M=f[1])==null?void 0:M.entity_id),c&2&&(J.selected=f[1]),n.$set(J),(re=f[7])!=null&&re.PROGRESS?g?g.p(f,c):(g=Se(f),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null),(_e=f[7])!=null&&_e.SPECIFIC_VERSION?N?N.p(f,c):(N=ge(f),N.c(),N.m(_.parentNode,_)):N&&(N.d(1),N=null),(ue=f[3])!=null&&ue.release_url?I?I.p(f,c):(I=Re(f),I.c(),I.m(u.parentNode,u)):I&&(I.d(1),I=null),(de=f[7])!=null&&de.RELEASE_NOTES?C?C.p(f,c):(C=Ce(f),C.c(),C.m(p.parentNode,p)):C&&(C.d(1),C=null),(pe=f[7])!=null&&pe.BACKUP?R?R.p(f,c):(R=Oe(f),R.c(),R.m(h.parentNode,h)):R&&(R.d(1),R=null),(ce=f[7])!=null&&ce.SPECIFIC_VERSION?O?O.p(f,c):(O=Pe(f),O.c(),O.m(V,G)):O&&(O.d(1),O=null),(me=f[7])!=null&&me.INSTALL?P?P.p(f,c):(P=Ae(f),P.c(),P.m(V,null)):P&&(P.d(1),P=null);const K={};c&2&&(K.sel=f[1]),T.$set(K)},i(f){U||(H(n.$$.fragment,f),H(T.$$.fragment,f),U=!0)},o(f){z(n.$$.fragment,f),z(T.$$.fragment,f),U=!1},d(f){f&&(d(e),d(i),d(a),d(r),d(o),d(_),d(u),d(p),d(h),d(q)),ee(n),g&&g.d(f),N&&N.d(f),I&&I.d(f),C&&C.d(f),R&&R.d(f),O&&O.d(),P&&P.d(),ee(T)}}}function nl(s){let e,t=he(s[1],s[2])+"",l;return{c(){e=E("h1"),l=w(t),this.h()},l(i){e=S(i,"H1",{slot:!0});var a=L(e);l=D(a,t),a.forEach(d),this.h()},h(){k(e,"slot","title")},m(i,a){v(i,e,a),b(e,l)},p(i,a){a&6&&t!==(t=he(i[1],i[2])+"")&&F(l,t)},d(i){i&&d(e)}}}function ol(s){let e,t,l=s[0]&&Ee(s);return{c(){l&&l.c(),e=W()},l(i){l&&l.l(i),e=W()},m(i,a){l&&l.m(i,a),v(i,e,a),t=!0},p(i,[a]){i[0]?l?(l.p(i,a),a&1&&H(l,1)):(l=Ee(i),l.c(),H(l,1),l.m(e.parentNode,e)):l&&(Ve(),z(l,1,1,()=>{l=null}),ye())},i(i){t||(H(l),t=!0)},o(i){z(l),t=!1},d(i){i&&d(e),l&&l.d(i)}}}function fl(s,e,t){let l,i,a,n,r,o,_,u,p,h,q,V,G;Y(s,Je,m=>t(22,u=m)),Y(s,Ye,m=>t(10,p=m)),Y(s,ze,m=>t(19,h=m)),Y(s,Qe,m=>t(11,q=m)),Y(s,We,m=>t(13,G=m));let{isOpen:j}=e,{sel:T}=e,U=!1,g,N;const I=el((i==null?void 0:i.installed_version)===(i==null?void 0:i.latest_version)?0:100,{duration:p*2,easing:Ze});Y(s,I,m=>t(12,V=m)),De(async()=>{if(n!=null&&n.BACKUP&&t(5,U=!0),n!=null&&n.RELEASE_NOTES)try{const m=await u.sendMessagePromise({type:"update/release_notes",entity_id:l==null?void 0:l.entity_id});typeof m=="string"&&t(6,N=il.parse(m))}catch(m){console.error(m)}});function C(){l!=null&&l.entity_id&&be(u,"update","install",{entity_id:l==null?void 0:l.entity_id,backup:U})}function R(m){l!=null&&l.entity_id&&be(u,"update",m,{entity_id:l==null?void 0:l.entity_id})}function O(){U=this.checked,t(5,U)}const P=()=>R(o?"clear_skipped":"skip");return s.$$set=m=>{"isOpen"in m&&t(0,j=m.isOpen),"sel"in m&&t(1,T=m.sel)},s.$$.update=()=>{s.$$.dirty&524290&&t(2,l=h[T==null?void 0:T.entity_id]),s.$$.dirty&4&&t(3,i=l==null?void 0:l.attributes),s.$$.dirty&8&&t(18,a=i==null?void 0:i.supported_features),s.$$.dirty&262144&&t(7,n=Xe(a,{INSTALL:1,SPECIFIC_VERSION:2,PROGRESS:4,BACKUP:8,RELEASE_NOTES:16})),s.$$.dirty&8&&i!=null&&i.in_progress&&t(17,g=i==null?void 0:i.in_progress),s.$$.dirty&8&&t(4,r=typeof(i==null?void 0:i.in_progress)=="number"),s.$$.dirty&8&&t(9,o=(i==null?void 0:i.skipped_version)===(i==null?void 0:i.latest_version)),s.$$.dirty&8&&t(8,_=(i==null?void 0:i.installed_version)===(i==null?void 0:i.latest_version)),s.$$.dirty&131096&&I.set(r?i==null?void 0:i.in_progress:g?100:0)},[j,T,l,i,r,U,N,n,_,o,p,q,V,G,I,C,R,g,a,h,O,P]}class ml extends He{constructor(e){super(),je(this,e,fl,ol,we,{isOpen:0,sel:1})}}export{ml as default};
