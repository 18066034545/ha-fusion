import{a as nt,e as Fe,b as f,d as r,c as ie,A as at,g as v,t as z,h as c,j as g,k as B,l as y,m as b,F as We,u as m,v as Me,o as N,D as Re,w as _e,x as Je,p as J,E as et,i as Ke,r as tt,f as ot,C as Le}from"./scheduler.BGjPv-1J.js";import{S as ut,i as rt,t as S,g as lt,a as M,c as it,b as he,d as de,m as ce,e as be}from"./index.DGGgQIon.js";import{h as ft,i as Qe,l as pt,k as mt,m as _t,s as ht,r as dt,u as ct,c as bt,g as Xe}from"./Loader.DbTsSYa5.js";import{G as vt}from"./SidebarItemConfig.Ca0HNv_7.js";import{S as st}from"./Select.Dq9-hAzu.js";import{C as gt}from"./ConfigButtons.Cc1o6-ot.js";import{I as kt}from"./InputClear.DnqX4aGi.js";import{I as wt}from"./Index.CWVzh7Hi.js";import{R as Ye}from"./2.dCG7GHcU.js";function Ze(l){let t,a;return t=new wt({props:{$$slots:{title:[Ct],default:[Et]},$$scope:{ctx:l}}}),{c(){he(t.$$.fragment)},l(i){de(t.$$.fragment,i)},m(i,n){ce(t,i,n),a=!0},p(i,n){const o={};n&536871421&&(o.$$scope={dirty:n,ctx:i}),t.$set(o)},i(i){a||(S(t.$$.fragment,i),a=!0)},o(i){M(t.$$.fragment,i),a=!1},d(i){be(t,i)}}}function xe(l){let t,a;return t=new st({props:{computeIcons:!0,options:l[3],placeholder:l[6]("sensor"),value:l[0].entity_id}}),t.$on("change",l[15]),{c(){he(t.$$.fragment)},l(i){de(t.$$.fragment,i)},m(i,n){ce(t,i,n),a=!0},p(i,n){const o={};n&8&&(o.options=i[3]),n&64&&(o.placeholder=i[6]("sensor")),n&1&&(o.value=i[0].entity_id),t.$set(o)},i(i){a||(S(t.$$.fragment,i),a=!0)},o(i){M(t.$$.fragment,i),a=!1},d(i){be(t,i)}}}function It(l){let t,a,i,n,o;return{c(){t=v("input"),this.h()},l(p){t=g(p,"INPUT",{name:!0,class:!0,type:!0,placeholder:!0,autocomplete:!0,spellcheck:!0}),this.h()},h(){m(t,"name",a=l[6]("name")),m(t,"class","input"),m(t,"type","text"),m(t,"placeholder",i=Xe(l[0],l[0].entity_id&&l[7][l[0].entity_id]||void 0)||l[6]("name")),m(t,"autocomplete","off"),m(t,"spellcheck","false"),Le(t,"padding",l[28])},m(p,h){f(p,t,h),Re(t,l[2]),n||(o=[_e(t,"input",l[16]),_e(t,"change",l[17])],n=!0)},p(p,h){h&64&&a!==(a=p[6]("name"))&&m(t,"name",a),h&193&&i!==(i=Xe(p[0],p[0].entity_id&&p[7][p[0].entity_id]||void 0)||p[6]("name"))&&m(t,"placeholder",i),h&4&&t.value!==p[2]&&Re(t,p[2]),h&268435456&&Le(t,"padding",p[28])},d(p){p&&r(t),n=!1,tt(o)}}}function $t(l){var i;let t,a;return t=new st({props:{options:l[10],placeholder:l[6]("period"),value:(i=l[0])==null?void 0:i.period}}),t.$on("change",l[19]),{c(){he(t.$$.fragment)},l(n){de(t.$$.fragment,n)},m(n,o){ce(t,n,o),a=!0},p(n,o){var h;const p={};o&64&&(p.placeholder=n[6]("period")),o&1&&(p.value=(h=n[0])==null?void 0:h.period),t.$set(p)},i(n){a||(S(t.$$.fragment,n),a=!0)},o(n){M(t.$$.fragment,n),a=!1},d(n){be(t,n)}}}function Et(l){var Ge,qe,Ve;let t,a=l[6]("preview")+"",i,n,o,p,h,G,K=l[6]("entity")+"",x,k,H,T,L=l[6]("name")+"",Q,D,C,se,R,ee=l[6]("period")+"",I,ve,ne,ae,q,Oe="start_time",oe,P,ue,V,u="end_time",O,$,re,X,d=l[6]("size")+"",j,te,w,Ne,fe,ge=l[6]("mobile")+"",Se,He,A,F,ke=l[6]("visible")+"",Te,De,je,W,we=l[6]("hidden")+"",Pe,Ue,Be,Y,E,ze,ye;p=new vt({props:{entity_id:(Ge=l[0])==null?void 0:Ge.entity_id,name:(qe=l[0])==null?void 0:qe.name,period:(Ve=l[0])==null?void 0:Ve.period,stroke:l[11](l[4])}});let _=l[3]&&xe(l);C=new kt({props:{condition:l[2],$$slots:{default:[It,({padding:e})=>({28:e}),({padding:e})=>e?268435456:0]},$$scope:{ctx:l}}}),C.$on("clear",l[18]);let U=l[10]&&$t(l);return Y=new gt({props:{sel:l[0]}}),{c(){t=v("h2"),i=z(a),n=c(),o=v("div"),he(p.$$.fragment),h=c(),G=v("h2"),x=z(K),k=c(),_&&_.c(),H=c(),T=v("h2"),Q=z(L),D=c(),he(C.$$.fragment),se=c(),R=v("h2"),I=z(ee),ve=z(" (data_points)"),ne=c(),U&&U.c(),ae=c(),q=v("h2"),q.textContent=Oe,oe=c(),P=v("input"),ue=c(),V=v("h2"),V.textContent=u,O=c(),$=v("input"),re=c(),X=v("h2"),j=z(d),te=c(),w=v("input"),Ne=c(),fe=v("h2"),Se=z(ge),He=c(),A=v("div"),F=v("button"),Te=z(ke),je=c(),W=v("button"),Pe=z(we),Be=c(),he(Y.$$.fragment),this.h()},l(e){t=g(e,"H2",{});var s=B(t);i=y(s,a),s.forEach(r),n=b(e),o=g(e,"DIV",{class:!0});var Z=B(o);de(p.$$.fragment,Z),Z.forEach(r),h=b(e),G=g(e,"H2",{});var pe=B(G);x=y(pe,K),pe.forEach(r),k=b(e),_&&_.l(e),H=b(e),T=g(e,"H2",{});var Ie=B(T);Q=y(Ie,L),Ie.forEach(r),D=b(e),de(C.$$.fragment,e),se=b(e),R=g(e,"H2",{});var me=B(R);I=y(me,ee),ve=y(me," (data_points)"),me.forEach(r),ne=b(e),U&&U.l(e),ae=b(e),q=g(e,"H2",{"data-svelte-h":!0}),We(q)!=="svelte-1ezqt76"&&(q.textContent=Oe),oe=b(e),P=g(e,"INPUT",{class:!0,type:!0,placeholder:!0,autocomplete:!0,spellcheck:!0}),ue=b(e),V=g(e,"H2",{"data-svelte-h":!0}),We(V)!=="svelte-bizwwh"&&(V.textContent=u),O=b(e),$=g(e,"INPUT",{class:!0,type:!0,placeholder:!0,autocomplete:!0,spellcheck:!0}),re=b(e),X=g(e,"H2",{});var $e=B(X);j=y($e,d),$e.forEach(r),te=b(e),w=g(e,"INPUT",{class:!0,type:!0,placeholder:!0,min:!0,max:!0}),Ne=b(e),fe=g(e,"H2",{});var Ee=B(fe);Se=y(Ee,ge),Ee.forEach(r),He=b(e),A=g(e,"DIV",{class:!0});var le=B(A);F=g(le,"BUTTON",{});var Ce=B(F);Te=y(Ce,ke),Ce.forEach(r),je=b(le),W=g(le,"BUTTON",{});var Ae=B(W);Pe=y(Ae,we),Ae.forEach(r),le.forEach(r),Be=b(e),de(Y.$$.fragment,e),this.h()},h(){var e,s;m(o,"class","preview svelte-cghlls"),m(P,"class","input"),m(P,"type","text"),m(P,"placeholder",new Date(Date.now()-2629800*1e3).toISOString()),m(P,"autocomplete","off"),m(P,"spellcheck","false"),m($,"class","input"),m($,"type","text"),m($,"placeholder",new Date().toISOString()),m($,"autocomplete","off"),m($,"spellcheck","false"),m(w,"class","input"),m(w,"type","number"),m(w,"placeholder","2"),m(w,"min",l[9].min),m(w,"max",l[9].max),Me(F,"selected",((e=l[0])==null?void 0:e.hide_mobile)!==!0),Me(W,"selected",((s=l[0])==null?void 0:s.hide_mobile)===!0),m(A,"class","button-container")},m(e,s){f(e,t,s),N(t,i),f(e,n,s),f(e,o,s),ce(p,o,null),f(e,h,s),f(e,G,s),N(G,x),f(e,k,s),_&&_.m(e,s),f(e,H,s),f(e,T,s),N(T,Q),f(e,D,s),ce(C,e,s),f(e,se,s),f(e,R,s),N(R,I),N(R,ve),f(e,ne,s),U&&U.m(e,s),f(e,ae,s),f(e,q,s),f(e,oe,s),f(e,P,s),f(e,ue,s),f(e,V,s),f(e,O,s),f(e,$,s),f(e,re,s),f(e,X,s),N(X,j),f(e,te,s),f(e,w,s),Re(w,l[4]),l[21](w),f(e,Ne,s),f(e,fe,s),N(fe,Se),f(e,He,s),f(e,A,s),N(A,F),N(F,Te),N(A,je),N(A,W),N(W,Pe),f(e,Be,s),ce(Y,e,s),E=!0,ze||(ye=[_e(w,"input",l[12]),_e(w,"input",l[20]),_e(F,"click",l[22]),Je(De=Ye.call(null,F,l[8])),_e(W,"click",l[23]),Je(Ue=Ye.call(null,W,l[8]))],ze=!0)},p(e,s){var me,$e,Ee,le,Ce;(!E||s&64)&&a!==(a=e[6]("preview")+"")&&J(i,a);const Z={};s&1&&(Z.entity_id=(me=e[0])==null?void 0:me.entity_id),s&1&&(Z.name=($e=e[0])==null?void 0:$e.name),s&1&&(Z.period=(Ee=e[0])==null?void 0:Ee.period),s&16&&(Z.stroke=e[11](e[4])),p.$set(Z),(!E||s&64)&&K!==(K=e[6]("entity")+"")&&J(x,K),e[3]?_?(_.p(e,s),s&8&&S(_,1)):(_=xe(e),_.c(),S(_,1),_.m(H.parentNode,H)):_&&(lt(),M(_,1,1,()=>{_=null}),it()),(!E||s&64)&&L!==(L=e[6]("name")+"")&&J(Q,L);const pe={};s&4&&(pe.condition=e[2]),s&805306565&&(pe.$$scope={dirty:s,ctx:e}),C.$set(pe),(!E||s&64)&&ee!==(ee=e[6]("period")+"")&&J(I,ee),e[10]&&U.p(e,s),(!E||s&64)&&d!==(d=e[6]("size")+"")&&J(j,d),s&16&&et(w.value)!==e[4]&&Re(w,e[4]),(!E||s&64)&&ge!==(ge=e[6]("mobile")+"")&&J(Se,ge),(!E||s&64)&&ke!==(ke=e[6]("visible")+"")&&J(Te,ke),De&&Ke(De.update)&&s&256&&De.update.call(null,e[8]),(!E||s&1)&&Me(F,"selected",((le=e[0])==null?void 0:le.hide_mobile)!==!0),(!E||s&64)&&we!==(we=e[6]("hidden")+"")&&J(Pe,we),Ue&&Ke(Ue.update)&&s&256&&Ue.update.call(null,e[8]),(!E||s&1)&&Me(W,"selected",((Ce=e[0])==null?void 0:Ce.hide_mobile)===!0);const Ie={};s&1&&(Ie.sel=e[0]),Y.$set(Ie)},i(e){E||(S(p.$$.fragment,e),S(_),S(C.$$.fragment,e),S(U),S(Y.$$.fragment,e),E=!0)},o(e){M(p.$$.fragment,e),M(_),M(C.$$.fragment,e),M(U),M(Y.$$.fragment,e),E=!1},d(e){e&&(r(t),r(n),r(o),r(h),r(G),r(k),r(H),r(T),r(D),r(se),r(R),r(ne),r(ae),r(q),r(oe),r(P),r(ue),r(V),r(O),r($),r(re),r(X),r(te),r(w),r(Ne),r(fe),r(He),r(A),r(Be)),be(p),_&&_.d(e),be(C,e),U&&U.d(e),l[21](null),be(Y,e),ze=!1,tt(ye)}}}function Ct(l){let t,a=l[6]("graph")+"",i;return{c(){t=v("h1"),i=z(a),this.h()},l(n){t=g(n,"H1",{slot:!0});var o=B(t);i=y(o,a),o.forEach(r),this.h()},h(){m(t,"slot","title")},m(n,o){f(n,t,o),N(t,i)},p(n,o){o&64&&a!==(a=n[6]("graph")+"")&&J(i,a)},d(n){n&&r(t)}}}function Ot(l){let t,a,i=l[1]&&Ze(l);return{c(){i&&i.c(),t=Fe()},l(n){i&&i.l(n),t=Fe()},m(n,o){i&&i.m(n,o),f(n,t,o),a=!0},p(n,[o]){n[1]?i?(i.p(n,o),o&2&&S(i,1)):(i=Ze(n),i.c(),S(i,1),i.m(t.parentNode,t)):i&&(lt(),M(i,1,1,()=>{i=null}),it())},i(n){a||(S(i),a=!0)},o(n){M(i),a=!1},d(n){n&&r(t),i&&i.d(n)}}}function Nt(l,t,a){let i,n,o,p,h,G,K;ie(l,ft,u=>a(24,i=u)),ie(l,Qe,u=>a(25,n=u)),ie(l,pt,u=>a(6,o=u)),ie(l,mt,u=>a(26,p=u)),ie(l,_t,u=>a(27,h=u)),ie(l,ht,u=>a(7,G=u)),ie(l,dt,u=>a(8,K=u));let{isOpen:x}=t,{sel:k}=t,{demo:H=void 0}=t;H&&(h.splice(p,1),I("entity_id",H));let T=k==null?void 0:k.name,L,Q=k==null?void 0:k.stroke,D;const C={min:0,max:10},se=[{id:"5minute",label:o("period_5minute")},{id:"hour",label:o("period_hour")},{id:"day",label:o("period_day")},{id:"week",label:o("period_week")},{id:"month",label:o("period_month")}];function R(u){return Math.min(Math.max(parseInt(u),C.min),C.max)}function ee(u){var $;const O=R(($=u==null?void 0:u.target)==null?void 0:$.value);I("stroke",O),D&&a(5,D.value=String(O),D)}function I(u,O){a(0,k=ct(k,u,O)),Qe.set(n)}at(()=>i()),bt.subscribe(async u=>{if(u)try{const[O,$]=await Promise.all([u.sendMessagePromise({type:"recorder/list_statistic_ids"}),u.sendMessagePromise({type:"recorder/validate_statistics"})]),re=Object.values(O).map(d=>{var j;return(j=d==null?void 0:d.statistic_id)!=null&&j.startsWith("sensor.")?d.statistic_id:null}).filter(Boolean),X=new Set(Object.values($).map(d=>{var j,te;return(te=(j=d[0])==null?void 0:j.data)==null?void 0:te.statistic_id}).filter(Boolean));a(3,L=re.filter(d=>!X.has(d)).map(d=>({id:d,label:d})))}catch(O){console.error(O)}});const ve=u=>I("entity_id",u);function ne(){T=this.value,a(2,T)}const ae=u=>I("name",u),q=()=>{a(2,T=void 0),I("name")},Oe=u=>I("period",u);function oe(){Q=et(this.value),a(4,Q)}function P(u){ot[u?"unshift":"push"](()=>{D=u,a(5,D)})}const ue=()=>I("hide_mobile"),V=()=>I("hide_mobile",!0);return l.$$set=u=>{"isOpen"in u&&a(1,x=u.isOpen),"sel"in u&&a(0,k=u.sel),"demo"in u&&a(14,H=u.demo)},[k,x,T,L,Q,D,o,G,K,C,se,R,ee,I,H,ve,ne,ae,q,Oe,oe,P,ue,V]}class jt extends ut{constructor(t){super(),rt(this,t,Nt,Ot,nt,{isOpen:1,sel:0,demo:14})}}export{jt as default};
