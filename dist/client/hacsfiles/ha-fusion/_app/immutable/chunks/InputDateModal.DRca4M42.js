import{a as J,e as L,b as h,d as _,c as k,g as w,h as N,t as E,j as C,k as M,m as O,l as F,u as D,o as I,w as K,p as H}from"./scheduler.BGjPv-1J.js";import{S as Q,i as R,t as S,g as V,a as U,c as W,b as A,d as B,m as Y,e as G}from"./index.DGGgQIon.js";import{d as X,c as Z,s as $,l as x,a as ee,g as j}from"./Loader.DbTsSYa5.js";import{I as te}from"./Index.CWVzh7Hi.js";import{C as ae}from"./ConfigButtons.Cc1o6-ot.js";import{c as ie}from"./2.dCG7GHcU.js";function q(n){let t,i;return t=new te({props:{$$slots:{title:[se],default:[oe]},$$scope:{ctx:n}}}),{c(){A(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,a){Y(t,e,a),i=!0},p(e,a){const o={};a&4222&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(e){i||(S(t.$$.fragment,e),i=!0)},o(e){U(t.$$.fragment,e),i=!1},d(e){G(t,e)}}}function ne(n){let t=n[6](n[4])+"",i;return{c(){i=E(t)},l(e){i=F(e,t)},m(e,a){h(e,i,a)},p(e,a){a&80&&t!==(t=e[6](e[4])+"")&&H(i,t)},d(e){e&&_(i)}}}function re(n){let t=n[6]("date_or_time")+"",i;return{c(){i=E(t)},l(e){i=F(e,t)},m(e,a){h(e,i,a)},p(e,a){a&64&&t!==(t=e[6]("date_or_time")+"")&&H(i,t)},d(e){e&&_(i)}}}function oe(n){let t,i,e,a=n[8](n[5],n[4]||"datetime")+"",o,d,m,b,g,T,p,c,y,v;function s(r,f){if(r[3]==="datetime"||r[4]==="datetime")return re;if(r[4])return ne}let u=s(n),l=u&&u(n);return p=new ae({}),{c(){t=w("h2"),l&&l.c(),i=N(),e=w("span"),o=E(a),d=N(),m=w("input"),T=N(),A(p.$$.fragment),this.h()},l(r){t=C(r,"H2",{});var f=M(t);l&&l.l(f),i=O(f),e=C(f,"SPAN",{class:!0});var P=M(e);o=F(P,a),P.forEach(_),f.forEach(_),d=O(r),m=C(r,"INPUT",{class:!0,type:!0}),T=O(r),B(p.$$.fragment,r),this.h()},h(){D(e,"class","align-right"),D(m,"class","input svelte-7nza0v"),D(m,"type",b=n[3]==="datetime"||n[4]==="datetime"?"datetime-local":n[4]),m.value=g=n[3]==="datetime"?z(n[5]):n[5]},m(r,f){h(r,t,f),l&&l.m(t,null),I(t,i),I(t,e),I(e,o),h(r,d,f),h(r,m,f),h(r,T,f),Y(p,r,f),c=!0,y||(v=K(m,"change",n[7]),y=!0)},p(r,f){u===(u=s(r))&&l?l.p(r,f):(l&&l.d(1),l=u&&u(r),l&&(l.c(),l.m(t,i))),(!c||f&48)&&a!==(a=r[8](r[5],r[4]||"datetime")+"")&&H(o,a),(!c||f&24&&b!==(b=r[3]==="datetime"||r[4]==="datetime"?"datetime-local":r[4]))&&D(m,"type",b),(!c||f&40&&g!==(g=r[3]==="datetime"?z(r[5]):r[5])&&m.value!==g)&&(m.value=g)},i(r){c||(S(p.$$.fragment,r),c=!0)},o(r){U(p.$$.fragment,r),c=!1},d(r){r&&(_(t),_(d),_(m),_(T)),l&&l.d(),G(p,r),y=!1,v()}}}function se(n){let t,i=j(n[1],n[2])+"",e;return{c(){t=w("h1"),e=E(i),this.h()},l(a){t=C(a,"H1",{slot:!0});var o=M(t);e=F(o,i),o.forEach(_),this.h()},h(){D(t,"slot","title")},m(a,o){h(a,t,o),I(t,e)},p(a,o){o&6&&i!==(i=j(a[1],a[2])+"")&&H(e,i)},d(a){a&&_(t)}}}function le(n){let t,i,e=n[0]&&q(n);return{c(){e&&e.c(),t=L()},l(a){e&&e.l(a),t=L()},m(a,o){e&&e.m(a,o),h(a,t,o),i=!0},p(a,[o]){a[0]?e?(e.p(a,o),o&1&&S(e,1)):(e=q(a),e.c(),S(e,1),e.m(t.parentNode,t)):e&&(V(),U(e,1,1,()=>{e=null}),W())},i(a){i||(S(e),i=!0)},o(a){U(e),i=!1},d(a){a&&_(t),e&&e.d(a)}}}function ue(n,t){if(n&&t)return"datetime";if(n)return"date";if(t)return"time"}function z(n){const t=new Date(n),i=t.getUTCFullYear(),e=(t.getUTCMonth()+1).toString().padStart(2,"0"),a=t.getUTCDate().toString().padStart(2,"0"),o=t.getUTCHours().toString().padStart(2,"0"),d=t.getUTCMinutes().toString().padStart(2,"0");return`${i}-${e}-${a}T${o}:${d}`}function me(n,t,i){let e,a,o,d,m,b,g,T;k(n,X,s=>i(10,m=s)),k(n,Z,s=>i(11,b=s)),k(n,$,s=>i(9,g=s)),k(n,x,s=>i(6,T=s));let{isOpen:p}=t,{sel:c}=t;function y(s){if(!(e!=null&&e.entity_id))return;const u=s==null?void 0:s.target,l=d==="datetime"?"set_value":"set_datetime",r=d==="datetime"?{datetime:u==null?void 0:u.value}:o&&{[o]:u==null?void 0:u.value};ie(b,d,l,{entity_id:e==null?void 0:e.entity_id,...r})}function v(s,u){try{if(u==="datetime")return new Intl.DateTimeFormat(m,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(s));if(u==="date")return new Intl.DateTimeFormat(m,{year:"numeric",month:"long",day:"numeric"}).format(new Date(s));if(u==="time"){const l=s.split(":"),r=new Date;return r.setHours(l[0],l[1],l[2]||0),new Intl.DateTimeFormat(m,{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:void 0}).format(r)}}catch(l){return console.error("Error formatting date/time:",l),"Invalid Date/Time"}}return n.$$set=s=>{"isOpen"in s&&i(0,p=s.isOpen),"sel"in s&&i(1,c=s.sel)},n.$$.update=()=>{var s,u;n.$$.dirty&514&&i(2,e=g[c==null?void 0:c.entity_id]),n.$$.dirty&4&&i(5,a=e==null?void 0:e.state),n.$$.dirty&4&&i(4,o=ue((s=e==null?void 0:e.attributes)==null?void 0:s.has_date,(u=e==null?void 0:e.attributes)==null?void 0:u.has_time)),n.$$.dirty&4&&i(3,d=ee(e.entity_id))},[p,c,e,d,o,a,T,y,v,g]}class he extends Q{constructor(t){super(),R(this,t,me,le,J,{isOpen:0,sel:1})}}export{he as default};
